<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="ELecmark">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://Elecmark.github.io/2024/04/22/mit软件性能工程——homework-3-vectorization/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="In this homework and recitation you will experiment with Intel Vector Extensions. You will learn how to vectorize your code, ﬁgure out when vectorization has succeeded and debug when vectorization see">
<meta property="og:type" content="article">
<meta property="og:title" content="MIT软件性能工程——Homework-3-Vectorization">
<meta property="og:url" content="https://elecmark.github.io/2024/04/22/MIT%E8%BD%AF%E4%BB%B6%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E2%80%94%E2%80%94Homework-3-Vectorization/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="In this homework and recitation you will experiment with Intel Vector Extensions. You will learn how to vectorize your code, ﬁgure out when vectorization has succeeded and debug when vectorization see">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-04-22T12:09:38.000Z">
<meta property="article:modified_time" content="2024-04-22T15:58:25.151Z">
<meta property="article:author" content="Elecmark">
<meta property="article:tag" content="课程项目">
<meta property="article:tag" content="作业报告">
<meta property="article:tag" content="软件性能工程">
<meta name="twitter:card" content="summary">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/pdh-logo.webp" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/pdh-logo.webp">
    <meta name="theme-color" content="#80B5FF">
    <link rel="shortcut icon" href="/images/pdh-logo.webp">
    <!--- Page Info-->
    
    <title>
        
            MIT软件性能工程——Homework-3-Vectorization -
        
        Pu Dianheng&#39;s blog
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
        <style>
    :root {
        --preloader-background-color: #fff;
        --preloader-text-color: #000;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --preloader-background-color: #202124;
            --preloader-text-color: #fff;
        }
    }

    @media (prefers-color-scheme: light) {
        :root {
            --preloader-background-color: #fff;
            --preloader-text-color: #000;
        }
    }

    @media (max-width: 600px) {
        .ml13 {
            font-size: 2.6rem !important; /* Adjust this value as needed */
        }
    }

    .preloader {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* Tailwind 'gap-4' is 1rem */
        align-items: center;
        justify-content: center;
        position: fixed;
        padding: 12px;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 100vh; /* 'h-screen' is 100% of the viewport height */
        background-color: var(--preloader-background-color);
        z-index: 1100; /* 'z-[1100]' sets the z-index */
        transition: opacity 0.2s ease-in-out;
    }

    .ml13 {
        font-size: 3.2rem;
        /* text-transform: uppercase; */
        color: var(--preloader-text-color);
        letter-spacing: -1px;
        font-weight: 500;
        font-family: 'Chillax-Variable', sans-serif;
        text-align: center;
    }

    .ml13 .word {
        display: inline-flex;
        flex-wrap: wrap;
        white-space: nowrap;
    }

    .ml13 .letter {
        display: inline-block;
        line-height: 1em;
    }
</style>

<div class="preloader">
    
<script src="/js/libs/anime.min.js"></script>

    <h1 class="ml13">
        Pu Dianheng&#39;s blog
    </h1>
    <script>
        var textWrapper = document.querySelector('.ml13');
        // Split text into words
        var words = textWrapper.textContent.trim().split(' ');

        // Clear the existing content
        textWrapper.innerHTML = '';

        // Wrap each word and its letters in spans
        words.forEach(function(word) {
            var wordSpan = document.createElement('span');
            wordSpan.classList.add('word');
            wordSpan.innerHTML = word.replace(/\S/g, "<span class='letter'>$&</span>");
            textWrapper.appendChild(wordSpan);
            textWrapper.appendChild(document.createTextNode(' ')); // Add space between words
        });


        anime.timeline({loop: true})
            .add({
                targets: '.ml13 .letter',
                translateY: [100,0],
                translateZ: 0,
                opacity: [0,1],
                easing: "easeOutExpo",
                duration: 1400,
                delay: (el, i) => 300 + 30 * i
            }).add({
            targets: '.ml13 .letter',
            translateY: [0,-100],
            opacity: [1,0],
            easing: "easeInExpo",
            duration: 1200,
            delay: (el, i) => 100 + 30 * i
        });

        let themeStatus = JSON.parse(localStorage.getItem('REDEFINE-THEME-STATUS'))?.isDark;

        // If the theme status is not found in local storage, check the preferred color scheme
        if (themeStatus === undefined || themeStatus === null) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                themeStatus = 'dark';
            } else {
                themeStatus = 'light';
            }
        }

        // Now you can use the themeStatus variable in your code
        if (themeStatus) {
            document.documentElement.style.setProperty('--preloader-background-color', '#202124');
            document.documentElement.style.setProperty('--preloader-text-color', '#fff');
        } else {
            document.documentElement.style.setProperty('--preloader-background-color', '#fff');
            document.documentElement.style.setProperty('--preloader-text-color', '#000');
        }

        window.addEventListener('load', function () {
            hidePreloaderAfterTimeout(1000); // Hide after 1000 milliseconds once the window has loaded
        });

        // Backup failsafe: Hide preloader after a maximum of 5000 milliseconds, regardless of the window load event
        hidePreloaderAfterTimeout(5000);

        function hidePreloaderAfterTimeout(delay) {
            setTimeout(function () {
                var preloader = document.querySelector('.preloader');
                preloader.style.opacity = '0';
                setTimeout(function () {
                    preloader.style.display = 'none';
                }, 200);
            }, delay);
        }
    </script>
</div>
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/fonts.css">

    
<link rel="stylesheet" href="/fonts/Satoshi/satoshi.css">

    <!--- Font Part-->
    
    
    
        <link href="" rel="stylesheet">
    
    
        <link href="" rel="stylesheet">
    


    <script id="hexo-configurations">
    window.config = {"hostname":"elecmark.github.io","root":"/","language":"en","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"title_alignment":"left","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":["VIP"]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#80B5FF","secondary":"#004098","default_mode":"light"},"global":{"fonts":{"chinese":{"enable":true,"family":null,"url":null},"english":{"enable":true,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":true,"percentage":true},"website_counter":{"url":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wall1.jpg","dark":"/images/wall_shenzhen.jpg"},"title":"Elecmark-Pu Dianheng","subtitle":{"text":["“Life is a bug, and you are the programmer.”","“Nothing is true, everything is permitted.” ——「刺客信条」","“Life endures, birth continue.” ——「艾尔登法环」","“Open your eyes.” —— 「塞尔达传说：荒野之息」","“直面天命。” —— 「黑神话：悟空」"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn?c=c"},"typing_speed":50,"backing_speed":30,"starting_delay":100,"backing_delay":5000,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#FFFFF5"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/Elecmark","instagram":null,"zhihu":null,"twitter":null,"email":"944723112@qq.com","fa-solid fa-c fa-fw fa-lg":"https://blog.csdn.net/LanLinHui?type=blog","steam":"https://steamcommunity.com/profiles/76561198167581914/"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":true,"type":"fixed","audios":[{"name":"soundorbis - LIFE","artist":"Kyle Xian","url":"https://music.163.com/song/media/outer/url?id=516372224.mp3","cover":"http://p1.music.126.net/raSRxUrm3X7hhWiQV_HcJA==/109951163053574552.jpg"},{"name":"Pokémon Sleep - Christmas","artist":"Pokémon Sleep","url":"https://music.163.com/song/media/outer/url?id=2130624871.mp3","cover":"https://p1.music.126.net/OtaKibk9x3UAg_tZMTfwtQ==/109951169173263539.jpg"},{"name":"Guitar","artist":"Guitar","url":"/music/校园吉他纯音乐.mp3","cover":"/music/covers/music.svg"}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.6.1","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":25},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"作品集Portfolio":{"path":"/tags/作品集/","icon":"fa-regular fa-archive"},"关于About":{"icon":"fa-regular fa-user","submenus":{"我的信息Me":"/about","友链Friends":"/links","时间轴Timeline":"/archives"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":{"时间轴Timeline":{"path":"/archives","icon":"fa-solid fa-timeline"},"标签Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"分类Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","categories":{"enable":true,"limit":5},"tags":{"enable":true,"limit":3}},"footerStart":"2023/9/24 19:02:20"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
<!--        <span class="swup-progress-icon">-->
<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
<!--        </span>-->
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container px-6 md:px-12">

    <div class="navbar-content ">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/images/pdh-logo.webp">
                </a>
            
            <a class="logo-title" href="/">
                
                Pu Dianheng&#39;s blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    HOME
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags/%E4%BD%9C%E5%93%81%E9%9B%86/"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    作品集PORTFOLIO
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown"
                                   href="#"
                                        onClick=&#34;return false;&#34;>
                                    <i class="fa-regular fa-user fa-fw"></i>
                                    关于ABOUT
                                    <i class="fa-solid fa-chevron-down fa-fw"></i>
                                </a>

                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                        
                                            <li>
                                                <a href="/about">
                                                    我的信息ME
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a href="/links">
                                                    友链FRIENDS
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a href="/archives">
                                                    时间轴TIMELINE
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-screen w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                HOME
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags/%E4%BD%9C%E5%93%81%E9%9B%86/"
                        >
                            <span>
                                作品集PORTFOLIO
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full">
                        
                        <div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                             navbar-data-toggle="submenu-关于About"
                        >
                            <span>
                                关于ABOUT
                            </span>
                            
                                <i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i>
                            
                        </div>
                        

                        
                            <div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-关于About">
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/about">我的信息ME</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/links">友链FRIENDS</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/archives">时间轴TIMELINE</a>
                                    </div>
                                
                            </div>
                        
                    </li>
            

            
            
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/archives"
                        >
                            <span>时间轴Timeline</span>
                            <i class="fa-solid fa-timeline fa-sm fa-fw"></i>
                        </a>
                    </li>
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/tags"
                        >
                            <span>标签Tags</span>
                            <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                        </a>
                    </li>
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/categories"
                        >
                            <span>分类Categories</span>
                            <i class="fa-regular fa-folder fa-sm fa-fw"></i>
                        </a>
                    </li>
                
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">22</div>
        <div class="label text-third-text-color text-sm">Tags</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">18</div>
        <div class="label text-third-text-color text-sm">Categories</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">21</div>
        <div class="label text-third-text-color text-sm">Posts</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container flex relative justify-between box-border w-full h-full">
    <div class="article-content-container">

        <div class="article-title relative w-full">
            
                <div class="w-full flex items-center pt-6 justify-start">
                    <h1 class="article-title-regular text-second-text-color text-4xl md:text-6xl font-bold px-2 sm:px-6 md:px-8 py-3">MIT软件性能工程——Homework-3-Vectorization</h1>
                </div>
            
            </div>

        
            <div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/images/em-logo.png">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">ELecmark</span>
                        
                            <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">VIP</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2024-04-22 20:09:38</span>
        <span class="mobile">2024-04-22 20:09:38</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2024-04-22 23:58:25</span>
            <span class="mobile">2024-04-22 23:58:25</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/%E6%9C%AC%E7%A7%91%E9%A1%B9%E7%9B%AE/">本科项目</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/%E6%9C%AC%E7%A7%91%E9%A1%B9%E7%9B%AE/%E8%BD%AF%E4%BB%B6%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B/">软件性能工程</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/%E6%9C%AC%E7%A7%91%E9%A1%B9%E7%9B%AE/%E8%BD%AF%E4%BB%B6%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B/MIT%E4%BD%9C%E4%B8%9A/">MIT作业</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/">课程项目</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E4%BD%9C%E4%B8%9A%E6%8A%A5%E5%91%8A/">作业报告</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B/">软件性能工程</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
            <h2 id="作业要求："><a href="#作业要求：" class="headerlink" title="作业要求："></a>作业要求：</h2> <embed src="/pdf/软件性能工程/hw3.pdf" width="100%" height="600" type="application/pdf">



<h2 id="Write-up1-分析汇编代码"><a href="#Write-up1-分析汇编代码" class="headerlink" title="Write-up1: 分析汇编代码"></a>Write-up1: 分析汇编代码</h2><p>在汇编代码中，编译器设置起始索引为 -65536 (<code>$-65536</code>) 并在每次内存访问时对其进行增加，而不是从0开始并使用小的正偏移量。这种做法可能有几个原因：</p>
<h4 id="内存对齐和访问优化："><a href="#内存对齐和访问优化：" class="headerlink" title="内存对齐和访问优化："></a><strong>内存对齐和访问优化</strong>：</h4><p>编译器可能会选择这样的索引方式来确保内存访问对齐，特别是在进行SIMD操作时，正确的对齐可以显著提高性能。通过从-65536开始，编译器可能在某种程度上试图优化循环内部对于数组的迭代访问，使其更加适合于向量化操作。</p>
<h4 id="循环绕回："><a href="#循环绕回：" class="headerlink" title="循环绕回："></a><strong>循环绕回</strong>：</h4><p>此方法可能涉及到处理循环边界的问题，特别是当数组长度正好不是向量大小的整数倍时。编译器可能使用这种方式来简化循环结束后的边界检查逻辑，通过在计算偏移时自动“绕回”数组起始位置。</p>
<h4 id="指令优化："><a href="#指令优化：" class="headerlink" title="指令优化："></a><strong>指令优化</strong>：</h4><p>使用这种特定的起始偏移可能有助于简化某些处理器指令，编译器可能利用这种方法来减少某些指令的使用，或者是优化指令的执行路径。</p>
<p>总结而言，这种汇编代码生成方式可能是编译器为了优化性能，根据底层硬件的特定特性和向量化的需求而做出的特定决策。</p>
<h2 id="Write-up-2-修正代码以使用AVX2寄存器进行对齐移动"><a href="#Write-up-2-修正代码以使用AVX2寄存器进行对齐移动" class="headerlink" title="Write-up 2: 修正代码以使用AVX2寄存器进行对齐移动"></a>Write-up 2: 修正代码以使用AVX2寄存器进行对齐移动</h2><p>在使用AVX2指令集时，注意到代码中使用的是 <code>vmovdqu</code> 指令，这是一个用于非对齐内存访问的指令。虽然这使得代码在处理非对齐数据时更为灵活，但使用对齐的内存访问指令（如 <code>vmovdqa</code>）通常能提供更好的性能，因为对齐的数据访问可以减少内存访问延迟并增加数据吞吐量。</p>
<p>为了确保数组 <code>a</code> 和 <code>b</code> 被正确对齐以利用AVX2的对齐指令，可以在函数参数中声明这些数组是对齐的。这可以通过在C语言中使用 <code>__attribute__((aligned(32)))</code> 来实现，或者在函数调用中使用 <code>_builtin_assume_aligned</code> 内建函数来保证对齐，如下所示：</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SIZE (1L &lt;&lt; 16)</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">uint8_t</span> * __attribute__((aligned(<span class="number">32</span>))) a, <span class="type">uint8_t</span> * __attribute__((aligned(<span class="number">32</span>))) b)</span> &#123;</span><br><span class="line">    <span class="type">uint64_t</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; SIZE; i++) &#123;</span><br><span class="line">        a[i] += b[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>在编译时，确保使用 <code>-mavx2</code> 选项以启用AVX2指令集。这样修改后，编译器应该会使用 <code>vmovdqa</code> 指令而不是 <code>vmovdqu</code>，从而提高代码的性能。这些对齐指令确保每次内存访问都是在32字节边界上进行，这对AVX2架构是最优的。</p>
<h2 id="Write-up-3-解释编译器生成截然不同的汇编代码的原因"><a href="#Write-up-3-解释编译器生成截然不同的汇编代码的原因" class="headerlink" title="Write-up 3: 解释编译器生成截然不同的汇编代码的原因"></a>Write-up 3: 解释编译器生成截然不同的汇编代码的原因</h2><p>在这个例子中，观察到编译器在处理两个版本的 <code>test</code> 函数时生成了截然不同的汇编代码。初步版本中的代码并没有被有效地向量化，而修改后的版本则实现了完全向量化，使用了 <code>movdqa</code> 和 <code>pmaxub</code> 指令。这种差异主要由以下几个因素造成：</p>
<h4 id="条件分支的影响："><a href="#条件分支的影响：" class="headerlink" title="条件分支的影响："></a><strong>条件分支的影响</strong>：</h4><ul>
<li>在初始的代码中，使用了 <code>if</code> 语句来判断并赋值，这引入了条件分支。在很多情况下，条件分支可以阻碍向量化，因为向量化操作要求在多个数据上同时执行相同的操作。条件分支会使得每个元素可能需要不同的操作，这与向量化的要求相冲突。</li>
<li>修改后的代码使用了条件操作符（三元运算符），这种表达方式使得编译器能够更容易地推断出可以使用单个向量指令（如 <code>pmaxub</code>）来同时处理多个元素。</li>
</ul>
<h4 id="内存对齐与访问模式："><a href="#内存对齐与访问模式：" class="headerlink" title="内存对齐与访问模式："></a><strong>内存对齐与访问模式</strong>：</h4><ul>
<li>使用 <code>__builtin_assume_aligned</code> 明确告诉编译器，输入数组 <code>a</code> 和 <code>b</code> 都按照16字节对齐。这个信息允许编译器使用对齐的内存访问指令（如 <code>movdqa</code>），这些指令比非对齐的内存访问指令（如 <code>movdqu</code>）更快更高效。</li>
<li>对齐的内存访问减少了处理器在执行内存读写时可能遇到的延迟和复杂性，从而提高了代码的执行速度和效率。</li>
</ul>
<h4 id="向量化指令的选择："><a href="#向量化指令的选择：" class="headerlink" title="向量化指令的选择："></a><strong>向量化指令的选择</strong>：</h4><ul>
<li>使用 <code>pmaxub</code>（Packed Maximum Unsigned Byte）指令允许编译器生成一个单一的向量化循环，该循环在每次迭代中处理多个数组元素。这显著提高了循环的效率，因为它减少了迭代次数并且更好地利用了CPU的向量处理能力。</li>
</ul>
<h4 id="编译器优化策略："><a href="#编译器优化策略：" class="headerlink" title="编译器优化策略："></a><strong>编译器优化策略</strong>：</h4><ul>
<li>编译器的内部优化策略也可能影响向量化的结果。在有明确内存对齐和简化操作（如使用三元运算符代替条件分支）的情况下，编译器更有可能实施向量化优化。</li>
</ul>
<p>总结来说，通过简化条件逻辑，并明确告诉编译器关于数据对齐的信息，能够帮助编译器生成更高效的向量化代码。这突显了在编写高性能代码时，对编译器的指导和代码的表达方式需要精心设计，以便充分利用现代处理器的向量化能力。</p>
<h2 id="Write-up-4-分析为什么汇编代码没有使用向量寄存器，并探讨向量化是否会更快"><a href="#Write-up-4-分析为什么汇编代码没有使用向量寄存器，并探讨向量化是否会更快" class="headerlink" title="Write-up 4: 分析为什么汇编代码没有使用向量寄存器，并探讨向量化是否会更快"></a>Write-up 4: 分析为什么汇编代码没有使用向量寄存器，并探讨向量化是否会更快</h2><p>在例子3中，<code>test</code> 函数实现了一个简单的数组赋值操作，其中数组 <code>a</code> 的每个元素被设置为数组 <code>b</code> 中下一个元素的值。具体代码如下：</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; SIZE; i++) &#123;</span><br><span class="line">    a[i] = b[i + <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>这段代码的特点是每次循环都涉及到对数组 <code>b</code> 的下一个元素的访问，这种“滑动窗口”类型的数据访问模式可能是阻碍向量化的原因。</p>
<h4 id="为什么汇编中没有使用向量寄存器？"><a href="#为什么汇编中没有使用向量寄存器？" class="headerlink" title="为什么汇编中没有使用向量寄存器？"></a><strong>为什么汇编中没有使用向量寄存器？</strong></h4><ol>
<li><p><strong>数据依赖性</strong>：</p>
<ul>
<li>在这个循环中，每个 <code>a[i]</code> 的计算依赖于 <code>b</code> 数组的连续元素 (<code>b[i+1]</code>)。这种数据依赖关系导致了数据访问的“依赖滞后”，这可能阻止编译器使用向量寄存器进行并行处理，因为向量化需要数据之间相对独立，以便同时处理多个数据。</li>
</ul>
</li>
<li><p><strong>内存对齐问题</strong>：</p>
<ul>
<li>对于有效的向量化，通常需要数据严格对齐到特定的字节界限（如16字节或32字节对齐）。在本例中，<code>b[i+1]</code> 的访问模式打破了可能的对齐界限，可能使得编译器难以应用标准的向量化策略。</li>
</ul>
</li>
<li><p><strong>向量化的复杂性</strong>：</p>
<ul>
<li>尽管现代编译器能够自动识别并向量化多种循环模式，但“滑动窗口”类型的操作增加了向量化的复杂性，特别是当窗口移动跨越多个数据块时。这可能需要更复杂的预取和数据重组策略，编译器可能认为标准的向量化不足以带来性能上的收益。</li>
</ul>
</li>
</ol>
<h4 id="如果进行了向量化，会更快吗？"><a href="#如果进行了向量化，会更快吗？" class="headerlink" title="如果进行了向量化，会更快吗？"></a><strong>如果进行了向量化，会更快吗？</strong></h4><ul>
<li><p><strong>潜在的速度提升</strong>：</p>
<ul>
<li>如果能够有效地向量化这种类型的循环，理论上可以提高执行速度，因为向量化可以利用现代CPU的SIMD（单指令多数据）能力，同时处理多个数组元素，显著减少总的处理时间。</li>
</ul>
</li>
<li><p><strong>实际的向量化挑战</strong>：</p>
<ul>
<li>实现这种类型的向量化可能需要手动干预或使用特定的编译器指令，例如通过使用内置函数重新安排数据或显式地使用SIMD指令集编程。</li>
<li>同时，需要考虑数据的预取和重组，以确保内存访问的连续性和对齐，这些都可能增加实现的复杂度。</li>
</ul>
</li>
</ul>
<p>总结来说，尽管向量化这类循环在理论上可能提高性能，但实际上实现向量化可能需要克服数据依赖和对齐等技术障碍。在这种情况下，编译器可能决定不进行向量化，因为它可能无法保证向量化后的性能收益足以抵消实现的复杂性。如果确实需要优化这种循环，可能需要更深入地探索编译器的向量化选项或手动优化代码。</p>
<h2 id="Write-up-5-检查汇编并验证是否正确向量化"><a href="#Write-up-5-检查汇编并验证是否正确向量化" class="headerlink" title="Write-up 5: 检查汇编并验证是否正确向量化"></a>Write-up 5: 检查汇编并验证是否正确向量化</h2><p>在示例4中，首先使用不带 <code>-ffast-math</code> 标志的编译指令编译 <code>test</code> 函数，这是一个简单的累加浮点数组的循环。初次编译结果显示，代码没有被向量化，并且使用了 <code>addsd</code> 指令，这是单个双精度浮点数的标量加法指令。</p>
<h4 id="未向量化的原因："><a href="#未向量化的原因：" class="headerlink" title="未向量化的原因："></a><strong>未向量化的原因：</strong></h4><p>浮点加法具有一些特殊性，特别是涉及到浮点数的关联性和可交换性时。由于浮点数计算的特殊规则（如IEEE浮点标准中的舍入模式和对特殊值的处理），编译器默认情况下不会假设浮点加法操作是关联的。这意味着编译器不会自动重组这些操作以利用SIMD指令，因为这可能改变计算结果。</p>
<h4 id="使用-ffast-math-的影响："><a href="#使用-ffast-math-的影响：" class="headerlink" title="使用 -ffast-math 的影响："></a><strong>使用 <code>-ffast-math</code> 的影响：</strong></h4><p>添加 <code>-ffast-math</code> 编译标志可以放宽对浮点数精确行为的限制，允许编译器假设加法是关联的并可以重排序操作。这样，编译器可以自由地使用SIMD指令来加速计算，因为它不需要严格遵守IEEE浮点标准的所有规则。</p>
<p>重新编译后，看到汇编代码中出现了如 <code>addpd</code> 或 <code>vaddpd</code> 等向量化指令，这些指令可以同时处理多个浮点数，提高了代码的执行效率。</p>
<h4 id="使用和不使用-ffast-math-的比较："><a href="#使用和不使用-ffast-math-的比较：" class="headerlink" title="使用和不使用 -ffast-math 的比较："></a><strong>使用和不使用 <code>-ffast-math</code> 的比较：</strong></h4><p>运行编译后的程序时，注意到使用和不使用 <code>-ffast-math</code> 标志的输出结果可能有细微差别。这些差别通常源于浮点计算的不同舍入行为和精确度要求的放宽。</p>
<ul>
<li><p>**使用 <code>-ffast-math</code>**：会产生更快的执行时间，因为编译器可以使用SIMD优化。结果与严格按照IEEE标准执行的结果略有不同，因为发生了计算顺序的改变或是舍入行为的变化。</p>
</li>
<li><p>**不使用 <code>-ffast-math</code>**：执行更慢，但结果会严格遵守IEEE浮点标凈，对于需要高度数值精确的应用来说，这是必须的。</p>
</li>
</ul>
<h4 id="结论："><a href="#结论：" class="headerlink" title="结论："></a><strong>结论：</strong></h4><p>在决定是否使用 <code>-ffast-math</code> 时，需要权衡性能提升和数值精确度之间的关系。对于对性能要求极高但对精确度要求不是非常严格的应用，启用 <code>-ffast-math</code> 是有益的。然而，对于科学计算和精确金融计算等领域，最好还是保持默认的严格浮点行为，以保证结果的准确性。</p>
<h2 id="Write-up-6-向量化代码与非向量化代码的性能比较及使用-mavx2-的影响"><a href="#Write-up-6-向量化代码与非向量化代码的性能比较及使用-mavx2-的影响" class="headerlink" title="Write-up 6: 向量化代码与非向量化代码的性能比较及使用 -mavx2 的影响"></a>Write-up 6: 向量化代码与非向量化代码的性能比较及使用 <code>-mavx2</code> 的影响</h2><h4 id="性能提升的测量"><a href="#性能提升的测量" class="headerlink" title="性能提升的测量"></a><strong>性能提升的测量</strong></h4><p>要了解向量化带来的性能提升，可以通过对比向量化前后的执行时间来衡量。在实验中，通过在AWS的特定环境下运行 <code>loop</code> 程序，并使用不同的编译标志来激活或关闭向量化，可以得到关于向量化效果的直观认识。</p>
<ol>
<li><p><strong>编译并运行向量化与非向量化的代码</strong>：</p>
<ul>
<li>使用 <code>make clean; make</code> 编译并运行基础代码以获取未向量化的执行时间。</li>
<li>使用 <code>make clean; make VECTORIZE=1</code> 编译并运行向量化代码，使用 <code>-mavx</code> 标志。</li>
<li>使用 <code>make clean; make VECTORIZE=1 AVX2=1</code> 再次编译并运行，这次使用 <code>-mavx2</code> 标志以启用AVX2指令集，这提供了更大的向量寄存器。</li>
</ul>
</li>
<li><p><strong>测量并记录执行时间</strong>：</p>
<ul>
<li>在每种情况下，记录程序的执行时间。需要多次运行以获取更稳定的结果，并取中位数作为最终结果。</li>
</ul>
</li>
</ol>
<h4 id="性能提升分析"><a href="#性能提升分析" class="headerlink" title="性能提升分析"></a><strong>性能提升分析</strong></h4><ul>
<li><p>**基础向量化 (<code>-mavx</code>)**：</p>
<ul>
<li>向量化通常可以显著提高数据并行循环的执行速度。对于简单的数组操作，如数组加法，使用基础的AVX指令集向量化已经提供了显著的加速，2倍左右的性能提升。</li>
</ul>
</li>
<li><p>**进一步使用 <code>-mavx2</code>**：</p>
<ul>
<li>启用 <code>-mavx2</code> 后，因为AVX2支持更宽的向量操作（256位），所以会观察到进一步的性能提升。这表现为总体上更高的加速比，从2倍左右提高到3倍左右。</li>
</ul>
</li>
</ul>
<h4 id="推断AWS运行环境的向量寄存器宽度"><a href="#推断AWS运行环境的向量寄存器宽度" class="headerlink" title="推断AWS运行环境的向量寄存器宽度"></a><strong>推断AWS运行环境的向量寄存器宽度</strong></h4><ul>
<li><p><strong>默认向量寄存器宽度</strong>：</p>
<ul>
<li>如果未使用 <code>-mavx2</code> 标志时观察到了显著的加速，这暗示默认的向量寄存器是128位宽（标准AVX指令）。</li>
</ul>
</li>
<li><p><strong>AVX2向量寄存器宽度</strong>：</p>
<ul>
<li>使用 <code>-mavx2</code> 标志并观察到额外的性能提升，暗示AVX2向量寄存器宽度是256位。</li>
</ul>
</li>
</ul>
<h4 id="结论"><a href="#结论" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>这些实验显示，向量化能显著提高数据并行任务的性能，尤其是在使用现代指令集如AVX2时。进一步分析这些数据，可以了解默认的向量寄存器和AVX2寄存器的宽度及其对性能的具体影响。此外，了解和选择合适的编译器标志对于充分利用现代硬件的向量处理能力至关重要。</p>
<h2 id="Write-up-7-比较向量化开启与未开启时的汇编代码"><a href="#Write-up-7-比较向量化开启与未开启时的汇编代码" class="headerlink" title="Write-up 7: 比较向量化开启与未开启时的汇编代码"></a>Write-up 7: 比较向量化开启与未开启时的汇编代码</h2><p>为了深入了解代码的向量化表现，可以直接查看编译器生成的汇编代码。通过分析这些代码，可以明确看到哪些指令被用于执行向量化操作，以及这些操作是如何被优化的。</p>
<h4 id="步骤和方法"><a href="#步骤和方法" class="headerlink" title="步骤和方法"></a><strong>步骤和方法</strong></h4><ol>
<li><p><strong>生成汇编代码</strong>：</p>
<ul>
<li>使用 <code>make ASSEMBLE=1 VECTORIZE=1</code> 命令生成启用向量化的汇编代码。</li>
<li>使用 <code>make ASSEMBLE=1 VECTORIZE=0</code> 生成未启用向量化的汇编代码。</li>
</ul>
</li>
<li><p><strong>检查汇编代码</strong>：</p>
<ul>
<li>打开生成的 <code>loop.s</code> 文件，查找与向量化操作相关的指令。</li>
</ul>
</li>
<li><p><strong>向量化指令对比</strong>：</p>
<ul>
<li>在启用向量化的代码中，寻找负责向量加法操作的指令。</li>
<li>再次编译代码，这次使用 <code>AVX2=1</code> 标志，查找与此设置相关的向量加法指令。</li>
</ul>
</li>
</ol>
<h4 id="汇编指令的识别"><a href="#汇编指令的识别" class="headerlink" title="汇编指令的识别"></a><strong>汇编指令的识别</strong></h4><ul>
<li><p><strong>不启用AVX2时的向量加法指令</strong>（基于SSE2指令集）：</p>
<ul>
<li>通常使用 <code>addpd</code> 或 <code>addps</code> 指令进行双精度或单精度的向量加法。</li>
<li>示例指令：<code>addpd %xmm1, %xmm0</code></li>
<li>这指令将 <code>%xmm1</code> 寄存器中的数据加到 <code>%xmm0</code> 寄存器中的数据。</li>
</ul>
</li>
<li><p><strong>启用AVX2时的向量加法指令</strong>：</p>
<ul>
<li>在AVX2指令集中，可以使用 <code>vaddpd</code> 或 <code>vaddps</code> 指令进行更宽向量寄存器的加法操作。</li>
<li>示例指令：<code>vaddpd %ymm1, %ymm0, %ymm0</code></li>
<li>这指令将 <code>%ymm1</code> 中的数据与 <code>%ymm0</code> 中的数据相加，结果存回 <code>%ymm0</code>。</li>
</ul>
</li>
</ul>
<h4 id="性能和优化"><a href="#性能和优化" class="headerlink" title="性能和优化"></a><strong>性能和优化</strong></h4><ul>
<li><p><strong>分析向量化的效果</strong>：</p>
<ul>
<li>观察启用和未启用向量化时汇编代码的差异，特别是循环结构和操作的表示。</li>
<li>检查是否有额外的优化，如循环展开或特定的数据预取指令，这些在启用向量化时出现。</li>
</ul>
</li>
<li><p><strong>改善汇编代码的可读性</strong>：</p>
<ul>
<li>考虑在Makefile中移除 <code>-g</code> 和 <code>-gdwarf-3</code> 标志，以减少调试符号，使汇编代码更加简洁。</li>
<li>使用 <code>-fno-unroll-loops</code> 标志有助于更清晰地观察循环的向量化情况，因为这可以防止编译器自动展开循环。</li>
</ul>
</li>
</ul>
<h4 id="结论-1"><a href="#结论-1" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>通过比较不同编译标志下的汇编输出，可以具体了解编译器如何处理向量化指令，以及这些指令对程序性能的潜在影响。理解这些基础可以帮助开发者优化代码，并充分利用现代处理器的向量处理能力。</p>
<h2 id="Write-up-8-使用-OP-宏实验不同的运算符"><a href="#Write-up-8-使用-OP-宏实验不同的运算符" class="headerlink" title="Write-up 8: 使用 OP 宏实验不同的运算符"></a>Write-up 8: 使用 <strong>OP</strong> 宏实验不同的运算符</h2><p>在本实验中，通过更改数据并行循环中的运算符来测试不同类型的向量运算。在这个实验中，运算符由一个宏 <code>__OP__</code> 定义，能够轻松地更换使用的运算符，并观察其对向量化的影响。</p>
<h4 id="操作符的修改和初始化问题"><a href="#操作符的修改和初始化问题" class="headerlink" title="操作符的修改和初始化问题"></a><strong>操作符的修改和初始化问题</strong></h4><ol>
<li><strong>初始化问题</strong>：<ul>
<li>由于数组 B 被初始化为全零，使用 <code>/</code> 或 <code>%</code> 运算符时会导致除零错误。为解决这个问题，可以在初始化数组 B 时填充非零值，例如使用 <code>1</code> 来避免除零错误。</li>
</ul>
</li>
</ol>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; SIZE; i++) &#123;</span><br><span class="line">    b[i] = <span class="number">1</span>; <span class="comment">// 设置为非零值以避免除零错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ol start="2">
<li><strong>改变运算符</strong>：<ul>
<li>修改数据并行循环中使用的运算符，例如尝试使用加 (<code>+</code>), 减 (<code>-</code>), 乘 (<code>*</code>), 除 (<code>/</code>), 和位移 (<code>&lt;&lt;</code>, <code>&gt;&gt;</code>) 等运算。</li>
</ul>
</li>
</ol>
<h4 id="向量化的观察"><a href="#向量化的观察" class="headerlink" title="向量化的观察"></a><strong>向量化的观察</strong></h4><ul>
<li><strong>不同运算符的向量化表现</strong>：<ul>
<li>大多数基本算术运算（加、减、乘、除）都应该能够在启用 <code>VECTORIZE=1 AVX2=1</code> 时被成功向量化，因为现代向量处理单元支持这些操作的硬件实现。</li>
<li>对于位移运算符如 <code>&lt;&lt;</code> 或 <code>&gt;&gt;</code>，向量化可能更复杂，因为它们通常需要不同的硬件支持。</li>
</ul>
</li>
</ul>
<h4 id="汇编代码分析"><a href="#汇编代码分析" class="headerlink" title="汇编代码分析"></a><strong>汇编代码分析</strong></h4><ul>
<li><p><strong>VECTORIZE&#x3D;1 的位移运算</strong>：</p>
<ul>
<li>在只启用 <code>VECTORIZE=1</code> 时，编译器可能使用标准的向量位移指令（如 <code>pslld</code> 或 <code>psrlq</code> 等）处理整数数组的位移。</li>
<li>示例指令：<code>pslld xmm0, 1</code>（将 <code>xmm0</code> 寄存器中的值左移1位）。</li>
</ul>
</li>
<li><p><strong>VECTORIZE&#x3D;1 AVX2&#x3D;1 的位移运算</strong>：</p>
<ul>
<li>启用 <code>AVX2=1</code> 后，编译器可使用更宽的向量寄存器（如 <code>ymm</code>），并可能使用相应的AVX2位移指令（如 <code>vpslld ymm0, ymm1, imm8</code>）。</li>
<li>示例指令：<code>vpslld ymm0, ymm1, 1</code>（将 <code>ymm1</code> 寄存器中的值左移1位，并存入 <code>ymm0</code>）。</li>
</ul>
</li>
</ul>
<h4 id="结论-2"><a href="#结论-2" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>实验表明，大多数基本算术运算符可以成功向量化，而位移运算符的向量化可能取决于具体的编译器实现和目标硬件的支持。了解和选择合适的编译器标志和硬件指令集对充分利用向量处理能力至关重要。此外，适当的数组初始化也是避免运行时错误的关键。</p>
<h2 id="Write-up-9-比较不同数据类型对向量化性能的影响"><a href="#Write-up-9-比较不同数据类型对向量化性能的影响" class="headerlink" title="Write-up 9: 比较不同数据类型对向量化性能的影响"></a>Write-up 9: 比较不同数据类型对向量化性能的影响</h2><p>在本实验中，会探索改变数据类型对内存需求和向量包装能力的影响，特别是在使用加法运算符时，对比使用 <code>uint64_t</code>, <code>uint32_t</code>, <code>uint16_t</code>, 和 <code>uint8_t</code> 数据类型的向量化代码与非向量化代码之间的性能差异。</p>
<h4 id="实验设置"><a href="#实验设置" class="headerlink" title="实验设置"></a><strong>实验设置</strong></h4><ul>
<li><strong>数据类型更改</strong>：改变数组A、B、C的数据类型，分别从 <code>uint64_t</code> 到 <code>uint8_t</code>。</li>
<li><strong>运算符设置</strong>：设置运算符 <code>OP</code> 为加法 <code>+</code>。</li>
<li><strong>编译和运行</strong>：分别为每种数据类型编译和运行代码，一次不启用向量化，一次启用AVX2向量化。</li>
<li><strong>性能测量</strong>：记录每种情况下的执行时间，并计算向量化代码相对于非向量化代码的加速比。</li>
</ul>
<h4 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a><strong>性能分析</strong></h4><ol>
<li><p>**<code>uint64_t</code>**：</p>
<ul>
<li>非向量化代码表现较差，因为每次操作的数据量较大。</li>
<li>向量化代码（尤其是AVX2）显示出一定的加速，但由于寄存器宽度限制，每个寄存器只能包含较少的元素。</li>
</ul>
</li>
<li><p>**<code>uint32_t</code>**：</p>
<ul>
<li>这是较常见的选择，向量化可以较好地加速，因为一个256位的AVX2寄存器可以包含8个 <code>uint32_t</code> 元素。</li>
</ul>
</li>
<li><p>**<code>uint16_t</code>**：</p>
<ul>
<li>内存需求更小，每个向量寄存器可以包含更多元素（例如，16个元素），这导致更高的加速比。</li>
</ul>
</li>
<li><p>**<code>uint8_t</code>**：</p>
<ul>
<li>每个向量寄存器可以包含更多的元素（如32个），这提供最高的加速比，因为更多的操作可以并行执行。</li>
</ul>
</li>
</ol>
<h4 id="性能提升"><a href="#性能提升" class="headerlink" title="性能提升"></a><strong>性能提升</strong></h4><ul>
<li><p><strong>向量化代码相比于非向量化代码</strong>：</p>
<ul>
<li>对于所有数据类型，向量化通常都会带来性能提升。特别是当数据类型较小（如 <code>uint16_t</code> 和 <code>uint8_t</code>）时，加速比更为显著，因为可以在每个向量操作中处理更多元素。</li>
</ul>
</li>
<li><p><strong>AVX2向量化代码相比于非向量化代码</strong>：</p>
<ul>
<li>使用AVX2时，加速比通常会进一步提高，因为AVX2支持更宽的向量操作，可以一次处理更多的数据。</li>
</ul>
</li>
</ul>
<h4 id="结论-3"><a href="#结论-3" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>数据类型对于向量化的性能影响显著。选择较小的数据类型可以减少内存需求并增加向量寄存器中可以包装的元素数量，从而提高性能。在设计和优化向量化应用程序时，应仔细考虑数据类型的选择以最大化性能。</p>
<h2 id="Write-up-10-测试使用-uint64-t-和-uint8-t-类型的向量乘法性能"><a href="#Write-up-10-测试使用-uint64-t-和-uint8-t-类型的向量乘法性能" class="headerlink" title="Write-up 10: 测试使用 uint64_t 和 uint8_t 类型的向量乘法性能"></a>Write-up 10: 测试使用 <code>uint64_t</code> 和 <code>uint8_t</code> 类型的向量乘法性能</h2><p>在此实验中探索使用不同数据类型（特别是 <code>uint64_t</code> 和 <code>uint8_t</code>）对于向量化代码在执行乘法操作时的性能影响。乘法操作相对于加法需要更多的时钟周期，这会影响向量化带来的性能提升。</p>
<h4 id="实验设置-1"><a href="#实验设置-1" class="headerlink" title="实验设置"></a><strong>实验设置</strong></h4><ul>
<li><strong>数据类型</strong>：<code>uint64_t</code> 和 <code>uint8_t</code>。</li>
<li><strong>操作符</strong>：乘法 (<code>*</code>)。</li>
<li><strong>编译和测试</strong>：<ul>
<li>对于 <code>uint64_t</code> 和 <code>uint8_t</code>，分别编译并运行使用乘法的向量化和非向量化代码。</li>
<li>使用 <code>VECTORIZE=1</code> 和 <code>VECTORIZE=1 AVX2=1</code> 标志进行编译。</li>
</ul>
</li>
</ul>
<h4 id="性能分析-1"><a href="#性能分析-1" class="headerlink" title="性能分析"></a><strong>性能分析</strong></h4><ol>
<li><p><strong><code>uint64_t</code> 数据类型</strong>：</p>
<ul>
<li><strong>非向量化代码</strong>：执行较慢，因为每次操作处理的数据量较大，且乘法操作相对耗时。</li>
<li><strong>向量化代码</strong>（AVX2）：虽然向量化可以提供一定程度的加速，但由于 <code>uint64_t</code> 数据类型的元素宽度较大，每个向量寄存器能处理的元素数量较少，限制了向量化的效益。</li>
</ul>
</li>
<li><p><strong><code>uint8_t</code> 数据类型</strong>：</p>
<ul>
<li><strong>非向量化代码</strong>：相对较慢，但由于处理的数据单元较小，所需的时钟周期较少。</li>
<li><strong>向量化代码</strong>（AVX2）：由于 <code>uint8_t</code> 类型允许单个向量寄存器包含更多元素（例如AVX2的32个元素），向量化提供了显著的加速。这种情况下，向量化乘法可以极大提升性能，因为可以同时处理更多的数据。</li>
</ul>
</li>
</ol>
<h4 id="性能提升-1"><a href="#性能提升-1" class="headerlink" title="性能提升"></a><strong>性能提升</strong></h4><ul>
<li>对于 <code>uint64_t</code> 类型，向量化的性能提升相对有限，只有轻微的改善，1.5倍左右的加速。</li>
<li>对于 <code>uint8_t</code> 类型，由于可以在一个操作中处理更多元素，加速比会更高，达到了4倍左右。</li>
</ul>
<h4 id="结论-4"><a href="#结论-4" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>向量化在执行数据并行操作时能显著提高性能，特别是当操作单元较小时（如 <code>uint8_t</code>）。选择更小的数据类型可以增加向量寄存器中的元素数量，从而提高每次向量操作的效率。对于乘法这样的高成本操作，向量化的好处尤其明显。然而，对于较大的数据类型（如 <code>uint64_t</code>），尽管向量化能带来性能改善，其提升幅度有限，特别是当每个向量寄存器能处理的元素数量较少时。</p>
<h2 id="Write-up-11-分析使用-uint64-t-类型的AVX2向量化乘法与加法代码的性能"><a href="#Write-up-11-分析使用-uint64-t-类型的AVX2向量化乘法与加法代码的性能" class="headerlink" title="Write-up 11: 分析使用 uint64_t 类型的AVX2向量化乘法与加法代码的性能"></a>Write-up 11: 分析使用 <code>uint64_t</code> 类型的AVX2向量化乘法与加法代码的性能</h2><p>在这个实验中，使用 <code>awsrun perf record</code> 工具来收集使用 <code>uint64_t</code> 类型的AVX2向量化乘法操作的性能数据，然后通过 <code>aws-perf-report</code> 工具来分析哪些操作占用了最多的执行时间。比较乘法操作与加法操作在向量化环境中的性能差异。</p>
<h4 id="步骤和方法-1"><a href="#步骤和方法-1" class="headerlink" title="步骤和方法"></a><strong>步骤和方法</strong></h4><ol>
<li><p><strong>收集性能数据</strong>：</p>
<ul>
<li>对于乘法 (<code>*</code>) 操作，设置 <code>__OP__</code> 为乘法并使用 <code>awsrun perf record</code> 来执行程序，收集性能数据。</li>
<li>对于加法 (<code>+</code>) 操作，将 <code>__OP__</code> 改回加法并重复性能数据收集过程。</li>
</ul>
</li>
<li><p><strong>分析性能报告</strong>：</p>
<ul>
<li>使用 <code>aws-perf-report</code> 来分析收集到的性能数据，特别注意向量乘法与向量加法指令的执行时间占比。</li>
</ul>
</li>
</ol>
<h4 id="性能分析-2"><a href="#性能分析-2" class="headerlink" title="性能分析"></a><strong>性能分析</strong></h4><ul>
<li><p><strong>向量乘法 (<code>*</code>) 性能分析</strong>：</p>
<ul>
<li>向量化的乘法操作会消耗较多的CPU时间，因为向量乘法相对于加法需要更多的时钟周期。</li>
<li>检查性能报告，观察是否有大量时间被消耗在 <code>vpmulld</code>（向量乘法）或其他相关向量乘法指令上。</li>
</ul>
</li>
<li><p><strong>向量加法 (<code>+</code>) 性能分析</strong>：</p>
<ul>
<li>向量加法操作通常需要较少的时钟周期，因此相比于向量乘法，其在性能报告中占用的时间比例较低。</li>
<li>分析性能报告，确认向量加法指令如 <code>vpadd</code> 在总执行时间中的占比。</li>
</ul>
</li>
</ul>
<h4 id="实验结果和结论"><a href="#实验结果和结论" class="headerlink" title="实验结果和结论"></a><strong>实验结果和结论</strong></h4><ul>
<li><p><strong>向量乘法的时间占比</strong>：</p>
<ul>
<li>如果发现向量乘法操作并没有占用大部分时间，可能的原因包括内存访问延迟或数据依赖导致的CPU空闲等。</li>
<li>分析是否有其他系统层面的操作（如内存加载）消耗了大量时间，这可能影响了整体的性能表现。</li>
</ul>
</li>
<li><p><strong>向量加法的时间占比</strong>：</p>
<ul>
<li>比较向量加法与乘法的性能数据，通常应观察到加法操作在性能报告中占用的时间比例较低，因为加法操作更快。</li>
</ul>
</li>
<li><p><strong>性能优化的见解</strong>：</p>
<ul>
<li>这种比较有助于理解不同向量操作的性能影响，为优化提供方向，尤其是在处理涉及复杂数据操作的应用时。</li>
<li>如果乘法操作占用过多时间，考虑优化算法或调整数据结构和访问模式，以减少性能瓶颈。</li>
</ul>
</li>
</ul>
<p>这项分析能够揭示在使用高级向量扩展时，不同算术操作在性能上的实际差异，从而为进一步的性能优化提供依据。</p>
<h2 id="Write-up-12-对于运行时确定的循环边界的向量化性能分析"><a href="#Write-up-12-对于运行时确定的循环边界的向量化性能分析" class="headerlink" title="Write-up 12: 对于运行时确定的循环边界的向量化性能分析"></a>Write-up 12: 对于运行时确定的循环边界的向量化性能分析</h2><p>在之前的实验中，循环的界限 <code>N</code> 是预先定义为1024的固定值，这使得编译器能够在编译时进行优化。改为在运行时通过命令行参数设置 <code>N</code>，将增加编译器处理向量化的复杂性，因为它不能再做出关于循环迭代次数的静态假设。</p>
<h4 id="实验设置-2"><a href="#实验设置-2" class="headerlink" title="实验设置"></a><strong>实验设置</strong></h4><ul>
<li><strong>修改代码</strong>：将循环界限 <code>N</code> 的定义改为运行时决定：<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> &#123;</span><br><span class="line">    <span class="type">int</span> N = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
<li><strong>编译和运行</strong>：对不同的 <code>N</code> 值（例如256, 512, 1024, 2048等）分别进行非向量化、AVX2向量化和非AVX2向量化的编译和测试。</li>
</ul>
<h4 id="性能分析-3"><a href="#性能分析-3" class="headerlink" title="性能分析"></a><strong>性能分析</strong></h4><ul>
<li><p><strong>向量化与非向量化的比较</strong>：</p>
<ul>
<li>对于较小的 <code>N</code> 值，向量化代码不会显著优于非向量化代码，因为启动和管理向量操作的开销占据了较大比例。</li>
<li>随着 <code>N</code> 值的增加，向量化代码的性能优势应该更加明显，因为长循环更能够利用向量处理的并行性。</li>
</ul>
</li>
<li><p><strong>AVX2与非AVX2向量化的比较</strong>：</p>
<ul>
<li>使用AVX2指令集的向量化代码应该在所有 <code>N</code> 值下都显示出比普通向量化更好的性能，尤其是在 <code>N</code> 较大时，因为AVX2支持更宽的向量操作，可以处理更多数据。</li>
</ul>
</li>
</ul>
<h4 id="性能变化与-N-1024-的比较"><a href="#性能变化与-N-1024-的比较" class="headerlink" title="性能变化与 N = 1024 的比较"></a><strong>性能变化与 <code>N = 1024</code> 的比较</strong></h4><ul>
<li>当 <code>N</code> 较小（如256或以下）时，相对于 <code>N = 1024</code>，向量化带来的性能提升不那么显著。这是因为向量化的启动和管理成本在小规模数据上的相对影响更大。</li>
<li>当 <code>N</code> 较大（如2048或以上）时，向量化代码的性能提升应该比 <code>N = 1024</code> 时更加明显，因为较长的循环能更好地利用处理器的向量化能力，减少了相对开销。</li>
</ul>
<h4 id="结论-5"><a href="#结论-5" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>改变 <code>N</code> 的定义使其在运行时确定，表明了编译器在处理不确定循环边界时的行为。虽然向量化在大多数情况下都能提供性能提升，但其效果受到循环长度的影响。实验结果显示，当循环边界较大时，向量化（尤其是使用AVX2）带来的性能提升更为显著。这强调了在设计向量化代码时，考虑数据规模和选择合适的编译器优化标志的重要性。</p>
<h2 id="Write-up-13-探索步长不为1时的向量化情况"><a href="#Write-up-13-探索步长不为1时的向量化情况" class="headerlink" title="Write-up 13: 探索步长不为1时的向量化情况"></a>Write-up 13: 探索步长不为1时的向量化情况</h2><p>在此实验中，调整数组遍历的步长（stride），并观察编译器是否能够向量化这样的循环。步长不为1意味着每次迭代跳过一个或多个元素，这可能影响编译器的向量化决策。</p>
<h4 id="实验设置-3"><a href="#实验设置-3" class="headerlink" title="实验设置"></a><strong>实验设置</strong></h4><ul>
<li><strong>数据类型和操作</strong>：设置 <code>__TYPE__</code> 为 <code>uint32_t</code>，<code>__OP__</code> 设置为加法 (<code>+</code>)。</li>
<li><strong>修改循环结构</strong>：将内部循环修改为步长为2的循环：<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; N; j += <span class="number">2</span>) &#123;</span><br><span class="line">    C[j] = A[j] + B[j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="编译和运行"><a href="#编译和运行" class="headerlink" title="编译和运行"></a><strong>编译和运行</strong></h4><ul>
<li>使用相应的编译标志进行编译，检查编译器是否能够向量化这种带有特定步长的循环。</li>
</ul>
<h4 id="向量化的观察与分析"><a href="#向量化的观察与分析" class="headerlink" title="向量化的观察与分析"></a><strong>向量化的观察与分析</strong></h4><ul>
<li><p><strong>编译器的向量化决策</strong>：</p>
<ul>
<li>对于步长为2的循环，编译器不会选择向量化。这是因为非连续的内存访问模式降低了数据的局部性，从而影响了向量化的效率。</li>
<li>向量单位虽然可以支持不同的步长，但在步长增大时，需要额外的指令来处理间隔较大的元素加载，这导致性能不如步长为1时优秀。</li>
</ul>
</li>
<li><p><strong>为什么可能不向量化</strong>：</p>
<ul>
<li><strong>内存访问效率</strong>：步长为2可能导致内存访问不连续，使得处理器缓存利用率下降，进而影响性能。</li>
<li><strong>复杂度增加</strong>：处理不连续数据需要额外的逻辑和指令，如间隔加载和额外的数据对齐处理，增加了编译器的实现复杂度。</li>
<li><strong>硬件优化限制</strong>：尽管现代硬件支持多种步长，但对于较大的步长，硬件加速可能不如连续访问显著。</li>
</ul>
</li>
</ul>
<h4 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a><strong>实验结果</strong></h4><ul>
<li>在实际测试中，发现即使硬件和编译器支持向量化步长不为1的循环，性能提升也不如连续访问的情况显著。这一结果应通过检查生成的汇编代码中是否包含向量指令以及这些指令的性能指标来确认。</li>
</ul>
<h4 id="结论-6"><a href="#结论-6" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>调整循环的步长可以是一个重要的性能优化方向，尤其是在处理步长非1的数据访问模式时。然而，开发者需要仔细考虑步长变化对向量化的可能影响，并通过实验验证预期的优化效果。如果向量化未带来预期的性能提升，可能需要探索其他优化策略或调整算法结构以适应硬件的特性。</p>
<h2 id="Write-up-14-使用-pragma-clang-loop-指令优化向量化"><a href="#Write-up-14-使用-pragma-clang-loop-指令优化向量化" class="headerlink" title="Write-up 14: 使用 #pragma clang loop 指令优化向量化"></a>Write-up 14: 使用 <code>#pragma clang loop</code> 指令优化向量化</h2><p>为了强制编译器向量化一个步长不为1的循环，用 <code>#pragma clang loop</code> 指令，这是 Clang 提供的一种语言扩展，用于控制循环的优化。这允许开发者对编译器的循环优化行为进行更细致的控制，尤其是在向量化方面。</p>
<h4 id="实验设置-4"><a href="#实验设置-4" class="headerlink" title="实验设置"></a><strong>实验设置</strong></h4><ul>
<li><p><strong>修改代码</strong>：在步长为2的循环前添加 <code>#pragma clang loop vectorize(enable)</code> 来尝试强制向量化该循环。</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> clang loop vectorize(enable)</span></span><br><span class="line"><span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; N; j += <span class="number">2</span>) &#123;</span><br><span class="line">    C[j] = A[j] + B[j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>编译与测试</strong>：</p>
<ul>
<li>分别编译并运行未使用AVX2和使用AVX2的向量化代码，记录并比较执行时间。</li>
<li>尝试修改 <code>vectorize_width</code> 参数，比如设置为2，来看看对性能的影响。</li>
</ul>
</li>
</ul>
<h4 id="性能分析-4"><a href="#性能分析-4" class="headerlink" title="性能分析"></a><strong>性能分析</strong></h4><ul>
<li><p><strong>基本向量化测试</strong>：</p>
<ul>
<li>使用基本的 <code>#pragma clang loop vectorize(enable)</code> 指令会看到一定的性能提升，因为编译器被提示尽可能向量化该循环。</li>
</ul>
</li>
<li><p>**修改 <code>vectorize_width</code>**：</p>
<ul>
<li>将 <code>vectorize_width</code> 设置为2会进一步影响性能，因为这指示编译器在向量化时使用更小的向量宽度。这对于步长为2的循环更为合适。</li>
</ul>
</li>
<li><p><strong>使用AVX2</strong>：</p>
<ul>
<li>启用AVX2向量化应该会看到更显著的性能提升，因为AVX2支持更宽的向量操作，可以更有效地处理数据。</li>
</ul>
</li>
</ul>
<h4 id="实验结果-1"><a href="#实验结果-1" class="headerlink" title="实验结果"></a><strong>实验结果</strong></h4><ul>
<li>在不同的 <code>vectorize_width</code> 和是否使用AVX2的条件下，性能提升会有所不同。通常，使用AVX2的向量化代码相比于非向量化代码会有更明显的加速。</li>
<li>如果适当调整 <code>vectorize_width</code>，比如设置为与数据访问模式更匹配的值，会进一步优化性能。</li>
</ul>
<h4 id="最佳配置"><a href="#最佳配置" class="headerlink" title="最佳配置"></a><strong>最佳配置</strong></h4><ul>
<li>最佳配置会根据具体的循环内容和数据访问模式而变化。在一些情况下，适当地使用 <code>#pragma clang loop</code> 指令并调整相关参数可以显著提高向量化代码的性能。</li>
</ul>
<h4 id="结论-7"><a href="#结论-7" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>通过使用 <code>#pragma clang loop</code> 指令，能够更精细地控制编译器的向量化行为，特别是在处理具有复杂访问模式的循环时。在合适的配置下，向量化代码相比于非向量化代码确实能够提供显著的性能提升。这种控制手段为性能优化提供了更多的可能性，尤其是在需要手动调整编译器行为以适应特定算法的情况下。</p>
<h2 id="Write-up-15-分析数组求和向量化的汇编实现"><a href="#Write-up-15-分析数组求和向量化的汇编实现" class="headerlink" title="Write-up 15: 分析数组求和向量化的汇编实现"></a>Write-up 15: 分析数组求和向量化的汇编实现</h2><p>在本实验中，通过汇编代码来理解编译器是如何向量化数组求和（reduction）操作的。向量化的求和操作对于理解数据归约在现代处理器上的效率至关重要。</p>
<h4 id="实验设置-5"><a href="#实验设置-5" class="headerlink" title="实验设置"></a><strong>实验设置</strong></h4><ul>
<li><p><strong>修改代码</strong>：实现一个简单的数组求和循环，确保该循环是向量化的重点。</p>
<div class="highlight-container" data-rel="C"><figure class="iseeu highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; N; j++) &#123;</span><br><span class="line">    total += A[j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>编译并生成汇编代码</strong>：</p>
<ul>
<li>使用 <code>make ASSEMBLE=1</code> 编译代码，以生成详细的汇编代码文件，从而能够详细查看向量化实现。</li>
</ul>
</li>
</ul>
<h4 id="汇编代码分析-1"><a href="#汇编代码分析-1" class="headerlink" title="汇编代码分析"></a><strong>汇编代码分析</strong></h4><ul>
<li><p><strong>向量化操作的实现</strong>：</p>
<ul>
<li>在生成的汇编代码中，编译器通常会使用如 <code>vpaddd</code>（向量化整数加法）等指令来实现数组的求和。</li>
<li>编译器会将数组元素加载到多个向量寄存器中，然后在这些寄存器上执行并行加法操作。</li>
</ul>
</li>
<li><p><strong>具体的汇编指令</strong>：</p>
<ul>
<li>例如，编译器使用 <code>movdqa</code> 指令加载数据到 SIMD 寄存器（如 <code>xmm0</code>），然后使用 <code>paddd xmm0, xmm1</code> 将两个寄存器中的数据相加，实现部分和的累加。</li>
<li>对于更高位宽的指令集（如AVX2），会看到使用 <code>vpaddd ymm0, ymm0, ymm1</code> 这样的指令，这可以同时处理更多数据。</li>
</ul>
</li>
<li><p><strong>循环尾部处理</strong>：</p>
<ul>
<li>在处理不完全填充向量寄存器的数据时，编译器还会生成处理循环尾部（即数组大小不是向量宽度整数倍部分）的代码。</li>
<li>这通常涉及到在循环结束时对剩余元素进行标量处理，以确保所有元素都被正确求和。</li>
</ul>
</li>
</ul>
<h4 id="性能优化的观察"><a href="#性能优化的观察" class="headerlink" title="性能优化的观察"></a><strong>性能优化的观察</strong></h4><ul>
<li><p><strong>归约操作的并行化</strong>：</p>
<ul>
<li>通过将多次独立的加法操作合并到单个向量指令中，归约操作的向量化显著提高了处理速度。</li>
<li>向量化归约减少了执行的指令数量，并提高了数据通过率。</li>
</ul>
</li>
<li><p><strong>编译器优化的限制</strong>：</p>
<ul>
<li>虽然向量化可以显著加快归约操作的速度，但编译器在实现这一过程时需要插入额外的逻辑来处理边界情况，这些逻辑会稍微影响性能。</li>
</ul>
</li>
</ul>
<h4 id="结论-8"><a href="#结论-8" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>汇编代码分析揭示了编译器如何有效地实现向量化数组求和操作。通过并行处理多个数组元素，向量化显著提高了性能。然而，为了完全理解和优化这类操作，开发者需要注意编译器如何处理向量化操作的细节，包括数据加载、并行执行和循环尾部处理。这些知识对于编写高效的向量化代码至关重要。</p>

        </div>

        
            <div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> MIT软件性能工程——Homework-3-Vectorization</li>
        <li><strong>Author:</strong> ELecmark</li>
        <li><strong>Created at
                :</strong> 2024-04-22 20:09:38</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2024-04-22 23:58:25
            </li>
        
        <li>
            <strong>Link:</strong> https://elecmark.github.io/2024/04/22/MIT软件性能工程——Homework-3-Vectorization/
        </li>
        <li>
            <strong>
                License:
            </strong>
            

            
                This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a>.
            
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/%E8%AF%BE%E7%A8%8B%E9%A1%B9%E7%9B%AE/">#课程项目</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/%E4%BD%9C%E4%B8%9A%E6%8A%A5%E5%91%8A/">#作业报告</a>&nbsp;
                    </li>
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B/">#软件性能工程</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
                
                    <div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="prev"
                        rel="prev"
                        href="/2024/04/29/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E4%B8%8E%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E5%AE%9E%E9%AA%8C%E4%B8%89-%E9%A2%91%E7%8E%87%E5%9F%9F%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">图像处理与分析——实验三-频率域图像增强</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="next"
                        rel="next"
                        href="/2024/04/15/OpenGL%E2%80%94%E2%80%94%E6%A8%A1%E6%8B%9F%E5%9C%B0%E6%9C%88%E7%B3%BB%E6%8A%80%E6%9C%AF%E6%8A%A5%E5%91%8A/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">OpenGL——模拟地月系技术报告</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
            <div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
                <div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        Comments
    </div>
    

        
            
    <div id="waline"></div>
    <script type="module" data-swup-reload-script>
      import { init } from '/js/libs/waline.mjs';

      function loadWaline() {
        init({
          el: '#waline',
          serverURL: 'https://example.example.com',
          lang: 'zh-CN',
          dark: 'body[class~="dark-mode"]',
          requiredMeta: ['nick', 'mail'],
          emoji: [],
          recaptchaV3Key: "wasd",
          
        });
      }

      if (typeof swup !== 'undefined') {
        loadWaline();
      } else {
        window.addEventListener('DOMContentLoaded', loadWaline);
      }
    </script>



        
    
</div>

            </div>
        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">MIT软件性能工程——Homework-3-Vectorization</div>
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A%E8%A6%81%E6%B1%82%EF%BC%9A"><span class="nav-text">作业要求：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up1-%E5%88%86%E6%9E%90%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81"><span class="nav-text">Write-up1: 分析汇编代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-2-%E4%BF%AE%E6%AD%A3%E4%BB%A3%E7%A0%81%E4%BB%A5%E4%BD%BF%E7%94%A8AVX2%E5%AF%84%E5%AD%98%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%AF%B9%E9%BD%90%E7%A7%BB%E5%8A%A8"><span class="nav-text">Write-up 2: 修正代码以使用AVX2寄存器进行对齐移动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-3-%E8%A7%A3%E9%87%8A%E7%BC%96%E8%AF%91%E5%99%A8%E7%94%9F%E6%88%90%E6%88%AA%E7%84%B6%E4%B8%8D%E5%90%8C%E7%9A%84%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="nav-text">Write-up 3: 解释编译器生成截然不同的汇编代码的原因</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-4-%E5%88%86%E6%9E%90%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8%E5%90%91%E9%87%8F%E5%AF%84%E5%AD%98%E5%99%A8%EF%BC%8C%E5%B9%B6%E6%8E%A2%E8%AE%A8%E5%90%91%E9%87%8F%E5%8C%96%E6%98%AF%E5%90%A6%E4%BC%9A%E6%9B%B4%E5%BF%AB"><span class="nav-text">Write-up 4: 分析为什么汇编代码没有使用向量寄存器，并探讨向量化是否会更快</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-5-%E6%A3%80%E6%9F%A5%E6%B1%87%E7%BC%96%E5%B9%B6%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE%E5%90%91%E9%87%8F%E5%8C%96"><span class="nav-text">Write-up 5: 检查汇编并验证是否正确向量化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-6-%E5%90%91%E9%87%8F%E5%8C%96%E4%BB%A3%E7%A0%81%E4%B8%8E%E9%9D%9E%E5%90%91%E9%87%8F%E5%8C%96%E4%BB%A3%E7%A0%81%E7%9A%84%E6%80%A7%E8%83%BD%E6%AF%94%E8%BE%83%E5%8F%8A%E4%BD%BF%E7%94%A8-mavx2-%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="nav-text">Write-up 6: 向量化代码与非向量化代码的性能比较及使用 -mavx2 的影响</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-7-%E6%AF%94%E8%BE%83%E5%90%91%E9%87%8F%E5%8C%96%E5%BC%80%E5%90%AF%E4%B8%8E%E6%9C%AA%E5%BC%80%E5%90%AF%E6%97%B6%E7%9A%84%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81"><span class="nav-text">Write-up 7: 比较向量化开启与未开启时的汇编代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-8-%E4%BD%BF%E7%94%A8-OP-%E5%AE%8F%E5%AE%9E%E9%AA%8C%E4%B8%8D%E5%90%8C%E7%9A%84%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">Write-up 8: 使用 OP 宏实验不同的运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-9-%E6%AF%94%E8%BE%83%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AF%B9%E5%90%91%E9%87%8F%E5%8C%96%E6%80%A7%E8%83%BD%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="nav-text">Write-up 9: 比较不同数据类型对向量化性能的影响</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-10-%E6%B5%8B%E8%AF%95%E4%BD%BF%E7%94%A8-uint64-t-%E5%92%8C-uint8-t-%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%90%91%E9%87%8F%E4%B9%98%E6%B3%95%E6%80%A7%E8%83%BD"><span class="nav-text">Write-up 10: 测试使用 uint64_t 和 uint8_t 类型的向量乘法性能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-11-%E5%88%86%E6%9E%90%E4%BD%BF%E7%94%A8-uint64-t-%E7%B1%BB%E5%9E%8B%E7%9A%84AVX2%E5%90%91%E9%87%8F%E5%8C%96%E4%B9%98%E6%B3%95%E4%B8%8E%E5%8A%A0%E6%B3%95%E4%BB%A3%E7%A0%81%E7%9A%84%E6%80%A7%E8%83%BD"><span class="nav-text">Write-up 11: 分析使用 uint64_t 类型的AVX2向量化乘法与加法代码的性能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-12-%E5%AF%B9%E4%BA%8E%E8%BF%90%E8%A1%8C%E6%97%B6%E7%A1%AE%E5%AE%9A%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%BE%B9%E7%95%8C%E7%9A%84%E5%90%91%E9%87%8F%E5%8C%96%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="nav-text">Write-up 12: 对于运行时确定的循环边界的向量化性能分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-13-%E6%8E%A2%E7%B4%A2%E6%AD%A5%E9%95%BF%E4%B8%8D%E4%B8%BA1%E6%97%B6%E7%9A%84%E5%90%91%E9%87%8F%E5%8C%96%E6%83%85%E5%86%B5"><span class="nav-text">Write-up 13: 探索步长不为1时的向量化情况</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-14-%E4%BD%BF%E7%94%A8-pragma-clang-loop-%E6%8C%87%E4%BB%A4%E4%BC%98%E5%8C%96%E5%90%91%E9%87%8F%E5%8C%96"><span class="nav-text">Write-up 14: 使用 #pragma clang loop 指令优化向量化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Write-up-15-%E5%88%86%E6%9E%90%E6%95%B0%E7%BB%84%E6%B1%82%E5%92%8C%E5%90%91%E9%87%8F%E5%8C%96%E7%9A%84%E6%B1%87%E7%BC%96%E5%AE%9E%E7%8E%B0"><span class="nav-text">Write-up 15: 分析数组求和向量化的汇编实现</span></a></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2023</span>
              -
            
            2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">ELecmark</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        21 posts in total
                    </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">VISITOR COUNT</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">TOTAL PAGE VIEWS</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.6.1</a></span>
        </div>
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>



    
<script src="/js/tools/localSearch.js" type="module"></script>




    
<script src="/js/tools/codeBlock.js" type="module"></script>




    
<script src="/js/layouts/lazyload.js" type="module"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>




    
<script src="/js/libs/mermaid.min.js"></script>

    
<script src="/js/plugins/mermaid.js"></script>







<div class="post-scripts" data-swup-reload-script>
    
        
<script src="/js/tools/tocToggle.js" type="module"></script>

<script src="/js/layouts/toc.js" type="module"></script>

<script src="/js/plugins/tabs.js" type="module"></script>

    
</div>


    <div id="aplayer"></div>

<script src="/js/libs/APlayer.min.js"></script>


<script src="/js/plugins/aplayer.js"></script>


</body>
</html>
