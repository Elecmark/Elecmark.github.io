<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="ELecmark">
    
    <!-- Completely eliminate flash of wrong theme -->
    <script>
        (function() {
            const THEME_KEY = "REDEFINE-THEME-STATUS";
            const DARK = "dark", LIGHT = "light";
            
            // Get preferred theme
            function getTheme() {
                try {
                    const saved = localStorage.getItem(THEME_KEY);
                    if (saved) {
                        const { isDark } = JSON.parse(saved);
                        return isDark ? DARK : LIGHT;
                    }
                } catch (e) {}
                
                return matchMedia("(prefers-color-scheme: dark)").matches ? DARK : LIGHT;
            }
            
            // Apply theme to document
            function applyTheme(theme) {
                const isDark = theme === DARK;
                const root = document.documentElement;
                
                // Set data attribute for CSS variables
                root.setAttribute("data-theme", theme);
                
                // Set classes for compatibility
                root.classList.add(theme);
                root.classList.remove(isDark ? LIGHT : DARK);
                root.style.colorScheme = theme;
            }
            
            // Initial application
            const theme = getTheme();
            applyTheme(theme);
            
            // Listen for system preference changes
            matchMedia("(prefers-color-scheme: dark)").addEventListener("change", ({ matches }) => {
                // Only update if using system preference (no localStorage entry)
                if (!localStorage.getItem(THEME_KEY)) {
                    applyTheme(matches ? DARK : LIGHT);
                }
            });
            
            // Set body classes once DOM is ready
            if (document.readyState !== "loading") {
                document.body.classList.add(theme + "-mode");
            } else {
                document.addEventListener("DOMContentLoaded", () => {
                    document.body.classList.add(theme + "-mode");
                    document.body.classList.remove((theme === DARK ? LIGHT : DARK) + "-mode");
                });
            }
        })();
    </script>
    
    <!-- Critical CSS to prevent flash -->
    <style>
        :root[data-theme="dark"] {
            --background-color: #202124;
            --background-color-transparent: rgba(32, 33, 36, 0.6);
            --second-background-color: #2d2e32;
            --third-background-color: #34353a;
            --third-background-color-transparent: rgba(32, 33, 36, 0.6);
            --primary-color: #0066CC;
            --first-text-color: #ffffff;
            --second-text-color: #eeeeee;
            --third-text-color: #bebec6;
            --fourth-text-color: #999999;
            --default-text-color: #bebec6;
            --invert-text-color: #373D3F;
            --border-color: rgba(255, 255, 255, 0.08);
            --selection-color: #0066CC;
            --shadow-color-1: rgba(255, 255, 255, 0.08);
            --shadow-color-2: rgba(255, 255, 255, 0.05);
        }
        
        :root[data-theme="light"] {
            --background-color: #fff;
            --background-color-transparent: rgba(255, 255, 255, 0.6);
            --second-background-color: #f8f8f8;
            --third-background-color: #f2f2f2;
            --third-background-color-transparent: rgba(241, 241, 241, 0.6);
            --primary-color: #0066CC;
            --first-text-color: #16171a;
            --second-text-color: #2f3037;
            --third-text-color: #5e5e5e;
            --fourth-text-color: #eeeeee;
            --default-text-color: #373D3F;
            --invert-text-color: #bebec6;
            --border-color: rgba(0, 0, 0, 0.08);
            --selection-color: #0066CC;
            --shadow-color-1: rgba(0, 0, 0, 0.08);
            --shadow-color-2: rgba(0, 0, 0, 0.05);
        }
        
        body {
            background-color: var(--background-color);
            color: var(--default-text-color);
        }
        
        /* Apply body classes as soon as DOM is ready */
        :root[data-theme="dark"] body {
            background-color: var(--background-color);
            color: var(--default-text-color);
        }
    </style>
    
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://Elecmark.github.io/2025/12/15/ue5源码-abilitysystemcomponent-h/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
        
        <meta name="description" content="Hexo Theme Redefine.">
<meta property="og:type" content="article">
<meta property="og:title" content="Unreal Engine——源码阅读:AbilitySystemComponent.h(UE5.4.4)">
<meta property="og:url" content="https://elecmark.github.io/2025/12/15/UE5%E6%BA%90%E7%A0%81-AbilitySystemComponent-h/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Hexo Theme Redefine.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://elecmark.github.io/images/pdh-logo.webp">
<meta property="article:published_time" content="2025-12-15T15:48:06.000Z">
<meta property="article:modified_time" content="2025-12-15T16:25:26.225Z">
<meta property="article:author" content="Elecmark">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="Unreal Engine">
<meta property="article:tag" content="GAS">
<meta property="article:tag" content="学习报告">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://elecmark.github.io/images/pdh-logo.webp">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/pdh-logo.webp" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/pdh-logo.webp">
    <meta name="theme-color" content="#80B5FF">
    <link rel="shortcut icon" href="/images/pdh-logo.webp">
    <!--- Page Info-->
    
    <title>
        
            Unreal Engine——源码阅读:AbilitySystemComponent.h(UE5.4.4) | Pu Dianheng&#39;s blog
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/css/build/tailwind.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
        <link href="" rel="stylesheet">
    
    
        <link href="" rel="stylesheet">
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"elecmark.github.io","root":"/","language":"en","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":["VIP"]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#80B5FF","secondary":"#004098","default_mode":"light"},"global":{"fonts":{"chinese":{"enable":true,"family":null,"url":null},"english":{"enable":true,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":true,"percentage":true},"website_counter":{"url":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":false,"custom_message":null},"side_tools":{"gear_rotation":true,"auto_expand":false},"open_graph":{"enable":true,"image":"/images/pdh-logo.webp","description":"Hexo Theme Redefine."},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wall.jpg","dark":"/images/wall_shenzhen.jpg"},"title":"Elecmark-Pu Dianheng","subtitle":{"text":["“Life is a bug, and you are the programmer.”","“Nothing is true, everything is permitted.” ——「刺客信条」","“Life endures, birth continue.” ——「艾尔登法环」","“Open your eyes.” —— 「塞尔达传说：荒野之息」","“直面天命。” —— 「黑神话：悟空」"],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn?c=c"},"typing_speed":50,"backing_speed":30,"starting_delay":100,"backing_delay":5000,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#FFFFF5"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/Elecmark","instagram":null,"zhihu":null,"twitter":null,"email":"944723112@qq.com","fa-solid fa-c fa-fw fa-lg":"https://blog.csdn.net/LanLinHui?type=blog","steam":"https://steamcommunity.com/profiles/76561198167581914/"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":true,"type":"fixed","audios":[{"name":"soundorbis - LIFE","artist":"Kyle Xian","url":"https://music.163.com/song/media/outer/url?id=516372224.mp3","cover":"http://p1.music.126.net/raSRxUrm3X7hhWiQV_HcJA==/109951163053574552.jpg","lrc":null},{"name":"Pokémon Sleep - Christmas","artist":"Pokémon Sleep","url":"https://music.163.com/song/media/outer/url?id=2130624871.mp3","cover":"https://p1.music.126.net/OtaKibk9x3UAg_tZMTfwtQ==/109951169173263539.jpg","lrc":null},{"name":"Guitar","artist":"Guitar","url":"/music/校园吉他纯音乐.mp3","cover":"/music/covers/music.svg","lrc":null}]},"mermaid":{"enable":true,"version":"11.4.1"}},"version":"2.8.5","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":25},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"作品集Portfolio":{"path":"/tags/作品集/","icon":"fa-regular fa-archive"},"关于About":{"icon":"fa-regular fa-user","submenus":{"我的信息Me":"/about","友链Friends":"/links","时间轴Timeline":"/archives"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":{"时间轴Timeline":{"path":"/archives","icon":"fa-solid fa-timeline"},"标签Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"分类Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":5},"tags":{"enable":true,"limit":3}},"footerStart":"2023/9/24 19:02:20"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 7.2.0"></head>



<body>
	<div class="progress-bar-container">
	
	<span class="scroll-progress-bar"></span>
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
                <a class="logo-image h-8 w-8 sm:w-10 sm:h-10 mr-3" href="/">
                    <img src="/images/pdh-logo.webp" class="w-full h-full rounded-xs">
                </a>
            
            <a class="logo-title" href="/">
                
                Pu Dianheng&#39;s blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    HOME
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags/%E4%BD%9C%E5%93%81%E9%9B%86/"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    作品集PORTFOLIO
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown"
                                   href="#"
                                        onClick=&#34;return false;&#34;>
                                    <i class="fa-regular fa-user fa-fw"></i>
                                    关于ABOUT
                                    <i class="fa-solid fa-chevron-down fa-fw"></i>
                                </a>

                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                        
                                            <li>
                                                <a href="/about">
                                                    我的信息ME
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a href="/links">
                                                    友链FRIENDS
                                                </a>
                                            </li>
                                        
                                            <li>
                                                <a href="/archives">
                                                    时间轴TIMELINE
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                HOME
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags/%E4%BD%9C%E5%93%81%E9%9B%86/"
                        >
                            <span>
                                作品集PORTFOLIO
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item-sub text-base my-1.5 flex flex-col w-full">
                        
                        <div class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary cursor-pointer text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                             navbar-data-toggle="submenu-关于About"
                        >
                            <span>
                                关于ABOUT
                            </span>
                            
                                <i class="fa-solid fa-chevron-right fa-sm fa-fw transition-all"></i>
                            
                        </div>
                        

                        
                            <div class="flex-col items-start px-2 py-2 hidden" data-target="submenu-关于About">
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/about">我的信息ME</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/links">友链FRIENDS</a>
                                    </div>
                                
                                    <div class="drawer-navbar-item text-base flex flex-col justify-center items-start hover:underline active:underline hover:underline-offset-1 rounded-3xl">
                                        <a class=" text-third-text-color text-xl"
                                           href="/archives">时间轴TIMELINE</a>
                                    </div>
                                
                            </div>
                        
                    </li>
            

            
            
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/archives"
                        >
                            <span>时间轴Timeline</span>
                            <i class="fa-solid fa-timeline fa-sm fa-fw"></i>
                        </a>
                    </li>
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/tags"
                        >
                            <span>标签Tags</span>
                            <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                        </a>
                    </li>
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/categories"
                        >
                            <span>分类Categories</span>
                            <i class="fa-regular fa-folder fa-sm fa-fw"></i>
                        </a>
                    </li>
                
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">30</div>
        <div class="label text-third-text-color text-sm">Tags</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">20</div>
        <div class="label text-third-text-color text-sm">Categories</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">30</div>
        <div class="label text-third-text-color text-sm">Posts</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			
			
			<img src="/../images/code.jpg" alt="Unreal Engine——源码阅读:AbilitySystemComponent.h(UE5.4.4)" class="w-full h-60 sm:h-72 md:h-80 object-cover sm:rounded-t-large dark:brightness-75" />
			
			<div class="w-full flex items-center absolute bottom-0 justify-start">
				<h1 class="article-title-cover text-center mx-6 my-6 text-second-text-color bg-background-color-transparent px-4 py-3 text-3xl sm:text-4xl md:text-5xl font-semibold backdrop-blur-lg rounded-xl border border-border-color ">Unreal Engine——源码阅读:AbilitySystemComponent.h(UE5.4.4)</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="/images/em-logo.png">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">ELecmark</span>
					
					<span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">VIP</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2025-12-15 23:48:06</span>
        <span class="mobile">2025-12-15 23:48:06</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-12-16 00:25:26</span>
            <span class="mobile">2025-12-16 00:25:26</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/">游戏开发</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/Unreal-Engine/">Unreal Engine</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/C/">C++</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Unreal-Engine/">Unreal Engine</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/GAS/">GAS</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/">学习报告</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<p>这是<strong>Unreal Engine 5的官方源码文件</strong>，来自GameplayAbilities模块的<code>AbilitySystemComponent.h</code>头文件, 是Gameplay Ability System（GAS）的核心组件，提供了管理游戏能力、效果和属性的完整框架：</p>
<div class="code-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 版权归Epic Games, Inc.所有。保留所有权利。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;UObject/ObjectMacros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Templates/SubclassOf.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/NetSerialization.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/EngineTypes.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/TimerHandle.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayTagContainer.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AttributeSet.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;EngineDefines.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayPrediction.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayCueInterface.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayTagAssetInterface.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayAbilitySpec.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayEffect.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayTasksComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Abilities/GameplayAbilityRepAnimMontage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Abilities/GameplayAbilityTargetTypes.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Abilities/GameplayAbility.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AbilitySystemReplicationProxyInterface.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Net/Core/PushModel/PushModel.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> UE_ENABLE_INCLUDE_ORDER_DEPRECATED_IN_5_2</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Abilities/GameplayAbilityTypes.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameplayEffectTypes.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AbilitySystemComponent.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AGameplayAbilityTargetActor</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AHUD</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FDebugDisplayInfo</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UAnimMontage</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UAnimSequenceBase</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UCanvas</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UInputComponent</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> *	UAbilitySystemComponent（技能系统组件）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *	一个用于轻松与技能系统三个主要方面交互的组件：</span></span><br><span class="line"><span class="comment"> *	</span></span><br><span class="line"><span class="comment"> *	游戏技能：</span></span><br><span class="line"><span class="comment"> *		-提供给予/分配可用能力的方式（例如玩家或AI使用）</span></span><br><span class="line"><span class="comment"> *		-提供实例化能力的管理（需要有对象持有它们）</span></span><br><span class="line"><span class="comment"> *		-提供复制功能</span></span><br><span class="line"><span class="comment"> *			-能力状态必须在UGameplayAbility本身上复制，但UAbilitySystemComponent为实际的能力激活提供RPC复制</span></span><br><span class="line"><span class="comment"> *			</span></span><br><span class="line"><span class="comment"> *	游戏效果：</span></span><br><span class="line"><span class="comment"> *		-提供FActiveGameplayEffectsContainer用于持有活跃的游戏效果</span></span><br><span class="line"><span class="comment"> *		-提供将游戏效果应用到目标或自身的方法</span></span><br><span class="line"><span class="comment"> *		-提供查询FActiveGameplayEffectsContainers中信息的包装器（持续时间、大小等）</span></span><br><span class="line"><span class="comment"> *		-提供清除/移除游戏效果的方法</span></span><br><span class="line"><span class="comment"> *		</span></span><br><span class="line"><span class="comment"> *	游戏属性</span></span><br><span class="line"><span class="comment"> *		-提供分配和初始化属性集的方法</span></span><br><span class="line"><span class="comment"> *		-提供获取AttributeSets的方法</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 当目标选择角色拒绝目标确认时调用 */</span></span><br><span class="line"><span class="built_in">DECLARE_MULTICAST_DELEGATE_OneParam</span>(FTargetingRejectedConfirmation, int32);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 当能力激活失败时调用，传递失败的能力和解释原因的标签 */</span></span><br><span class="line"><span class="built_in">DECLARE_MULTICAST_DELEGATE_TwoParams</span>(FAbilityFailedDelegate, <span class="type">const</span> UGameplayAbility*, <span class="type">const</span> FGameplayTagContainer&amp;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 当能力结束时调用 */</span></span><br><span class="line"><span class="built_in">DECLARE_MULTICAST_DELEGATE_OneParam</span>(FAbilityEnded, UGameplayAbility*);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 通知感兴趣方能力规格已被修改 */</span></span><br><span class="line"><span class="built_in">DECLARE_MULTICAST_DELEGATE_OneParam</span>(FAbilitySpecDirtied, <span class="type">const</span> FGameplayAbilitySpec&amp;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 当游戏效果规格被活跃游戏效果因免疫而阻止时通知 */</span></span><br><span class="line"><span class="built_in">DECLARE_MULTICAST_DELEGATE_TwoParams</span>(FImmunityBlockGE, <span class="type">const</span> FGameplayEffectSpec&amp; <span class="comment">/*被阻止的规格*/</span>, <span class="type">const</span> FActiveGameplayEffect* <span class="comment">/*免疫游戏效果*/</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 我们允许一系列委托来决定游戏效果的应用是否可以被阻止。如果被阻止，将调用上面的ImmunityBlockGE */</span></span><br><span class="line"><span class="built_in">DECLARE_DELEGATE_RetVal_TwoParams</span>(<span class="type">bool</span>, FGameplayEffectApplicationQuery, <span class="type">const</span> FActiveGameplayEffectsContainer&amp; <span class="comment">/*活跃GE容器*/</span>, <span class="type">const</span> FGameplayEffectSpec&amp; <span class="comment">/*待考虑的GE规格*/</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 游戏效果如何复制到客户端 */</span></span><br><span class="line"><span class="built_in">UENUM</span>()</span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">EGameplayEffectReplicationMode</span> : uint8</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/** 仅复制最少的游戏效果信息。注意：这不适用于拥有的技能系统组件（使用混合模式）。 */</span></span><br><span class="line">	Minimal,</span><br><span class="line">	<span class="comment">/** 仅向模拟代理复制最少的游戏效果信息，但向所有者和自主代理复制完整信息 */</span></span><br><span class="line">	Mixed,</span><br><span class="line">	<span class="comment">/** 向所有对象复制完整的游戏信息 */</span></span><br><span class="line">	Full,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 执行操作时（例如收集可激活能力），如何处理待处理项（例如尚未添加或移除的能力） */</span></span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">EConsiderPending</span> : uint8</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">/** 不考虑任何待处理操作（例如待添加或待移除的能力） */</span></span><br><span class="line">	None = <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 执行操作时考虑待添加项 */</span></span><br><span class="line">	PendingAdd = (<span class="number">1</span> &lt;&lt; <span class="number">0</span>),</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 执行操作时考虑待移除项 */</span></span><br><span class="line">	PendingRemove = (<span class="number">1</span> &lt;&lt; <span class="number">1</span>),</span><br><span class="line"></span><br><span class="line">	All = PendingAdd | PendingRemove</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">ENUM_CLASS_FLAGS</span>(EConsiderPending)</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 与游戏技能系统交互的核心ActorComponent */</span></span><br><span class="line"><span class="built_in">UCLASS</span>(ClassGroup=AbilitySystem, hidecategories=(Object,LOD,Lighting,Transform,Sockets,TextureStreaming), editinlinenew, meta=(BlueprintSpawnableComponent))</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GAMEPLAYABILITIES_API</span> UAbilitySystemComponent : <span class="keyword">public</span> UGameplayTasksComponent, <span class="keyword">public</span> IGameplayTagAssetInterface, <span class="keyword">public</span> IAbilitySystemReplicationProxyInterface</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">GENERATED_UCLASS_BODY</span>()</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 用于注册能力键输入的回调 */</span></span><br><span class="line">	<span class="built_in">DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam</span>(FAbilityAbilityKey, <span class="comment">/*UGameplayAbility*, Ability, */</span>int32, InputID);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 用于注册确认/取消输入的回调 */</span></span><br><span class="line">	<span class="built_in">DECLARE_DYNAMIC_MULTICAST_DELEGATE</span>(FAbilityConfirmOrCancel);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当效果被应用时的委托 */</span></span><br><span class="line">	<span class="built_in">DECLARE_MULTICAST_DELEGATE_ThreeParams</span>(FOnGameplayEffectAppliedDelegate, UAbilitySystemComponent*, <span class="type">const</span> FGameplayEffectSpec&amp;, FActiveGameplayEffectHandle);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	属性</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 查找现有的属性集 */</span></span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span> &gt;</span><br><span class="line">	<span class="function"><span class="type">const</span> T*	<span class="title">GetSet</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (T*)<span class="built_in">GetAttributeSubobject</span>(T::<span class="built_in">StaticClass</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 查找现有的属性集。如果不存在则断言。 */</span></span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span> &gt;</span><br><span class="line">	<span class="function"><span class="type">const</span> T*	<span class="title">GetSetChecked</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (T*)<span class="built_in">GetAttributeSubobjectChecked</span>(T::<span class="built_in">StaticClass</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 添加新的属性集（初始化为默认值） */</span></span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span> &gt;</span><br><span class="line">	<span class="function"><span class="type">const</span> T*  <span class="title">AddSet</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (T*)<span class="built_in">GetOrCreateAttributeSubobject</span>(T::<span class="built_in">StaticClass</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** </span></span><br><span class="line"><span class="comment">	 * 手动添加作为此技能系统组件子对象的新属性集。</span></span><br><span class="line"><span class="comment">	 * 初始化期间会自动添加此组件的所有子对象。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">	<span class="function"><span class="type">const</span> T* <span class="title">AddAttributeSetSubobject</span><span class="params">(T* Subobject)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">AddSpawnedAttribute</span>(Subobject);</span><br><span class="line">		<span class="keyword">return</span> Subobject;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 此技能系统组件是否拥有此属性？</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param Attribute	要检索目标标签的游戏效果句柄</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @return 如果Attribute有效且此技能系统组件包含包含Attribute的属性集，则返回true。否则返回false。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">HasAttributeSetForAttribute</span><span class="params">(FGameplayAttribute Attribute)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从数据表初始化起始属性。支持不佳，使用带有曲线表引用的游戏效果可能是更好的解决方案 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> UAttributeSet* <span class="title">InitStats</span><span class="params">(TSubclassOf&lt;<span class="keyword">class</span> UAttributeSet&gt; Attributes, <span class="type">const</span> UDataTable* DataTable)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category=<span class="string">&quot;Skills&quot;</span>, meta=(DisplayName=<span class="string">&quot;InitStats&quot;</span>, ScriptName=<span class="string">&quot;InitStats&quot;</span>))</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">K2_InitStats</span><span class="params">(TSubclassOf&lt;<span class="keyword">class</span> UAttributeSet&gt; Attributes, <span class="type">const</span> UDataTable* DataTable)</span></span>;</span><br><span class="line">		</span><br><span class="line">	<span class="comment">/** 返回此技能系统组件的所有属性列表 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintPure, Category=<span class="string">&quot;Gameplay Attributes&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">GetAllAttributes</span><span class="params">(TArray&lt;FGameplayAttribute&gt;&amp; OutAttributes)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 如果此组件中存在实例，则返回属性集实例的引用</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param AttributeSetClass 要查找的属性集类型</span></span><br><span class="line"><span class="comment">	 * @param bFound 如果属性集实例存在，则设置为true</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure = <span class="literal">false</span>, Category = <span class="string">&quot;Gameplay Attributes&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">const</span> UAttributeSet* <span class="title">GetAttributeSet</span><span class="params">(TSubclassOf&lt;UAttributeSet&gt; AttributeSetClass)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回给定游戏属性的当前值，如果未找到属性则返回零。</span></span><br><span class="line"><span class="comment">	 * 注意：这不会考虑预测的游戏效果修改器，因此客户端上的值可能不总是准确的。</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param Attribute 要查询的游戏属性</span></span><br><span class="line"><span class="comment">	 * @param bFound 如果此组件中存在该属性，则设置为true</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintPure, Category = <span class="string">&quot;Gameplay Attributes&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetGameplayAttributeValue</span><span class="params">(FGameplayAttribute Attribute, <span class="type">bool</span>&amp; bFound)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(EditAnywhere, Category=<span class="string">&quot;AttributeTest&quot;</span>)</span><br><span class="line">	TArray&lt;FAttributeDefaults&gt;	DefaultStartingData;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除所有当前属性集并注册传递的数组中的属性集。注意：可能时应直接调用添加/移除。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetSpawnedAttributes</span><span class="params">(<span class="type">const</span> TArray&lt;UAttributeSet*&gt;&amp; NewAttributeSet)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">5.1</span>, <span class="string">&quot;此函数将被设为私有。请使用添加/移除SpawnedAttributes代替&quot;</span>)</span><br><span class="line">	TArray&lt;TObjectPtr&lt;UAttributeSet&gt;&gt;&amp; <span class="built_in">GetSpawnedAttributes_Mutable</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 访问生成的属性列表，当您不打算修改列表时使用。 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> TArray&lt;UAttributeSet*&gt;&amp; <span class="title">GetSpawnedAttributes</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 添加新的属性集 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AddSpawnedAttribute</span><span class="params">(UAttributeSet* Attribute)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除现有的属性集 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveSpawnedAttribute</span><span class="params">(UAttributeSet* Attribute)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除所有属性集 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveAllSpawnedAttributes</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 此组件将播放蒙太奇的链接动画实例。使用NAME_None表示主动画实例。 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(BlueprintReadWrite, EditAnywhere, Category = <span class="string">&quot;Skills&quot;</span>)</span><br><span class="line">	FName AffectedAnimInstanceTag; </span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 设置属性的基础值。现有的活跃修改器不会被清除，并将作用于新的基础值。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetNumericAttributeBase</span><span class="params">(<span class="type">const</span> FGameplayAttribute &amp;Attribute, <span class="type">float</span> NewBaseValue)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取属性的基础值。即没有任何状态性修改器的属性值 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetNumericAttributeBase</span><span class="params">(<span class="type">const</span> FGameplayAttribute &amp;Attribute)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *	对给定属性应用原地修改。这会正确更新属性的聚合器，更新属性集属性，</span></span><br><span class="line"><span class="comment">	 *	并调用OnDirty回调。</span></span><br><span class="line"><span class="comment">	 *	这不会调用属性集上的Pre/PostGameplayEffectExecute。这不进行标签检查、应用要求、免疫等。</span></span><br><span class="line"><span class="comment">	 *	不会创建或应用GameplayEffectSpec！</span></span><br><span class="line"><span class="comment">	 *	这应仅在应用真实的GameplayEffectSpec太慢或不可能的情况下使用。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ApplyModToAttribute</span><span class="params">(<span class="type">const</span> FGameplayAttribute &amp;Attribute, TEnumAsByte&lt;EGameplayModOp::Type&gt; ModifierOp, <span class="type">float</span> ModifierMagnitude)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *  对给定属性应用原地修改。与ApplyModToAttribute不同，此函数将在客户端或服务器上运行。</span></span><br><span class="line"><span class="comment">	 *  这可能导致与预测相关的问题，并且无法正确回滚。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ApplyModToAttributeUnsafe</span><span class="params">(<span class="type">const</span> FGameplayAttribute &amp;Attribute, TEnumAsByte&lt;EGameplayModOp::Type&gt; ModifierOp, <span class="type">float</span> ModifierMagnitude)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回属性的当前（最终）值 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetNumericAttribute</span><span class="params">(<span class="type">const</span> FGameplayAttribute &amp;Attribute)</span> <span class="type">const</span></span>;</span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetNumericAttributeChecked</span><span class="params">(<span class="type">const</span> FGameplayAttribute &amp;Attribute)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回应用标签过滤器后的属性值 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetFilteredAttributeValue</span><span class="params">(<span class="type">const</span> FGameplayAttribute&amp; Attribute, <span class="type">const</span> FGameplayTagRequirements&amp; SourceTags, <span class="type">const</span> FGameplayTagContainer&amp; TargetTags, <span class="type">const</span> TArray&lt;FActiveGameplayEffectHandle&gt;&amp; HandlesToIgnore = TArray&lt;FActiveGameplayEffectHandle&gt;())</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	复制</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 强制头像Actor更新其复制。对于需要为移动/位置原因进行复制等情况很有用。 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ForceAvatarReplication</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当为true时，我们将不会为此技能系统组件复制活跃游戏效果，因此属性和标签 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetReplicationMode</span><span class="params">(EGameplayEffectReplicationMode NewReplicationMode)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 游戏效果如何被复制 */</span></span><br><span class="line">	EGameplayEffectReplicationMode ReplicationMode;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果启用ReplicationProxy，通过谁路由复制（如果返回null，当启用ReplicationProxy时，我们将不会复制） */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> IAbilitySystemReplicationProxyInterface* <span class="title">GetReplicationInterface</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当前预测键，使用FScopedPredictionWindow设置 */</span></span><br><span class="line">	FPredictionKey	ScopedPredictionKey;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回应用于任何操作的预测键 */</span></span><br><span class="line">	<span class="function">FPredictionKey <span class="title">GetPredictionKeyForNewAction</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ScopedPredictionKey.<span class="built_in">IsValidForMorePrediction</span>() ? ScopedPredictionKey : <span class="built_in">FPredictionKey</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 我们是否有有效的预测键来进行更多预测操作 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">CanPredict</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ScopedPredictionKey.<span class="built_in">IsValidForMorePrediction</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果这在服务器上运行或具有有效的预测键，则返回true */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">HasAuthorityOrPredictionKey</span><span class="params">(<span class="type">const</span> FGameplayAbilityActivationInfo* ActivationInfo)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果此组件的Actor具有权限，则返回true */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">IsOwnerActorAuthoritative</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果此组件应记录蒙太奇复制信息，则返回true */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">ShouldRecordMontageReplication</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 向客户端或服务器（视情况而定）复制能力已结束/取消 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ReplicateEndOrCancelAbility</span><span class="params">(FGameplayAbilitySpecHandle Handle, FGameplayAbilityActivationInfo ActivationInfo, UGameplayAbility* Ability, <span class="type">bool</span> bWasCanceled)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 强制取消能力且不向另一端复制此操作。当能力被另一端取消时应调用此函数 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ForceCancelAbilityDueToReplication</span><span class="params">(UGameplayAbility* Instance)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 无法立即激活的待处理激活，将在稍后时间点重新检查 */</span></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">FPendingAbilityInfo</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> FPendingAbilityInfo&amp; Other) <span class="type">const</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 不比较事件数据，不允许在具有相同键和句柄但不同事件数据的多个激活在飞行中</span></span><br><span class="line">			<span class="keyword">return</span> PredictionKey == Other.PredictionKey	&amp;&amp; Handle == Other.Handle;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** 需要激活的能力属性 */</span></span><br><span class="line">		FGameplayAbilitySpecHandle Handle;</span><br><span class="line">		FPredictionKey	PredictionKey;</span><br><span class="line">		FGameplayEventData TriggerEventData;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/** 如果此能力已在远程激活且需要跟进，则为true；如果能力尚未激活，则为false */</span></span><br><span class="line">		<span class="type">bool</span> bPartiallyActivated;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">FPendingAbilityInfo</span>()</span><br><span class="line">			: <span class="built_in">bPartiallyActivated</span>(<span class="literal">false</span>)</span><br><span class="line">		&#123;&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 这是在服务器上激活但尚不能在客户端执行的能力列表。它将在稍后时间点尝试执行这些操作 */</span></span><br><span class="line">	TArray&lt;FPendingAbilityInfo&gt; PendingServerActivatedAbilities;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	游戏效果：供其他系统使用的主要对外API</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将先前创建的游戏效果规格应用于目标 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects, meta = (DisplayName = <span class="string">&quot;ApplyGameplayEffectSpecToTarget&quot;</span>, ScriptName = <span class="string">&quot;ApplyGameplayEffectSpecToTarget&quot;</span>))</span><br><span class="line">	<span class="function">FActiveGameplayEffectHandle <span class="title">BP_ApplyGameplayEffectSpecToTarget</span><span class="params">(<span class="type">const</span> FGameplayEffectSpecHandle&amp; SpecHandle, UAbilitySystemComponent* Target)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> FActiveGameplayEffectHandle <span class="title">ApplyGameplayEffectSpecToTarget</span><span class="params">(<span class="type">const</span> FGameplayEffectSpec&amp; GameplayEffect, UAbilitySystemComponent *Target, FPredictionKey PredictionKey=FPredictionKey())</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将先前创建的游戏效果规格应用到此组件 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects, meta = (DisplayName = <span class="string">&quot;ApplyGameplayEffectSpecToSelf&quot;</span>, ScriptName = <span class="string">&quot;ApplyGameplayEffectSpecToSelf&quot;</span>))</span><br><span class="line">	<span class="function">FActiveGameplayEffectHandle <span class="title">BP_ApplyGameplayEffectSpecToSelf</span><span class="params">(<span class="type">const</span> FGameplayEffectSpecHandle&amp; SpecHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> FActiveGameplayEffectHandle <span class="title">ApplyGameplayEffectSpecToSelf</span><span class="params">(<span class="type">const</span> FGameplayEffectSpec&amp; GameplayEffect, FPredictionKey PredictionKey = FPredictionKey())</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 基于传入的句柄获取FActiveGameplayEffect */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> UGameplayEffect* <span class="title">GetGameplayEffectDefForHandle</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 通过句柄移除游戏效果。StacksToRemove=-1将移除所有堆栈。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">RemoveActiveGameplayEffect</span><span class="params">(FActiveGameplayEffectHandle Handle, int32 StacksToRemove=<span class="number">-1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** </span></span><br><span class="line"><span class="comment">	 * 移除其后端定义是特定游戏效果类的活跃游戏效果</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param GameplayEffect				要移除的游戏效果类；如果留空则不执行任何操作</span></span><br><span class="line"><span class="comment">	 * @param InstigatorAbilitySystemComponent	如果指定，将仅移除从此发起者技能系统组件应用的游戏效果</span></span><br><span class="line"><span class="comment">	 * @param StacksToRemove				要移除的堆栈数，-1表示移除所有</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">RemoveActiveGameplayEffectBySourceEffect</span><span class="params">(TSubclassOf&lt;UGameplayEffect&gt; GameplayEffect, UAbilitySystemComponent* InstigatorAbilitySystemComponent, int32 StacksToRemove = <span class="number">-1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取准备应用于其他对象的传出GameplayEffectSpec。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> FGameplayEffectSpecHandle <span class="title">MakeOutgoingSpec</span><span class="params">(TSubclassOf&lt;UGameplayEffect&gt; GameplayEffectClass, <span class="type">float</span> Level, FGameplayEffectContextHandle Context)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 为此AbilitySystemComponent的所有者创建EffectContext */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> FGameplayEffectContextHandle <span class="title">MakeEffectContext</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 获取技能系统组件上指定源效果的数量。对于非堆叠效果，这是所有活跃实例的总和。</span></span><br><span class="line"><span class="comment">	 * 对于堆叠效果，这是所有有效堆叠计数的总和。如果指定了发起者，则仅计算来自该发起者的效果。</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param SourceGameplayEffect				要计数的效果</span></span><br><span class="line"><span class="comment">	 * @param OptionalInstigatorFilterComponent	如果指定，仅计算由此技能系统组件应用的效果</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @return 指定源效果的计数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure, Category=GameplayEffects)</span><br><span class="line">	<span class="function">int32 <span class="title">GetGameplayEffectCount</span><span class="params">(TSubclassOf&lt;UGameplayEffect&gt; SourceGameplayEffect, UAbilitySystemComponent* OptionalInstigatorFilterComponent, <span class="type">bool</span> bEnforceOnGoingCheck = <span class="literal">true</span>)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 获取技能系统组件上指定源效果的数量。对于非堆叠效果，这是所有活跃实例的总和。</span></span><br><span class="line"><span class="comment">	 * 对于堆叠效果，这是所有有效堆叠计数的总和。如果指定了发起者，则仅计算来自该发起者的效果。</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param SoftSourceGameplayEffect			要计数的效果。如果当前未加载，则计数为0</span></span><br><span class="line"><span class="comment">	 * @param OptionalInstigatorFilterComponent	如果指定，仅计算由此技能系统组件应用的效果</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @return 指定源效果的计数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure, Category = GameplayEffects)</span><br><span class="line">	<span class="function">int32 <span class="title">GetGameplayEffectCount_IfLoaded</span><span class="params">(TSoftClassPtr&lt;UGameplayEffect&gt; SoftSourceGameplayEffect, UAbilitySystemComponent* OptionalInstigatorFilterComponent, <span class="type">bool</span> bEnforceOnGoingCheck = <span class="literal">true</span>)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回通过查询的所有游戏效果的StackCount总和 */</span></span><br><span class="line">	<span class="function">int32 <span class="title">GetAggregatedStackCount</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 此函数仅存在以便可以连接到多播委托 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveActiveGameplayEffect_NoReturn</span><span class="params">(FActiveGameplayEffectHandle Handle, int32 StacksToRemove=<span class="number">-1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">RemoveActiveGameplayEffect</span>(Handle, StacksToRemove);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 为预测添加的游戏提示调用。需要移除标签计数并在错误预测时可能调用OnRemove事件 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnPredictiveGameplayCueCatchup</span><span class="params">(FGameplayTag Tag)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回游戏效果的总持续时间 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetGameplayEffectDuration</span><span class="params">(FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 每当服务器时间通过游戏状态复制时调用，以保持我们的冷却计时器与服务器同步 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">RecomputeGameplayEffectStartTimes</span><span class="params">(<span class="type">const</span> <span class="type">float</span> WorldTime, <span class="type">const</span> <span class="type">float</span> ServerWorldTime)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回游戏效果的开始时间和总持续时间 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">GetGameplayEffectStartTimeAndDuration</span><span class="params">(FActiveGameplayEffectHandle Handle, <span class="type">float</span>&amp; StartEffectTime, <span class="type">float</span>&amp; Duration)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 动态更新活跃游戏效果的set-by-caller大小 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">UpdateActiveGameplayEffectSetByCallerMagnitude</span><span class="params">(FActiveGameplayEffectHandle ActiveHandle, UPARAM(meta=(Categories = <span class="string">&quot;SetByCaller&quot;</span>))FGameplayTag SetByCallerTag, <span class="type">float</span> NewValue)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 动态更新活跃游戏效果的多个set-by-caller大小 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">UpdateActiveGameplayEffectSetByCallerMagnitudes</span><span class="params">(FActiveGameplayEffectHandle ActiveHandle, <span class="type">const</span> TMap&lt;FGameplayTag, <span class="type">float</span>&gt;&amp; NewSetByCallerValues)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 更新已应用游戏效果的等级。意图是这是&#x27;无缝的&#x27;，不会像移除/重新应用那样行为 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetActiveGameplayEffectLevel</span><span class="params">(FActiveGameplayEffectHandle ActiveHandle, int32 NewLevel)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 更新已应用游戏效果的等级。意图是这是&#x27;无缝的&#x27;，不会像移除/重新应用那样行为 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetActiveGameplayEffectLevelUsingQuery</span><span class="params">(FGameplayEffectQuery Query, int32 NewLevel)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 抑制活跃游戏效果，使其被禁用但未被移除 */</span></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">5.4</span>, <span class="string">&quot;请使用SetActiveGameplayEffectInhibit并传递MoveTemp(ActiveGEHandle)，以便清楚地表明句柄不再有效。检查（然后使用）返回的FActiveGameplayEffectHandle以继续您的操作。&quot;</span>)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">InhibitActiveGameplayEffect</span><span class="params">(FActiveGameplayEffectHandle ActiveGEHandle, <span class="type">bool</span> bInhibit, <span class="type">bool</span> bInvokeGameplayCueEvents)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * （取消）抑制活跃游戏效果，使其可能被禁用（并执行一些禁用操作，例如移除标签）。</span></span><br><span class="line"><span class="comment">	 * 被抑制的活跃游戏效果将处于休眠状态，以便在某些条件下（通常是标签）重新启用。当它被取消抑制时，将重新应用其部分功能。</span></span><br><span class="line"><span class="comment">	 * 注意：传入的ActiveGEHandle不再有效。使用返回的FActiveGameplayEffectHandle确定活跃GE句柄是否仍然活跃。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> FActiveGameplayEffectHandle <span class="title">SetActiveGameplayEffectInhibit</span><span class="params">(FActiveGameplayEffectHandle&amp;&amp; ActiveGEHandle, <span class="type">bool</span> bInhibit, <span class="type">bool</span> bInvokeGameplayCueEvents)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 原始访问器，询问游戏效果的大小，不一定总是正确的。外部代码（UI等）应如何询问诸如&#x27;此游戏效果修改我的伤害多少&#x27;之类的问题</span></span><br><span class="line"><span class="comment">	 * （很可能我们希望在后台捕获这一点 - 当应用伤害时，我们可以获得数字如何达到当前状态的完整转储/历史。但我们仍然可能需要像下面这样的轮询方法（我的伤害会是多少）</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects)</span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetGameplayEffectMagnitude</span><span class="params">(FActiveGameplayEffectHandle Handle, FGameplayAttribute Attribute)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回已应用GE的当前堆叠计数 */</span></span><br><span class="line">	<span class="function">int32 <span class="title">GetCurrentStackCount</span><span class="params">(FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回已应用GE的当前堆叠计数，但给定由GE授予的能力规格句柄 */</span></span><br><span class="line">	<span class="function">int32 <span class="title">GetCurrentStackCount</span><span class="params">(FGameplayAbilitySpecHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回描述活跃游戏效果的调试字符串 */</span></span><br><span class="line">	<span class="function">FString <span class="title">GetActiveGEDebugString</span><span class="params">(FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取授予传入能力的GE句柄 */</span></span><br><span class="line">	<span class="function">FActiveGameplayEffectHandle <span class="title">FindActiveGameplayEffectHandle</span><span class="params">(FGameplayAbilitySpecHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回实际活跃游戏效果结构的常量指针 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> FActiveGameplayEffect* <span class="title">GetActiveGameplayEffect</span><span class="params">(<span class="type">const</span> FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回此ASC上的所有活跃游戏效果 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> FActiveGameplayEffectsContainer&amp; <span class="title">GetActiveGameplayEffects</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回与活跃句柄关联的游戏效果CDO的常量指针。 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> UGameplayEffect* <span class="title">GetGameplayEffectCDO</span><span class="params">(<span class="type">const</span> FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 如果可能，从指定句柄表示的游戏规格中获取源标签</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param Handle	要从中检索源标签的游戏效果句柄</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @return 如果可能，从句柄表示的游戏规格中获取的源标签</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> FGameplayTagContainer* <span class="title">GetGameplayEffectSourceTagsFromHandle</span><span class="params">(FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 如果可能，从指定句柄表示的游戏规格中获取目标标签</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param Handle	要从中检索目标标签的游戏效果句柄</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @return 如果可能，从句柄表示的游戏规格中获取的目标标签</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> FGameplayTagContainer* <span class="title">GetGameplayEffectTargetTagsFromHandle</span><span class="params">(FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 使用从组件捕获属性所需的数据填充指定的捕获规格</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param OutCaptureSpec	[输出] 用捕获数据填充的捕获规格</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CaptureAttributeForGameplayEffect</span><span class="params">(OUT FGameplayEffectAttributeCaptureSpec&amp; OutCaptureSpec)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//  回调/通知</span></span><br><span class="line">	<span class="comment">//  （这些需要在UObject级别，以便我们可以安全绑定，而不是绑定到ActiveGameplayEffect/Container级别的原始指针，这在AbilitySystemComponent被销毁时是不安全的）</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当特定属性聚合器值更改时调用，游戏效果在此发生时刷新其值 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnAttributeAggregatorDirty</span><span class="params">(FAggregator* Aggregator, FGameplayAttribute Attribute, <span class="type">bool</span> FromRecursiveCall=<span class="literal">false</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当属性大小更改时调用，以将信息转发给依赖的游戏效果 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnMagnitudeDependencyChange</span><span class="params">(FActiveGameplayEffectHandle Handle, <span class="type">const</span> FAggregator* ChangedAggregator)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 此ASC已成功将GE应用于某物（可能自身） */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnGameplayEffectAppliedToTarget</span><span class="params">(UAbilitySystemComponent* Target, <span class="type">const</span> FGameplayEffectSpec&amp; SpecApplied, FActiveGameplayEffectHandle ActiveHandle)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnGameplayEffectAppliedToSelf</span><span class="params">(UAbilitySystemComponent* Source, <span class="type">const</span> FGameplayEffectSpec&amp; SpecApplied, FActiveGameplayEffectHandle ActiveHandle)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnPeriodicGameplayEffectExecuteOnTarget</span><span class="params">(UAbilitySystemComponent* Target, <span class="type">const</span> FGameplayEffectSpec&amp; SpecExecuted, FActiveGameplayEffectHandle ActiveHandle)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnPeriodicGameplayEffectExecuteOnSelf</span><span class="params">(UAbilitySystemComponent* Source, <span class="type">const</span> FGameplayEffectSpec&amp; SpecExecuted, FActiveGameplayEffectHandle ActiveHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当游戏效果的持续时间更改时调用 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnGameplayEffectDurationChange</span><span class="params">(<span class="keyword">struct</span> FActiveGameplayEffect&amp; ActiveEffect)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 每当GE应用于自身时在服务器上调用。这包括即时和基于持续时间的GE。 */</span></span><br><span class="line">	FOnGameplayEffectAppliedDelegate OnGameplayEffectAppliedDelegateToSelf;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 每当GE应用于其他对象时在服务器上调用。这包括即时和基于持续时间的GE。 */</span></span><br><span class="line">	FOnGameplayEffectAppliedDelegate OnGameplayEffectAppliedDelegateToTarget;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 每当添加基于持续时间的GE时在客户端和服务器上调用（例如，即时GE不会触发此操作）。 */</span></span><br><span class="line">	FOnGameplayEffectAppliedDelegate OnActiveGameplayEffectAddedDelegateToSelf;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 每当周期性GE在自身上执行时在服务器上调用 */</span></span><br><span class="line">	FOnGameplayEffectAppliedDelegate OnPeriodicGameplayEffectExecuteDelegateOnSelf;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 每当周期性GE在目标上执行时在服务器上调用 */</span></span><br><span class="line">	FOnGameplayEffectAppliedDelegate OnPeriodicGameplayEffectExecuteDelegateOnTarget;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 免疫通知支持 */</span></span><br><span class="line">	FImmunityBlockGE OnImmunityBlockGameplayEffectDelegate;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 注册属性值更改时，应被GetGameplayAttributeValueChangeDelegate替换 */</span></span><br><span class="line">	<span class="function">FOnGameplayAttributeChange&amp; <span class="title">RegisterGameplayAttributeEvent</span><span class="params">(FGameplayAttribute Attribute)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 注册属性值更改时 */</span></span><br><span class="line">	<span class="function">FOnGameplayAttributeValueChange&amp; <span class="title">GetGameplayAttributeValueChangeDelegate</span><span class="params">(FGameplayAttribute Attribute)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 能力被激活（开始）时的通用回调 */</span></span><br><span class="line">	FGenericAbilityDelegate AbilityActivatedCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 能力结束时的回调 */</span></span><br><span class="line">	FAbilityEnded AbilityEndedCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 能力结束时的回调，带有额外信息 */</span></span><br><span class="line">	FGameplayAbilityEndedDelegate OnAbilityEnded;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 能力被提交（应用成本/冷却）时的通用回调 */</span></span><br><span class="line">	FGenericAbilityDelegate AbilityCommittedCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 能力激活失败时调用，带有失败原因 */</span></span><br><span class="line">	FAbilityFailedDelegate AbilityFailedCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 能力规格内部更改时调用 */</span></span><br><span class="line">	FAbilitySpecDirtied AbilitySpecDirtiedCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 我们允许用户设置一系列必须为true才能允许应用游戏效果的函数 */</span></span><br><span class="line">	TArray&lt;FGameplayEffectApplicationQuery&gt; GameplayEffectApplicationQueries;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 调用上面的通知回调 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NotifyAbilityCommit</span><span class="params">(UGameplayAbility* Ability)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NotifyAbilityActivated</span><span class="params">(<span class="type">const</span> FGameplayAbilitySpecHandle Handle, UGameplayAbility* Ability)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NotifyAbilityFailed</span><span class="params">(<span class="type">const</span> FGameplayAbilitySpecHandle Handle, UGameplayAbility* Ability, <span class="type">const</span> FGameplayTagContainer&amp; FailureReason)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当任何游戏效果被移除时调用 */</span></span><br><span class="line">	<span class="function">FOnGivenActiveGameplayEffectRemoved&amp; <span class="title">OnAnyGameplayEffectRemovedDelegate</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回允许绑定到多个游戏效果更改的委托结构 */</span></span><br><span class="line">	<span class="function">FActiveGameplayEffectEvents* <span class="title">GetActiveEffectEventSet</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line">	<span class="function">FOnActiveGameplayEffectRemoved_Info* <span class="title">OnGameplayEffectRemoved_InfoDelegate</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line">	<span class="function">FOnActiveGameplayEffectStackChange* <span class="title">OnGameplayEffectStackChangeDelegate</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line">	<span class="function">FOnActiveGameplayEffectTimeChange* <span class="title">OnGameplayEffectTimeChangeDelegate</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line">	<span class="function">FOnActiveGameplayEffectInhibitionChanged* <span class="title">OnGameplayEffectInhibitionChangedDelegate</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//  游戏标签操作</span></span><br><span class="line">	<span class="comment">//  使用TagCountContainer实现IGameplayTagAssetInterface</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">bool</span> <span class="title">HasMatchingGameplayTag</span><span class="params">(FGameplayTag TagToCheck)</span> <span class="type">const</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> GameplayTagCountContainer.<span class="built_in">HasMatchingGameplayTag</span>(TagToCheck);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">bool</span> <span class="title">HasAllMatchingGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; TagContainer)</span> <span class="type">const</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> GameplayTagCountContainer.<span class="built_in">HasAllMatchingGameplayTags</span>(TagContainer);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">bool</span> <span class="title">HasAnyMatchingGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; TagContainer)</span> <span class="type">const</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> GameplayTagCountContainer.<span class="built_in">HasAnyMatchingGameplayTags</span>(TagContainer);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">GetOwnedGameplayTags</span><span class="params">(FGameplayTagContainer&amp; TagContainer)</span> <span class="type">const</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		TagContainer.<span class="built_in">Reset</span>();</span><br><span class="line">		TagContainer.<span class="built_in">AppendTags</span>(<span class="built_in">GetOwnedGameplayTags</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	[[nodiscard]] <span class="function">FORCEINLINE <span class="type">const</span> FGameplayTagContainer&amp; <span class="title">GetOwnedGameplayTags</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> GameplayTagCountContainer.<span class="built_in">GetExplicitGameplayTags</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 检查查询是否与拥有的GameplayTags匹配 */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">bool</span> <span class="title">MatchesGameplayTagQuery</span><span class="params">(<span class="type">const</span> FGameplayTagQuery&amp; TagQuery)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> TagQuery.<span class="built_in">Matches</span>(GameplayTagCountContainer.<span class="built_in">GetExplicitGameplayTags</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回给定标签的实例数量 */</span></span><br><span class="line">	<span class="function">FORCEINLINE int32 <span class="title">GetTagCount</span><span class="params">(FGameplayTag TagToCheck)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> GameplayTagCountContainer.<span class="built_in">GetTagCount</span>(TagToCheck);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 强制设置给定标签的实例数量 */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">SetTagMapCount</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; Tag, int32 NewCount)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		GameplayTagCountContainer.<span class="built_in">SetTagCount</span>(Tag, NewCount);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 更新给定标签的实例数量并调用回调 */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">UpdateTagMap</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; BaseTag, int32 CountDelta)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (GameplayTagCountContainer.<span class="built_in">UpdateTagCount</span>(BaseTag, CountDelta))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">OnTagUpdated</span>(BaseTag, CountDelta &gt; <span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 更新给定标签的实例数量并调用回调 */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">UpdateTagMap</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; Container, int32 CountDelta)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (!Container.<span class="built_in">IsEmpty</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">UpdateTagMap_Internal</span>(Container, CountDelta);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 用BlockedAbilityTags填充TagContainer */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">GetBlockedAbilityTags</span><span class="params">(FGameplayTagContainer&amp; TagContainer)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		TagContainer.<span class="built_in">AppendTags</span>(<span class="built_in">GetBlockedAbilityTags</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	[[nodiscard]] <span class="function">FORCEINLINE <span class="type">const</span> FGameplayTagContainer&amp; <span class="title">GetBlockedAbilityTags</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> BlockedAbilityTags.<span class="built_in">GetExplicitGameplayTags</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 	 </span></span><br><span class="line"><span class="comment">	 *  允许游戏代码添加不受游戏效果支持的松散游戏标签。</span></span><br><span class="line"><span class="comment">	 *	以此方式添加的标签不会被复制！如果需要复制，请使用这些函数的&#x27;Replicated&#x27;版本。</span></span><br><span class="line"><span class="comment">	 *	由调用游戏代码确保这些标签在必要的客户端/服务器上添加</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">AddLooseGameplayTag</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag, int32 Count=<span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">UpdateTagMap</span>(GameplayTag, Count);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">AddLooseGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTags, int32 Count = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">UpdateTagMap</span>(GameplayTags, Count);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">RemoveLooseGameplayTag</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag, int32 Count = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">UpdateTagMap</span>(GameplayTag, -Count);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">RemoveLooseGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTags, int32 Count = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">UpdateTagMap</span>(GameplayTags, -Count);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">SetLooseGameplayTagCount</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag, int32 NewCount)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">SetTagMapCount</span>(GameplayTag, NewCount);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回给定游戏标签的当前计数。</span></span><br><span class="line"><span class="comment">	 * 这包括松散标签以及由游戏效果和能力授予的标签。</span></span><br><span class="line"><span class="comment">	 * 此函数可以在客户端上调用，但它可能不会显示服务器上的最新计数。</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param GameplayTag 要查询的游戏标签</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintPure, Category = <span class="string">&quot;Gameplay Tags&quot;</span>)</span><br><span class="line">	<span class="function">int32 <span class="title">GetGameplayTagCount</span><span class="params">(FGameplayTag GameplayTag)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *  允许游戏代码添加不受游戏效果支持的松散游戏标签。使用</span></span><br><span class="line"><span class="comment">	 *  这些函数添加的标签将被复制。注意：复制的松散标签将覆盖模拟代理上任何本地设置的标签计数</span></span><br><span class="line"><span class="comment">	 *  在模拟代理上的任何本地设置的标签计数。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">AddReplicatedLooseGameplayTag</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetReplicatedLooseTags_Mutable</span>().<span class="built_in">AddTag</span>(GameplayTag);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">AddReplicatedLooseGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTags)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetReplicatedLooseTags_Mutable</span>().<span class="built_in">AddTags</span>(GameplayTags);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">RemoveReplicatedLooseGameplayTag</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetReplicatedLooseTags_Mutable</span>().<span class="built_in">RemoveTag</span>(GameplayTag);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">RemoveReplicatedLooseGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTags)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetReplicatedLooseTags_Mutable</span>().<span class="built_in">RemoveTags</span>(GameplayTags);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">SetReplicatedLooseGameplayTagCount</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag, int32 NewCount)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetReplicatedLooseTags_Mutable</span>().<span class="built_in">SetTagCount</span>(GameplayTag, NewCount);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 	 </span></span><br><span class="line"><span class="comment">	 * 最小复制标签是在bMinimalReplication模式下从GE复制的标签。</span></span><br><span class="line"><span class="comment">	 * （GE不复制，但它们授予的标签通过这些函数复制）</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">AddMinimalReplicationGameplayTag</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetMinimalReplicationTags_Mutable</span>().<span class="built_in">AddTag</span>(GameplayTag);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">AddMinimalReplicationGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTags)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetMinimalReplicationTags_Mutable</span>().<span class="built_in">AddTags</span>(GameplayTags);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">RemoveMinimalReplicationGameplayTag</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; GameplayTag)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetMinimalReplicationTags_Mutable</span>().<span class="built_in">RemoveTag</span>(GameplayTag);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">FORCEINLINE <span class="type">void</span> <span class="title">RemoveMinimalReplicationGameplayTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTags)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetMinimalReplicationTags_Mutable</span>().<span class="built_in">RemoveTags</span>(GameplayTags);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 允许为特定游戏标签的添加或移除注册事件 */</span></span><br><span class="line">	<span class="function">FOnGameplayEffectTagCountChanged&amp; <span class="title">RegisterGameplayTagEvent</span><span class="params">(FGameplayTag Tag, EGameplayTagEventType::Type EventType=EGameplayTagEventType::NewOrRemoved)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消注册先前添加的事件 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">UnregisterGameplayTagEvent</span><span class="params">(FDelegateHandle DelegateHandle, FGameplayTag Tag, EGameplayTagEventType::Type EventType=EGameplayTagEventType::NewOrRemoved)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 注册标签事件并立即调用它 */</span></span><br><span class="line">	<span class="function">FDelegateHandle <span class="title">RegisterAndCallGameplayTagEvent</span><span class="params">(FGameplayTag Tag, FOnGameplayEffectTagCountChanged::FDelegate Delegate, EGameplayTagEventType::Type EventType=EGameplayTagEventType::NewOrRemoved)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回多播委托，每当标签被添加或移除时调用（但不仅计数增加时。仅适用于&#x27;new&#x27;和&#x27;removed&#x27;事件） */</span></span><br><span class="line">	<span class="function">FOnGameplayEffectTagCountChanged&amp; <span class="title">RegisterGenericGameplayTagEvent</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 执行游戏事件。返回由事件触发的成功能力激活数量 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> int32 <span class="title">HandleGameplayEvent</span><span class="params">(FGameplayTag EventTag, <span class="type">const</span> FGameplayEventData* Payload)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 添加新的委托以在游戏事件发生时调用。仅当匹配传递的过滤器容器中的任何标签时才会被调用 */</span></span><br><span class="line">	<span class="function">FDelegateHandle <span class="title">AddGameplayEventTagContainerDelegate</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; TagFilter, <span class="type">const</span> FGameplayEventTagMulticastDelegate::FDelegate&amp; Delegate)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除先前注册的委托 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveGameplayEventTagContainerDelegate</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; TagFilter, FDelegateHandle DelegateHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 绑定到游戏标签的回调，仅在使用确切标签时激活。要处理标签层次结构，请使用AddGameplayEventContainerDelegate */</span></span><br><span class="line">	TMap&lt;FGameplayTag, FGameplayEventMulticastDelegate&gt; GenericGameplayEventCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//  系统属性</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 修改此组件创建的游戏效果的持续时间的内部属性 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(meta=(SystemGameplayAttribute=<span class="string">&quot;true&quot;</span>))</span><br><span class="line">	<span class="type">float</span> OutgoingDuration;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 修改应用于此组件的游戏效果的持续时间的内部属性 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(meta = (SystemGameplayAttribute = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">	<span class="type">float</span> IncomingDuration;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">static</span> FProperty* <span class="title">GetOutgoingDurationProperty</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">static</span> FProperty* <span class="title">GetIncomingDurationProperty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">const</span> FGameplayEffectAttributeCaptureDefinition&amp; <span class="title">GetOutgoingDurationCapture</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">const</span> FGameplayEffectAttributeCaptureDefinition&amp; <span class="title">GetIncomingDurationCapture</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//  额外辅助函数</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将游戏效果应用于传入的目标 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects, meta=(DisplayName = <span class="string">&quot;ApplyGameplayEffectToTarget&quot;</span>, ScriptName = <span class="string">&quot;ApplyGameplayEffectToTarget&quot;</span>))</span><br><span class="line">	<span class="function">FActiveGameplayEffectHandle <span class="title">BP_ApplyGameplayEffectToTarget</span><span class="params">(TSubclassOf&lt;UGameplayEffect&gt; GameplayEffectClass, UAbilitySystemComponent *Target, <span class="type">float</span> Level, FGameplayEffectContextHandle Context)</span></span>;</span><br><span class="line">	<span class="function">FActiveGameplayEffectHandle <span class="title">ApplyGameplayEffectToTarget</span><span class="params">(UGameplayEffect *GameplayEffect, UAbilitySystemComponent *Target, <span class="type">float</span> Level = UGameplayEffect::INVALID_LEVEL, FGameplayEffectContextHandle Context = FGameplayEffectContextHandle(), FPredictionKey PredictionKey = FPredictionKey())</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将游戏效果应用于自身 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects, meta=(DisplayName = <span class="string">&quot;ApplyGameplayEffectToSelf&quot;</span>, ScriptName = <span class="string">&quot;ApplyGameplayEffectToSelf&quot;</span>))</span><br><span class="line">	<span class="function">FActiveGameplayEffectHandle <span class="title">BP_ApplyGameplayEffectToSelf</span><span class="params">(TSubclassOf&lt;UGameplayEffect&gt; GameplayEffectClass, <span class="type">float</span> Level, FGameplayEffectContextHandle EffectContext)</span></span>;</span><br><span class="line">	<span class="function">FActiveGameplayEffectHandle <span class="title">ApplyGameplayEffectToSelf</span><span class="params">(<span class="type">const</span> UGameplayEffect *GameplayEffect, <span class="type">float</span> Level, <span class="type">const</span> FGameplayEffectContextHandle&amp; EffectContext, FPredictionKey PredictionKey = FPredictionKey())</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回当前在此技能系统组件上活跃的游戏效果数量 */</span></span><br><span class="line">	<span class="function">int32 <span class="title">GetNumActiveGameplayEffects</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ActiveGameplayEffects.<span class="built_in">GetNumGameplayEffects</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 复制此能力组件上的所有活跃效果 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">GetAllActiveGameplayEffectSpecs</span><span class="params">(TArray&lt;FGameplayEffectSpec&gt;&amp; OutSpecCopies)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		ActiveGameplayEffects.<span class="built_in">GetAllActiveGameplayEffectSpecs</span>(OutSpecCopies);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 在OnRep函数中调用以在客户端上设置属性基础值 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetBaseAttributeValueFromReplication</span><span class="params">(<span class="type">const</span> FGameplayAttribute&amp; Attribute, <span class="type">float</span> NewValue, <span class="type">float</span> OldValue)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		ActiveGameplayEffects.<span class="built_in">SetBaseAttributeValueFromReplication</span>(Attribute, NewValue, OldValue);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 在OnRep函数中调用以在客户端上设置属性基础值 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetBaseAttributeValueFromReplication</span><span class="params">(<span class="type">const</span> FGameplayAttribute&amp; Attribute, <span class="type">const</span> FGameplayAttributeData&amp; NewValue, <span class="type">const</span> FGameplayAttributeData&amp; OldValue)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		ActiveGameplayEffects.<span class="built_in">SetBaseAttributeValueFromReplication</span>(Attribute, NewValue.<span class="built_in">GetBaseValue</span>(), OldValue.<span class="built_in">GetBaseValue</span>());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 测试此游戏效果中的所有修改器是否会使属性 &gt; 0.f */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">CanApplyAttributeModifiers</span><span class="params">(<span class="type">const</span> UGameplayEffect *GameplayEffect, <span class="type">float</span> Level, <span class="type">const</span> FGameplayEffectContextHandle&amp; EffectContext)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ActiveGameplayEffects.<span class="built_in">CanApplyAttributeModifiers</span>(GameplayEffect, Level, EffectContext);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取匹配查询的所有效果的剩余时间 */</span></span><br><span class="line">	<span class="function">TArray&lt;<span class="type">float</span>&gt; <span class="title">GetActiveEffectsTimeRemaining</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取匹配查询的所有效果的总持续时间 */</span></span><br><span class="line">	<span class="function">TArray&lt;<span class="type">float</span>&gt; <span class="title">GetActiveEffectsDuration</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取匹配查询的所有效果的剩余时间和总持续时间 */</span></span><br><span class="line">	TArray&lt;TPair&lt;<span class="type">float</span>,<span class="type">float</span>&gt;&gt; <span class="built_in">GetActiveEffectsTimeRemainingAndDuration</span>(<span class="type">const</span> FGameplayEffectQuery&amp; Query) <span class="type">const</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回查询的活跃效果列表 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure=<span class="literal">false</span>, Category = <span class="string">&quot;Gameplay Effects&quot;</span>, meta=(DisplayName = <span class="string">&quot;Get Active Gameplay Effects for Query&quot;</span>))</span><br><span class="line">	<span class="function">TArray&lt;FActiveGameplayEffectHandle&gt; <span class="title">GetActiveEffects</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回具有所有传入标签的活跃效果列表 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure = <span class="literal">false</span>, Category = <span class="string">&quot;Gameplay Effects&quot;</span>)</span><br><span class="line">	<span class="function">TArray&lt;FActiveGameplayEffectHandle&gt; <span class="title">GetActiveEffectsWithAllTags</span><span class="params">(FGameplayTagContainer Tags)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 这将给出匹配此查询的所有效果将完成的世界时间。如果多个效果匹配，则返回最后完成的效果 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetActiveEffectsEndTime</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query)</span> <span class="type">const</span></span>;</span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetActiveEffectsEndTimeWithInstigators</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query, TArray&lt;AActor*&gt;&amp; Instigators)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回结束时间和总持续时间 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">GetActiveEffectsEndTimeAndDuration</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query, <span class="type">float</span>&amp; EndTime, <span class="type">float</span>&amp; Duration)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 修改游戏效果的开始时间，以处理计时器最初不同步的问题 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ModifyActiveEffectStartTime</span><span class="params">(FActiveGameplayEffectHandle Handle, <span class="type">float</span> StartTimeDiff)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除包含Tags中任何标签的所有活跃效果 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects)</span><br><span class="line">	<span class="function">int32 <span class="title">RemoveActiveEffectsWithTags</span><span class="params">(FGameplayTagContainer Tags)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除具有包含Tags中任何标签的捕获源标签的所有活跃效果 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects)</span><br><span class="line">	<span class="function">int32 <span class="title">RemoveActiveEffectsWithSourceTags</span><span class="params">(FGameplayTagContainer Tags)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除应用Tags中任何标签的所有活跃效果 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects)</span><br><span class="line">	<span class="function">int32 <span class="title">RemoveActiveEffectsWithAppliedTags</span><span class="params">(FGameplayTagContainer Tags)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除授予Tags中任何标签的所有活跃效果 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = GameplayEffects)</span><br><span class="line">	<span class="function">int32 <span class="title">RemoveActiveEffectsWithGrantedTags</span><span class="params">(FGameplayTagContainer Tags)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除匹配给定查询的所有活跃效果。StacksToRemove=-1将移除所有堆栈。 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> int32 <span class="title">RemoveActiveEffects</span><span class="params">(<span class="type">const</span> FGameplayEffectQuery&amp; Query, int32 StacksToRemove = <span class="number">-1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	游戏提示</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 不要直接调用这些函数，而是调用GameplayCueManager上的包装器</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCueExecuted_FromSpec</span><span class="params">(<span class="type">const</span> FGameplayEffectSpecForRPC Spec, FPredictionKey PredictionKey)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCueExecuted</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FPredictionKey PredictionKey, FGameplayEffectContextHandle EffectContext)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCuesExecuted</span><span class="params">(<span class="type">const</span> FGameplayTagContainer GameplayCueTags, FPredictionKey PredictionKey, FGameplayEffectContextHandle EffectContext)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCueExecuted_WithParams</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FPredictionKey PredictionKey, FGameplayCueParameters GameplayCueParameters)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCuesExecuted_WithParams</span><span class="params">(<span class="type">const</span> FGameplayTagContainer GameplayCueTags, FPredictionKey PredictionKey, FGameplayCueParameters GameplayCueParameters)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCueAdded</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FPredictionKey PredictionKey, FGameplayEffectContextHandle EffectContext)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCueAdded_WithParams</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FPredictionKey PredictionKey, FGameplayCueParameters Parameters)</span> <span class="keyword">override</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCueAddedAndWhileActive_FromSpec</span><span class="params">(<span class="type">const</span> FGameplayEffectSpecForRPC&amp; Spec, FPredictionKey PredictionKey)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCueAddedAndWhileActive_WithParams</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FPredictionKey PredictionKey, FGameplayCueParameters GameplayCueParameters)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(NetMulticast, unreliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NetMulticast_InvokeGameplayCuesAddedAndWhileActive_WithParams</span><span class="params">(<span class="type">const</span> FGameplayTagContainer GameplayCueTags, FPredictionKey PredictionKey, FGameplayCueParameters GameplayCueParameters)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 游戏提示也可以单独出现。这些接受可选的effect context以传递命中结果等 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ExecuteGameplayCue</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FGameplayEffectContextHandle EffectContext = FGameplayEffectContextHandle())</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ExecuteGameplayCue</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, <span class="type">const</span> FGameplayCueParameters&amp; GameplayCueParameters)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 添加持久游戏提示 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AddGameplayCue</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FGameplayEffectContextHandle EffectContext = FGameplayEffectContextHandle())</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AddGameplayCue</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, <span class="type">const</span> FGameplayCueParameters&amp; GameplayCueParameters)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 为最小复制模式添加游戏提示。应仅在如果不处于最小复制模式将通过其他方式（例如通过GE）复制游戏提示的路径中调用 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AddGameplayCue_MinimalReplication</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FGameplayEffectContextHandle EffectContext = FGameplayEffectContextHandle())</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除持久游戏提示 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveGameplayCue</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 为最小复制模式移除游戏提示。应仅在如果不处于最小复制模式将通过其他方式（例如通过GE）复制游戏提示的路径中调用 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveGameplayCue_MinimalReplication</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 移除单独添加的任何GameplayCue，即不是作为游戏效果的一部分添加的。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveAllGameplayCues</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 处理来自外部源的游戏提示事件 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">InvokeGameplayCueEvent</span><span class="params">(<span class="type">const</span> FGameplayEffectSpecForRPC&amp; Spec, EGameplayCueEvent::Type EventType)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">InvokeGameplayCueEvent</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, EGameplayCueEvent::Type EventType, FGameplayEffectContextHandle EffectContext = FGameplayEffectContextHandle())</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">InvokeGameplayCueEvent</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, EGameplayCueEvent::Type EventType, <span class="type">const</span> FGameplayCueParameters&amp; GameplayCueParameters)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 允许轮询以查看GameplayCue是否活跃。我们期望大多数GameplayCue处理是基于事件的，但在某些情况下我们可能需要检查GameplayCue是否活跃（例如动画蓝图） */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category=<span class="string">&quot;GameplayCue&quot;</span>, meta=(GameplayTagFilter=<span class="string">&quot;GameplayCue&quot;</span>))</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">IsGameplayCueActive</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">HasMatchingGameplayTag</span>(GameplayCueTag);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将使用此ASC的所有者（发起者）和AvatarActor（效果引起者）初始化游戏提示参数 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">InitDefaultGameplayCueParameters</span><span class="params">(FGameplayCueParameters&amp; Parameters)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 我们准备好调用游戏提示了吗？ */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">IsReadyForGameplayCues</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 处理可能因进行NetDeltaSerialize并等待头像Actor加载而被延迟的游戏提示 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">HandleDeferredGameplayCues</span><span class="params">(<span class="type">const</span> FActiveGameplayEffectsContainer* GameplayEffectsContainer)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 为所有活跃、未抑制的GE上的GC调用WhileActive事件。这通常用于&quot;重生&quot;或某些avatar已更改的情况 */</span></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">5.4</span>, <span class="string">&quot;ReinvokeActiveGameplayCues未使用且其逻辑与预测游戏效果不一致。如果需要，可以在自己的项目中实现它。&quot;</span>)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ReinvokeActiveGameplayCues</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *	游戏技能</span></span><br><span class="line"><span class="comment">	 *	</span></span><br><span class="line"><span class="comment">	 *	技能系统组件在能力方面的作用是提供：</span></span><br><span class="line"><span class="comment">	 *		-能力实例的管理（无论是每个actor还是每次执行实例）。</span></span><br><span class="line"><span class="comment">	 *			-必须有人跟踪这些实例。</span></span><br><span class="line"><span class="comment">	 *			-非实例化能力可以在没有AbilitySystemComponent中的任何能力内容的情况下执行。</span></span><br><span class="line"><span class="comment">	 *				它们应该能够在GameplayAbilityActorInfo + GameplayAbility上操作。</span></span><br><span class="line"><span class="comment">	 *		</span></span><br><span class="line"><span class="comment">	 *	作为便利，它可能提供一些其他功能：</span></span><br><span class="line"><span class="comment">	 *		-一些基本输入绑定（无论是实例化还是非实例化能力）。</span></span><br><span class="line"><span class="comment">	 *		-诸如&quot;此组件具有这些能力&quot;的概念</span></span><br><span class="line"><span class="comment">	 *	</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 授予能力。</span></span><br><span class="line"><span class="comment">	 * 如果actor不是权威的，则将被忽略。</span></span><br><span class="line"><span class="comment">	 * 返回可用于TryActivateAbility等的句柄。</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param AbilitySpec 包含能力类、级别和要绑定到的输入ID信息的FGameplayAbilitySpec。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">FGameplayAbilitySpecHandle <span class="title">GiveAbility</span><span class="params">(<span class="type">const</span> FGameplayAbilitySpec&amp; AbilitySpec)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 授予能力并尝试恰好激活一次，这将导致其被移除。</span></span><br><span class="line"><span class="comment">	 * 仅在服务器上有效，并且能力的网络执行策略不能设置为Local或Local Predicted</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param AbilitySpec 包含能力类、级别和要绑定到的输入ID信息的FGameplayAbilitySpec。</span></span><br><span class="line"><span class="comment">	 * @param GameplayEventData 可选的激活事件数据。如果提供，将调用Activate Ability From Event而不是ActivateAbility，传递事件数据</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function">FGameplayAbilitySpecHandle <span class="title">GiveAbilityAndActivateOnce</span><span class="params">(FGameplayAbilitySpec&amp; AbilitySpec, <span class="type">const</span> FGameplayEventData* GameplayEventData = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 授予游戏能力并返回其句柄。</span></span><br><span class="line"><span class="comment">	 * 如果actor不是权威的，则将被忽略。</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param AbilityClass 要授予的能力类型</span></span><br><span class="line"><span class="comment">	 * @param Level 授予能力的级别</span></span><br><span class="line"><span class="comment">	 * @param InputID 绑定能力激活的输入ID值。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>, meta = (DisplayName = <span class="string">&quot;Give Ability&quot;</span>, ScriptName = <span class="string">&quot;GiveAbility&quot;</span>))</span><br><span class="line">	<span class="function">FGameplayAbilitySpecHandle <span class="title">K2_GiveAbility</span><span class="params">(TSubclassOf&lt;UGameplayAbility&gt; AbilityClass, int32 Level = <span class="number">0</span>, int32 InputID = <span class="number">-1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 授予游戏能力，激活一次，然后移除它。</span></span><br><span class="line"><span class="comment">	 * 如果actor不是权威的，则将被忽略。</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param AbilityClass 要授予的能力类型</span></span><br><span class="line"><span class="comment">	 * @param Level 授予能力的级别</span></span><br><span class="line"><span class="comment">	 * @param InputID 绑定能力激活的输入ID值。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>, meta = (DisplayName = <span class="string">&quot;Give Ability And Activate Once&quot;</span>, ScriptName = <span class="string">&quot;GiveAbilityAndActivateOnce&quot;</span>))</span><br><span class="line">	<span class="function">FGameplayAbilitySpecHandle <span class="title">K2_GiveAbilityAndActivateOnce</span><span class="params">(TSubclassOf&lt;UGameplayAbility&gt; AbilityClass, int32 Level = <span class="number">0</span>, int32 InputID = <span class="number">-1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 清除所有&#x27;授予&#x27;的能力。如果actor不是权威的，则将被忽略。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category=<span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ClearAllAbilities</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 清除绑定到给定输入ID的所有能力</span></span><br><span class="line"><span class="comment">	 * 如果actor不是权威的，则将被忽略</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param InputID 要移除的能力的数字输入ID</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ClearAllAbilitiesWithInputID</span><span class="params">(int32 InputID = <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** </span></span><br><span class="line"><span class="comment">	 * 移除指定能力。</span></span><br><span class="line"><span class="comment">	 * 如果actor不是权威的，则将被忽略。</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param Handle 要移除的能力的规格句柄</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintAuthorityOnly, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ClearAbility</span><span class="params">(<span class="type">const</span> FGameplayAbilitySpecHandle&amp; Handle)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 设置能力规格在其结束时移除。如果规格当前未活跃，则立即终止它。同时清除规格的InputID。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetRemoveAbilityOnEnd</span><span class="params">(FGameplayAbilitySpecHandle AbilitySpecHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** </span></span><br><span class="line"><span class="comment">	 * 获取匹配GameplayTagContainer中所有标签且满足</span></span><br><span class="line"><span class="comment">	 * DoesAbilitySatisfyTagRequirements()为true的所有可激活游戏能力。</span></span><br><span class="line"><span class="comment">	 * 后一个要求允许此函数在不要求预先知识的情况下找到正确的能力。</span></span><br><span class="line"><span class="comment">	 * 例如，如果有两个&quot;近战&quot;能力，一个需要武器，另一个需要徒手，</span></span><br><span class="line"><span class="comment">	 * 那么这些能力可以使用阻塞和必需标签来确定何时可以触发。</span></span><br><span class="line"><span class="comment">	 * 使用满足标签要求简化了许多使用情况。</span></span><br><span class="line"><span class="comment">	 * 例如，行为树可以使用各种装饰器来测试使用此机制获取的能力，</span></span><br><span class="line"><span class="comment">	 * 以及执行能力的任务，而不需要知道甚至存在多个这样的能力。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">GetActivatableGameplayAbilitySpecsByAllMatchingTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTagContainer, TArray &lt; <span class="keyword">struct</span> FGameplayAbilitySpec* &gt;&amp; MatchingGameplayAbilities, <span class="type">bool</span> bOnlyAbilitiesThatSatisfyTagRequirements = <span class="literal">true</span>)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** </span></span><br><span class="line"><span class="comment">	 * 尝试激活匹配给定标签且满足DoesAbilitySatisfyTagRequirements()的每个游戏能力。</span></span><br><span class="line"><span class="comment">	 * 如果任何尝试激活，则返回true。可以激活多个能力，并且能力可能稍后失败。</span></span><br><span class="line"><span class="comment">	 * 如果bAllowRemoteActivation为true，它将远程激活本地/服务器能力；如果为false，它将仅尝试本地激活能力。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">TryActivateAbilitiesByTag</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; GameplayTagContainer, <span class="type">bool</span> bAllowRemoteActivation = <span class="literal">true</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 尝试激活传入的能力。这将在执行前检查成本和需求。</span></span><br><span class="line"><span class="comment">	 * 如果认为已激活，则返回true，但由于稍后激活失败，可能会返回误报。</span></span><br><span class="line"><span class="comment">	 * 如果bAllowRemoteActivation为true，它将远程激活本地/服务器能力；如果为false，它将仅尝试本地激活能力</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">TryActivateAbilityByClass</span><span class="params">(TSubclassOf&lt;UGameplayAbility&gt; InAbilityToActivate, <span class="type">bool</span> bAllowRemoteActivation = <span class="literal">true</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** </span></span><br><span class="line"><span class="comment">	 * 尝试激活给定能力，将在执行前检查成本和需求。</span></span><br><span class="line"><span class="comment">	 * 如果认为已激活，则返回true，但由于稍后激活失败，可能会返回误报。</span></span><br><span class="line"><span class="comment">	 * 如果bAllowRemoteActivation为true，它将远程激活本地/服务器能力；如果为false，它将仅尝试本地激活能力</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">TryActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, <span class="type">bool</span> bAllowRemoteActivation = <span class="literal">true</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">HasActivatableTriggeredAbility</span><span class="params">(FGameplayTag Tag)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从游戏事件触发能力，将仅根据执行标志在本地/服务器上触发 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">TriggerAbilityFromGameplayEvent</span><span class="params">(FGameplayAbilitySpecHandle AbilityToTrigger, FGameplayAbilityActorInfo* ActorInfo, FGameplayTag Tag, <span class="type">const</span> FGameplayEventData* Payload, UAbilitySystemComponent&amp; Component)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">// 能力取消/中断</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消指定能力的CDO。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CancelAbility</span><span class="params">(UGameplayAbility* Ability)</span></span>;	</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消传入规格句柄指示的能力。如果在reactivated能力中未找到句柄，则不执行任何操作。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CancelAbilityHandle</span><span class="params">(<span class="type">const</span> FGameplayAbilitySpecHandle&amp; AbilityHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消具有指定标签的所有能力。不会取消Ignore实例 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CancelAbilities</span><span class="params">(<span class="type">const</span> FGameplayTagContainer* WithTags=<span class="literal">nullptr</span>, <span class="type">const</span> FGameplayTagContainer* WithoutTags=<span class="literal">nullptr</span>, UGameplayAbility* Ignore=<span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消所有能力，无论标签如何。不会取消ignore实例 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CancelAllAbilities</span><span class="params">(UGameplayAbility* Ignore=<span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消所有能力并杀死任何剩余的实例化能力 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">DestroyActiveState</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** </span></span><br><span class="line"><span class="comment">	 * 从能力激活或本机代码调用，将应用正确的能力阻塞标签并取消现有能力。子类可以覆盖此行为</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param AbilityTags 具有阻塞和取消标志的能力标签</span></span><br><span class="line"><span class="comment">	 * @param RequestingAbility 请求更改的游戏能力，对于本机事件可以为NULL</span></span><br><span class="line"><span class="comment">	 * @param bEnableBlockTags 如果为true将启用阻塞标签，如果为false将禁用阻塞标签</span></span><br><span class="line"><span class="comment">	 * @param BlockTags 要阻塞的标签</span></span><br><span class="line"><span class="comment">	 * @param bExecuteCancelTags 如果为true将取消匹配标签的能力</span></span><br><span class="line"><span class="comment">	 * @param CancelTags 要取消的标签</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ApplyAbilityBlockAndCancelTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; AbilityTags, UGameplayAbility* RequestingAbility, <span class="type">bool</span> bEnableBlockTags, <span class="type">const</span> FGameplayTagContainer&amp; BlockTags, <span class="type">bool</span> bExecuteCancelTags, <span class="type">const</span> FGameplayTagContainer&amp; CancelTags)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当能力可取消或不可取消时调用。默认情况下不执行任何操作，可以重写以连接到游戏事件 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">HandleChangeAbilityCanBeCanceled</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; AbilityTags, UGameplayAbility* RequestingAbility, <span class="type">bool</span> bCanBeCanceled)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果任何传入标签被阻塞，则返回true */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">AreAbilityTagsBlocked</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; Tags)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 阻塞或取消阻塞特定能力标签 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">BlockAbilitiesWithTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; Tags)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">UnBlockAbilitiesWithTags</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; Tags)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 检查技能系统当前是否阻塞InputID。如果InputID被阻塞，则返回true，否则返回false。 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">IsAbilityInputBlocked</span><span class="params">(int32 InputID)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 阻塞或取消阻塞特定输入ID */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">BlockAbilityByInputID</span><span class="params">(int32 InputID)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">UnBlockAbilityByInputID</span><span class="params">(int32 InputID)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">// 意味着从GameplayAbility及其子类调用但并非一般使用的函数</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回所有可激活能力的列表。只读。 */</span></span><br><span class="line">	<span class="function"><span class="type">const</span> TArray&lt;FGameplayAbilitySpec&gt;&amp; <span class="title">GetActivatableAbilities</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ActivatableAbilities.Items;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回所有可激活能力的列表。 */</span></span><br><span class="line">	<span class="function">TArray&lt;FGameplayAbilitySpec&gt;&amp; <span class="title">GetActivatableAbilities</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> ActivatableAbilities.Items;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回能力被激活的本地世界时间。在权威（服务器）和自主代理（控制客户端）上有效。 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetAbilityLastActivatedTime</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> AbilityLastActivatedTime; &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从句柄返回能力规格。如果修改，请调用MarkAbilitySpecDirty。将返回值视为临时的，因为指针可能会在随后调用AbilitySystemComponent时失效。 */</span></span><br><span class="line">	<span class="function">FGameplayAbilitySpec* <span class="title">FindAbilitySpecFromHandle</span><span class="params">(FGameplayAbilitySpecHandle Handle, EConsiderPending ConsiderPending = EConsiderPending::PendingRemove)</span> <span class="type">const</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 从GE句柄返回能力规格。如果修改，请调用MarkAbilitySpecDirty */</span></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">5.3</span>, <span class="string">&quot;FindAbilitySpecFromGEHandle从不准确，因为GameplayEffect可以授予多个GameplayAbilities。现在它返回nullptr。&quot;</span>)</span><br><span class="line">	<span class="function">FGameplayAbilitySpec* <span class="title">FindAbilitySpecFromGEHandle</span><span class="params">(FActiveGameplayEffectHandle Handle)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* 返回从GE句柄授予的所有能力规格句柄。仅服务器可以调用此函数。</span></span><br><span class="line"><span class="comment">	* @param ScopeLock - 用于与调用者通信的锁，返回值仅在此锁作用域内有效</span></span><br><span class="line"><span class="comment">	* @param Handle - 授予我们正在寻找的能力的活跃游戏效果的句柄</span></span><br><span class="line"><span class="comment">	* @param ConsiderPending - 我们是否返回待添加/移除的AbilitySpecs？</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function">TArray&lt;<span class="type">const</span> FGameplayAbilitySpec*&gt; <span class="title">FindAbilitySpecsFromGEHandle</span><span class="params">(<span class="type">const</span> FScopedAbilityListLock&amp; ScopeLock, FActiveGameplayEffectHandle Handle, EConsiderPending ConsiderPending = EConsiderPending::PendingRemove)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回与给定能力类对应的能力规格。如果修改，请调用MarkAbilitySpecDirty */</span></span><br><span class="line">	<span class="function">FGameplayAbilitySpec* <span class="title">FindAbilitySpecFromClass</span><span class="params">(TSubclassOf&lt;UGameplayAbility&gt; InAbilityClass)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从句柄返回能力规格。如果修改，请调用MarkAbilitySpecDirty */</span></span><br><span class="line">	<span class="function">FGameplayAbilitySpec* <span class="title">FindAbilitySpecFromInputID</span><span class="params">(int32 InputID)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回具有给定InputID的所有能力</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param InputID 要匹配的输入ID</span></span><br><span class="line"><span class="comment">	 * @param OutAbilitySpecs 匹配规格的指针数组</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">FindAllAbilitySpecsFromInputID</span><span class="params">(int32 InputID, TArray&lt;<span class="type">const</span> FGameplayAbilitySpec*&gt;&amp; OutAbilitySpecs)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 从类、级别和可选输入ID构建简单的FGameplayAbilitySpec</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> FGameplayAbilitySpec <span class="title">BuildAbilitySpecFromClass</span><span class="params">(TSubclassOf&lt;UGameplayAbility&gt; AbilityClass, int32 Level = <span class="number">0</span>, int32 InputID = <span class="number">-1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回包含所有授予能力句柄的数组</span></span><br><span class="line"><span class="comment">	 * 注意：当前这不包括处于激活中的能力</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * @param OutAbilityHandles 此数组将填充授予的能力规格句柄</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure = <span class="literal">false</span>, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">GetAllAbilities</span><span class="params">(TArray&lt;FGameplayAbilitySpecHandle&gt;&amp; OutAbilityHandles)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回匹配提供标签的所有能力的数组</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param OutAbilityHandles 此数组将填充匹配的能力规格句柄</span></span><br><span class="line"><span class="comment">	 * @param Tags 要匹配的游戏标签</span></span><br><span class="line"><span class="comment">	 * @param bExactMatch 如果为true，标签必须完全匹配。否则，将返回匹配任何标签的能力</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure = <span class="literal">false</span>, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">FindAllAbilitiesWithTags</span><span class="params">(TArray&lt;FGameplayAbilitySpecHandle&gt;&amp; OutAbilityHandles, FGameplayTagContainer Tags, <span class="type">bool</span> bExactMatch = <span class="literal">true</span>)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回匹配提供的游戏标签查询的所有能力的数组</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param OutAbilityHandles 此数组将填充匹配的能力规格句柄</span></span><br><span class="line"><span class="comment">	 * @param Query 要匹配的游戏标签查询</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure = <span class="literal">false</span>, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">FindAllAbilitiesMatchingQuery</span><span class="params">(TArray&lt;FGameplayAbilitySpecHandle&gt;&amp; OutAbilityHandles, FGameplayTagQuery Query)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回绑定到输入ID值的所有能力的数组</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param OutAbilityHandles 此数组将填充匹配的能力规格句柄</span></span><br><span class="line"><span class="comment">	 * @param InputID 要匹配的输入ID</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, BlueprintPure = <span class="literal">false</span>, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">FindAllAbilitiesWithInputID</span><span class="params">(TArray&lt;FGameplayAbilitySpecHandle&gt;&amp; OutAbilityHandles, int32 InputID = <span class="number">0</span>)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从活跃游戏效果的活跃游戏效果中检索EffectContext。 */</span></span><br><span class="line">	<span class="function">FGameplayEffectContextHandle <span class="title">GetEffectContextFromActiveGEHandle</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 调用以标记能力规格已被修改 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">MarkAbilitySpecDirty</span><span class="params">(FGameplayAbilitySpec&amp; Spec, <span class="type">bool</span> WasAddOrRemove=<span class="literal">false</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 尝试激活给定能力，仅当从正确的客户端/服务器上下文调用时才有效 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">InternalTryActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, FPredictionKey InPredictionKey = FPredictionKey(), UGameplayAbility ** OutInstancedAbility = <span class="literal">nullptr</span>, FOnGameplayAbilityEnded::FDelegate* OnGameplayAbilityEndedDelegate = <span class="literal">nullptr</span>, <span class="type">const</span> FGameplayEventData* TriggerEventData = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** InternalTryActivateAbility使用的失败标签（例如，这存储上次调用InternalTryActivateAbility的FailureTags） */</span></span><br><span class="line">	FGameplayTagContainer InternalTryActivateAbilityFailureTags;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从能力调用以让组件知道它已结束 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">NotifyAbilityEnded</span><span class="params">(FGameplayAbilitySpecHandle Handle, UGameplayAbility* Ability, <span class="type">bool</span> bWasCancelled)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ClearAbilityReplicatedDataCache</span><span class="params">(FGameplayAbilitySpecHandle Handle, <span class="type">const</span> FGameplayAbilityActivationInfo&amp; ActivationInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从FScopedAbilityListLock调用 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">IncrementAbilityListLock</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">DecrementAbilityListLock</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">// 调试</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">FAbilitySystemComponentDebugInfo</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">FAbilitySystemComponentDebugInfo</span>()</span><br><span class="line">		&#123;</span><br><span class="line">			FMemory::<span class="built_in">Memzero</span>(*<span class="keyword">this</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">class</span> <span class="title class_">UCanvas</span>* Canvas;</span><br><span class="line"></span><br><span class="line">		<span class="type">bool</span> bPrintToLog;</span><br><span class="line"></span><br><span class="line">		<span class="type">bool</span> bShowAttributes;</span><br><span class="line">		<span class="type">bool</span> bShowGameplayEffects;;</span><br><span class="line">		<span class="type">bool</span> bShowAbilities;</span><br><span class="line"></span><br><span class="line">		<span class="type">float</span> XPos;</span><br><span class="line">		<span class="type">float</span> YPos;</span><br><span class="line">		<span class="type">float</span> OriginalX;</span><br><span class="line">		<span class="type">float</span> OriginalY;</span><br><span class="line">		<span class="type">float</span> MaxY;</span><br><span class="line">		<span class="type">float</span> NewColumnYPadding;</span><br><span class="line">		<span class="type">float</span> YL;</span><br><span class="line"></span><br><span class="line">		<span class="type">bool</span> Accumulate;</span><br><span class="line">		TArray&lt;FString&gt;	Strings;</span><br><span class="line"></span><br><span class="line">		int32 GameFlags; <span class="comment">// 供游戏在Debug_Internal中设置/读取的任意标志</span></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">OnShowDebugInfo</span><span class="params">(AHUD* HUD, UCanvas* Canvas, <span class="type">const</span> FDebugDisplayInfo&amp; DisplayInfo, <span class="type">float</span>&amp; YL, <span class="type">float</span>&amp; YPos)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">DisplayDebug</span><span class="params">(<span class="keyword">class</span> UCanvas* Canvas, <span class="type">const</span> <span class="keyword">class</span> FDebugDisplayInfo&amp; DebugDisplay, <span class="type">float</span>&amp; YL, <span class="type">float</span>&amp; YPos)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PrintDebug</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AccumulateScreenPos</span><span class="params">(FAbilitySystemComponentDebugInfo&amp; Info)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Debug_Internal</span><span class="params">(<span class="keyword">struct</span> FAbilitySystemComponentDebugInfo&amp; Info)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">DebugLine</span><span class="params">(<span class="keyword">struct</span> FAbilitySystemComponentDebugInfo&amp; Info, FString Str, <span class="type">float</span> XOffset, <span class="type">float</span> YOffset, int32 MinTextRowsToAdvance = <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="function">FString <span class="title">CleanupName</span><span class="params">(FString Str)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 打印所有游戏效果的调试列表 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">PrintAllGameplayEffects</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 请求服务器将技能系统调试信息发送回客户端，通过ClientPrintDebug_Response */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerPrintDebug_Request</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 与ServerPrintDebug_Request相同，但这包括客户端调试字符串，以便服务器可以将它们嵌入重放中 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerPrintDebug_RequestWithStrings</span><span class="params">(<span class="type">const</span> TArray&lt;FString&gt;&amp; Strings)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当ServerPrintDebug函数在服务器上运行时，游戏可以覆盖的虚拟函数以执行自己的操作 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnServerPrintDebug_Request</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 确定是调用ServerPrintDebug_Request还是ServerPrintDebug_RequestWithStrings。 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">ShouldSendClientDebugStringsToServer</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ClientPrintDebug_Response</span><span class="params">(<span class="type">const</span> TArray&lt;FString&gt;&amp; Strings, int32 GameFlags)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnClientPrintDebug_Response</span><span class="params">(<span class="type">const</span> TArray&lt;FString&gt;&amp; Strings, int32 GameFlags)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> ENABLE_VISUAL_LOG</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ClearDebugInstantEffects</span><span class="params">()</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">GrabDebugSnapshot</span><span class="params">(FVisualLogEntry* Snapshot)</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// ENABLE_VISUAL_LOG</span></span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">4.26</span>, <span class="string">&quot;这将在未来的引擎版本中变为私有。请改用SetClientDebugStrings、GetClientDebugStrings或GetClientDebugStrings_Mutable。&quot;</span>)</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(ReplicatedUsing=OnRep_ClientDebugString)</span><br><span class="line">	TArray&lt;FString&gt;	ClientDebugStrings;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetClientDebugStrings</span><span class="params">(TArray&lt;FString&gt;&amp;&amp; NewClientDebugStrings)</span></span>;</span><br><span class="line">	<span class="function">TArray&lt;FString&gt;&amp; <span class="title">GetClientDebugStrings_Mutable</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> TArray&lt;FString&gt;&amp; <span class="title">GetClientDebugStrings</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">4.26</span>, <span class="string">&quot;这将在未来的引擎版本中变为私有。请改用SetServerDebugStrings、GetServerDebugStrings或GetServerDebugStrings_Mutable。&quot;</span>)</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(ReplicatedUsing=OnRep_ServerDebugString)</span><br><span class="line">	TArray&lt;FString&gt;	ServerDebugStrings;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetServerDebugStrings</span><span class="params">(TArray&lt;FString&gt;&amp;&amp; NewServerDebugStrings)</span></span>;</span><br><span class="line">	<span class="function">TArray&lt;FString&gt;&amp; <span class="title">GetServerDebugStrings_Mutable</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> TArray&lt;FString&gt;&amp; <span class="title">GetServerDebugStrings</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnRep_ClientDebugString</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnRep_ServerDebugString</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">// 批量处理客户端-&gt;服务器RPC</span></span><br><span class="line">	<span class="comment">// 这是一个进行中的功能，用于批量处理客户端-&gt;服务器通信。它是可选的且不完整。它仅批量处理以下函数。在批处理窗口期间调用其他服务器RPC不安全。仅当您知道自己在做什么时才选择使用！</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------	</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CallServerTryActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, <span class="type">bool</span> InputPressed, FPredictionKey PredictionKey)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CallServerSetReplicatedTargetData</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, <span class="type">const</span> FGameplayAbilityTargetDataHandle&amp; ReplicatedTargetDataHandle, FGameplayTag ApplicationTag, FPredictionKey CurrentPredictionKey)</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CallServerEndAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToEnd, FGameplayAbilityActivationInfo ActivationInfo, FPredictionKey PredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">ShouldDoServerAbilityRPCBatch</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginServerAbilityRPCBatch</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">EndServerAbilityRPCBatch</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 在EndServerAbilityRPCBatch上批量发送到服务器的累积客户端数据 */</span></span><br><span class="line">	TArray&lt;FServerAbilityRPCBatch, TInlineAllocator&lt;<span class="number">1</span>&gt; &gt; LocalServerAbilityRPCBatchData;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ServerAbilityRPCBatch</span><span class="params">(FServerAbilityRPCBatch BatchInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 供子类覆盖的函数</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ServerAbilityRPCBatch_Internal</span><span class="params">(FServerAbilityRPCBatch&amp; BatchInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	输入处理/目标选择</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------	</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 这旨在用于从输入角度抑制激活能力。（例如，菜单已打开，另一个游戏机制正在消耗所有输入等）</span></span><br><span class="line"><span class="comment">	 * 这应仅在本地拥有的玩家上调用。</span></span><br><span class="line"><span class="comment">	 * 这不应用于游戏机制，如沉默或禁用。这些应通过游戏效果完成。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category=<span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">GetUserAbilityActivationInhibited</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 禁用或启用本地用户激活能力的能力。这应仅用于输入/UI等相关抑制。不用于游戏机制。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category=<span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetUserAbilityActivationInhibited</span><span class="params">(<span class="type">bool</span> NewInhibit)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当前是否抑制激活 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	<span class="type">bool</span> UserAbilityActivationInhibited;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 启用时，GameplayCue RPC将通过AvatarActor的IAbilitySystemReplicationProxyInterface而不是此组件路由 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	<span class="type">bool</span> ReplicationProxyEnabled;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 抑制通过此组件上的GE授予的所有能力 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	<span class="type">bool</span> bSuppressGrantAbility;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 抑制此组件上的所有GameplayCues */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	<span class="type">bool</span> bSuppressGameplayCues;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当前活跃的目标选择角色列表 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	TArray&lt;TObjectPtr&lt;AGameplayAbilityTargetActor&gt;&gt; SpawnedTargetActors;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 使用一些默认操作名称绑定到输入组件 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BindToInputComponent</span><span class="params">(UInputComponent* InputComponent)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 使用自定义绑定绑定到输入组件 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BindAbilityActivationToInputComponent</span><span class="params">(UInputComponent* InputComponent, FGameplayAbilityInputBinds BindInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 初始化BlockedAbilityBindings变量 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetBlockAbilityBindingsArray</span><span class="params">(FGameplayAbilityInputBinds BindInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 调用以处理能力绑定输入 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">AbilityLocalInputPressed</span><span class="params">(int32 InputID)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">AbilityLocalInputReleased</span><span class="params">(int32 InputID)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 发送具有提供的输入ID的本地玩家输入按下事件，通知任何绑定的能力</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * @param InputID 要匹配的输入ID</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">PressInputID</span><span class="params">(int32 InputID)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 发送具有提供的输入ID的本地玩家输入释放事件，通知任何绑定的能力</span></span><br><span class="line"><span class="comment">	 * @param InputID 要匹配的输入ID</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ReleaseInputID</span><span class="params">(int32 InputID)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 为目标选择角色处理确认/取消 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">LocalInputConfirm</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">LocalInputCancel</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 发送本地玩家输入确认事件，通知能力</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">InputConfirm</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 发送本地玩家输入取消事件，通知能力</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Gameplay Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">InputCancel</span><span class="params">()</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 用于绑定GenericConfirm/Cancel事件的InputID */</span></span><br><span class="line">	int32 GenericConfirmInputID;</span><br><span class="line">	int32 GenericCancelInputID;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">IsGenericConfirmInputBound</span><span class="params">(int32 InputID)</span> <span class="type">const</span>	</span>&#123; <span class="keyword">return</span> ((InputID == GenericConfirmInputID) &amp;&amp; GenericLocalConfirmCallbacks.<span class="built_in">IsBound</span>()); &#125;</span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">IsGenericCancelInputBound</span><span class="params">(int32 InputID)</span> <span class="type">const</span>		</span>&#123; <span class="keyword">return</span> ((InputID == GenericCancelInputID) &amp;&amp; GenericLocalCancelCallbacks.<span class="built_in">IsBound</span>()); &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 任何能力都可以监听的通用确认事件的通用本地回调 */</span></span><br><span class="line">	FAbilityConfirmOrCancel	GenericLocalConfirmCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 任何能力都可以监听的通用取消事件的通用本地回调 */</span></span><br><span class="line">	FAbilityConfirmOrCancel	GenericLocalCancelCallbacks;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 任何活跃的目标选择角色将被告知停止并返回当前目标数据 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">TargetConfirm</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 任何活跃的目标选择角色将被停止并取消，不返回任何目标数据 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">TargetCancel</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	动画蒙太奇支持</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------	</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 播放蒙太奇并根据传入的能力/激活信息处理复制和预测 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">PlayMontage</span><span class="params">(UGameplayAbility* AnimatingAbility, FGameplayAbilityActivationInfo ActivationInfo, UAnimMontage* Montage, <span class="type">float</span> InPlayRate, FName StartSectionName = NAME_None, <span class="type">float</span> StartTimeSeconds = <span class="number">0.0f</span>)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> UAnimMontage* <span class="title">PlaySlotAnimationAsDynamicMontage</span><span class="params">(UGameplayAbility* AnimatingAbility, FGameplayAbilityActivationInfo ActivationInfo, UAnimSequenceBase* AnimAsset, FName SlotName, <span class="type">float</span> BlendInTime, <span class="type">float</span> BlendOutTime, <span class="type">float</span> InPlayRate = <span class="number">1.f</span>, <span class="type">float</span> StartTimeSeconds = <span class="number">0.0f</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 播放蒙太奇而不更新复制/预测结构。当复制告诉模拟代理播放蒙太奇时使用。 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">float</span> <span class="title">PlayMontageSimulated</span><span class="params">(UAnimMontage* Montage, <span class="type">float</span> InPlayRate, FName StartSectionName = NAME_None)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> UAnimMontage* <span class="title">PlaySlotAnimationAsDynamicMontageSimulated</span><span class="params">(UAnimSequenceBase* AnimAsset, FName SlotName, <span class="type">float</span> BlendInTime, <span class="type">float</span> BlendOutTime, <span class="type">float</span> InPlayRate = <span class="number">1.f</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 停止当前正在播放的任何蒙太奇。期望调用者仅在他们当前是动画能力（或有充分理由不检查）时才停止它 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">CurrentMontageStop</span><span class="params">(<span class="type">float</span> OverrideBlendOutTime = <span class="number">-1.0f</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果当前蒙太奇是作为参数给定的蒙太奇，则停止当前蒙太奇 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">StopMontageIfCurrent</span><span class="params">(<span class="type">const</span> UAnimMontage&amp; Montage, <span class="type">float</span> OverrideBlendOutTime = <span class="number">-1.0f</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果传入的能力仍在当前动画中，则清除动画能力 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ClearAnimatingAbility</span><span class="params">(UGameplayAbility* Ability)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将当前蒙太奇跳转到给定部分。期望调用者仅在他们当前是动画能力（或有充分理由不检查）时才停止它 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">CurrentMontageJumpToSection</span><span class="params">(FName SectionName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 设置当前蒙太奇的下一个部分名称。期望调用者仅在他们当前是动画能力（或有充分理由不检查）时才停止它 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">CurrentMontageSetNextSectionName</span><span class="params">(FName FromSectionName, FName ToSectionName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 设置当前蒙太奇的播放速率 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">CurrentMontageSetPlayRate</span><span class="params">(<span class="type">float</span> InPlayRate)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果传入的能力是当前动画能力，则返回true */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">IsAnimatingAbility</span><span class="params">(UGameplayAbility* Ability)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回当前动画能力 */</span></span><br><span class="line">	<span class="function">UGameplayAbility* <span class="title">GetAnimatingAbility</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回当前正在播放的蒙太奇 */</span></span><br><span class="line">	<span class="function">UAnimMontage* <span class="title">GetCurrentMontage</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取当前播放的AnimMontage的SectionID */</span></span><br><span class="line">	<span class="function">int32 <span class="title">GetCurrentMontageSectionID</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取当前播放的AnimMontage的SectionName */</span></span><br><span class="line">	<span class="function">FName <span class="title">GetCurrentMontageSectionName</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取当前部分的时间长度 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetCurrentMontageSectionLength</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回当前部分的剩余时间 */</span></span><br><span class="line">	<span class="function"><span class="type">float</span> <span class="title">GetCurrentMontageSectionTimeLeft</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 设置蒙太奇中位置复制的方法 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetMontageRepAnimPositionMethod</span><span class="params">(ERepAnimPositionMethod InMethod)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	Actor交互</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------	</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 逻辑上拥有此组件的actor */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(ReplicatedUsing = OnRep_OwningActor)</span><br><span class="line">	TObjectPtr&lt;AActor&gt; OwnerActor;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 用于能力的物理表示的actor。可以为NULL */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(ReplicatedUsing = OnRep_OwningActor)</span><br><span class="line">	TObjectPtr&lt;AActor&gt; AvatarActor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetOwnerActor</span><span class="params">(AActor* NewOwnerActor)</span></span>;</span><br><span class="line">	<span class="function">AActor* <span class="title">GetOwnerActor</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> OwnerActor; &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetAvatarActor_Direct</span><span class="params">(AActor* NewAvatarActor)</span></span>;</span><br><span class="line">	<span class="function">AActor* <span class="title">GetAvatarActor_Direct</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> AvatarActor; &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnRep_OwningActor</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnAvatarActorDestroyed</span><span class="params">(AActor* InActor)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnOwnerActorDestroyed</span><span class="params">(AActor* InActor)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnSpawnedAttributesEndPlayed</span><span class="params">(AActor* InActor, EEndPlayReason::Type EndPlayReason)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 缓存的关于拥有actor的数据，能力将需要频繁访问（移动组件、网格组件、动画实例等） */</span></span><br><span class="line">	TSharedPtr&lt;FGameplayAbilityActorInfo&gt;	AbilityActorInfo;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *	初始化能力的ActorInfo - 保存我们正在作用于谁以及谁控制我们的结构。</span></span><br><span class="line"><span class="comment">	 *      OwnerActor是逻辑上拥有此组件的actor。</span></span><br><span class="line"><span class="comment">	 *		AvatarActor是我们在世界中作用的物理actor。通常是Pawn，但也可以是塔、建筑、炮塔等，可能与Owner相同</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">InitAbilityActorInfo</span><span class="params">(AActor* InOwnerActor, AActor* InAvatarActor)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回用于特定任务的头像actor，通常是GetAvatarActor */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> AActor* <span class="title">GetGameplayTaskAvatar</span><span class="params">(<span class="type">const</span> UGameplayTask* Task)</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回此组件的头像actor */</span></span><br><span class="line">	<span class="function">AActor* <span class="title">GetAvatarActor</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 更改头像actor，保持拥有actor不变 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetAvatarActor</span><span class="params">(AActor* InAvatarActor)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当ASC的AbilityActorInfo设置了PlayerController时调用。 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnPlayerControllerSet</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	* 当初始化到此系统的actor死亡时调用，这将从此系统和FGameplayAbilityActorInfo中清除该actor</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ClearActorInfo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *	这将根据当前ActorInfo刷新能力的ActorInfo结构。也就是说，AvatarActor将相同，但我们将查找新的</span></span><br><span class="line"><span class="comment">	 *	AnimInstance、MovementComponent、PlayerController等。</span></span><br><span class="line"><span class="comment">	 */</span>	</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RefreshAbilityActorInfo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//	同步RPC</span></span><br><span class="line">	<span class="comment">//  虽然这些看起来像状态，但实际上这些是具有一些有效负载数据的同步事件</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------	</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 将通用复制事件复制到服务器。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerSetReplicatedEvent</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, FPredictionKey CurrentPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将带有有效负载的通用复制事件复制到服务器。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerSetReplicatedEventWithPayload</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, FPredictionKey CurrentPredictionKey, FVector_NetQuantize100 VectorPayload)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将通用复制事件复制到客户端。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ClientSetReplicatedEvent</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 调用使用给定通用复制事件注册的本地回调 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">InvokeReplicatedEvent</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, FPredictionKey CurrentPredictionKey = FPredictionKey())</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 调用使用给定通用复制事件注册的本地回调 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">InvokeReplicatedEventWithPayload</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, FPredictionKey CurrentPredictionKey, FVector_NetQuantize100 VectorPayload)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 将目标数据复制到服务器 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerSetReplicatedTargetData</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, <span class="type">const</span> FGameplayAbilityTargetDataHandle&amp; ReplicatedTargetDataHandle, FGameplayTag ApplicationTag, FPredictionKey CurrentPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 向服务器复制目标选择已被取消 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerSetReplicatedTargetDataCancelled</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, FPredictionKey CurrentPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 设置当前目标数据并调用适用的回调 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ConfirmAbilityTargetData</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, <span class="type">const</span> FGameplayAbilityTargetDataHandle&amp; TargetData, <span class="type">const</span> FGameplayTag&amp; ApplicationTag)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消能力目标数据并调用回调 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">CancelAbilityTargetData</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 删除所有缓存的能力客户端数据（原为：ConsumeAbilityTargetData）*/</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ConsumeAllReplicatedData</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line">	<span class="comment">/** 从客户端消耗缓存的目标数据（仅TargetData） */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ConsumeClientReplicatedTargetData</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 消耗给定的通用复制事件（取消设置它）。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ConsumeGenericReplicatedEvent</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 获取给定通用复制事件的复制数据。 */</span></span><br><span class="line">	<span class="function">FAbilityReplicatedData <span class="title">GetReplicatedDataOfGenericReplicatedEvent</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 调用已发送的任何复制委托（TargetData或通用复制事件）。注意，如果在能力中的多个位置注册事件然后调用此函数，则可能很危险。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CallAllReplicatedDelegatesIfSet</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果已发送，则调用TargetData确认/取消事件。 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">CallReplicatedTargetDataDelegatesIfSet</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果事件已发送，则调用给定的通用复制事件委托 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">CallReplicatedEventDelegateIfSet</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果客户端事件已发送，则调用传入的委托。如果没有，则将委托添加到我们的多播回调中，当它发送时将触发。 */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">CallOrAddReplicatedDelegate</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey, FSimpleMulticastDelegate::FDelegate Delegate)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回给定能力/预测键对的TargetDataSet委托 */</span></span><br><span class="line">	<span class="function">FAbilityTargetDataSetDelegate&amp; <span class="title">AbilityTargetDataSetDelegate</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回给定能力/预测键对的TargetData取消委托 */</span></span><br><span class="line">	<span class="function">FSimpleMulticastDelegate&amp; <span class="title">AbilityTargetDataCancelledDelegate</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 返回给定能力/预测键对的通用复制事件 */</span></span><br><span class="line">	<span class="function">FSimpleMulticastDelegate&amp; <span class="title">AbilityReplicatedEventDelegate</span><span class="params">(EAbilityGenericReplicatedEvent::Type EventType, FGameplayAbilitySpecHandle AbilityHandle, FPredictionKey AbilityOriginalPredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 直接输入状态复制。如果能力上的bReplicateInputDirectly为true，则将调用这些函数，通常这不是好事。（相反，最好使用通用复制事件）。 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerSetInputPressed</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerSetInputReleased</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 始终在本地玩家上调用。仅当GameplayAbility上设置了bReplicateInputDirectly时在服务器上调用。 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">AbilitySpecInputPressed</span><span class="params">(FGameplayAbilitySpec&amp; Spec)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 始终在本地玩家上调用。仅当GameplayAbility上设置了bReplicateInputDirectly时在服务器上调用。 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">AbilitySpecInputReleased</span><span class="params">(FGameplayAbilitySpec&amp; Spec)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line">	<span class="comment">//  组件覆盖</span></span><br><span class="line">	<span class="comment">// ----------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">InitializeComponent</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">UninitializeComponent</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnComponentDestroyed</span><span class="params">(<span class="type">bool</span> bDestroyingHierarchy)</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">GetShouldTick</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">TickComponent</span><span class="params">(<span class="type">float</span> DeltaTime, <span class="keyword">enum</span> ELevelTick TickType, FActorComponentTickFunction *ThisTickFunction)</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">GetSubobjectsWithStableNamesForNetworking</span><span class="params">(TArray&lt;UObject*&gt;&amp; Objs)</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">ReplicateSubobjects</span><span class="params">(<span class="keyword">class</span> UActorChannel *Channel, <span class="keyword">class</span> FOutBunch *Bunch, FReplicationFlags *RepFlags)</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="comment">/** 强制拥有actor更新其复制，以确保游戏提示快速发送。重写以更改其积极程度 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ForceReplication</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PreNetReceive</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PostNetReceive</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnRegister</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnUnregister</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">ReadyForReplication</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">GetLifetimeReplicatedProps</span><span class="params">(TArray&lt;FLifetimeProperty&gt;&amp; OutLifetimeProps)</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">GetReplicatedCustomConditionState</span><span class="params">(FCustomPropertyConditionState&amp; OutActiveState)</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">UpdateActiveGameplayEffectsReplicationCondition</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">UpdateMinimalReplicationGameplayCuesCondition</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *	我们可以激活的能力。</span></span><br><span class="line"><span class="comment">	 *		-这将包括非实例化能力和每次执行实例化能力的CDO。</span></span><br><span class="line"><span class="comment">	 *		-Actor实例化能力将是实际实例（不是CDO）</span></span><br><span class="line"><span class="comment">	 *		</span></span><br><span class="line"><span class="comment">	 *	此数组对于工作不是至关重要的。它是用于&#x27;给actor赋予能力&#x27;的便利功能。但能力也可以在事物上工作</span></span><br><span class="line"><span class="comment">	 *	而无需AbilitySystemComponent。例如，可以编写能力在StaticMeshActor上执行。只要能力不需要</span></span><br><span class="line"><span class="comment">	 *	实例化或AbilitySystemComponent提供的任何其他功能，那么它就不需要该组件来运行。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(ReplicatedUsing = OnRep_ActivateAbilities, BlueprintReadOnly, Transient, Category = <span class="string">&quot;Abilities&quot;</span>)</span><br><span class="line">	FGameplayAbilitySpecContainer ActivatableAbilities;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从能力规格映射到目标数据。用于跟踪复制数据和回调 */</span></span><br><span class="line">	FGameplayAbilityReplicatedDataContainer AbilityTargetDataMap;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 游戏标签容器过滤器和它们调用的委托列表 */</span></span><br><span class="line">	TArray&lt;TPair&lt;FGameplayTagContainer, FGameplayEventTagMulticastDelegate&gt;&gt; GameplayEventTagContainerDelegates;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 与此组件关联的所有每次执行实例化游戏能力的完整列表 */</span></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">5.1</span>, <span class="string">&quot;此数组将变为私有。请改用GetReplicatedInstancedAbilities、AddReplicatedInstancedAbility或RemoveReplicatedInstancedAbility。&quot;</span>)</span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	TArray&lt;TObjectPtr&lt;UGameplayAbility&gt;&gt;	AllReplicatedInstancedAbilities;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 与此组件关联的所有每次执行实例化游戏能力的完整列表 */</span></span><br><span class="line">	<span class="function">PRAGMA_DISABLE_DEPRECATION_WARNINGS</span></span><br><span class="line"><span class="function">	<span class="type">const</span> TArray&lt;UGameplayAbility*&gt;&amp; <span class="title">GetReplicatedInstancedAbilities</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> AllReplicatedInstancedAbilities; &#125;</span><br><span class="line">	PRAGMA_ENABLE_DEPRECATION_WARNINGS</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 添加与此组件关联的游戏能力 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AddReplicatedInstancedAbility</span><span class="params">(UGameplayAbility* GameplayAbility)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 移除与此组件关联的游戏能力 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveReplicatedInstancedAbility</span><span class="params">(UGameplayAbility* GameplayAbility)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消注册此组件的所有游戏能力 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">RemoveAllReplicatedInstancedAbilities</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将从GiveAbility或OnRep调用。使用给定能力初始化事件（触发器和输入） */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnGiveAbility</span><span class="params">(FGameplayAbilitySpec&amp; AbilitySpec)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将从RemoveAbility或OnRep调用。解除与给定能力的输入绑定 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnRemoveAbility</span><span class="params">(FGameplayAbilitySpec&amp; AbilitySpec)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从ClearAbility、ClearAllAbilities或OnRep调用。清除不应再存在的任何触发器。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CheckForClearedAbilities</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 取消特定的能力规格 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">CancelAbilitySpec</span><span class="params">(FGameplayAbilitySpec&amp; Spec, UGameplayAbility* Ignore)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 创建能力的新实例，将其存储在规格中 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> UGameplayAbility* <span class="title">CreateNewInstanceOfAbility</span><span class="params">(FGameplayAbilitySpec&amp; Spec, <span class="type">const</span> UGameplayAbility* Ability)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 指示我们处于多少层ABILITY_SCOPE_LOCK()中。当AbilityScopeLockCount &gt; 0时，能力列表可能不能被修改。 */</span></span><br><span class="line">	int32 AbilityScopeLockCount;</span><br><span class="line">	<span class="comment">/** 退出当前能力作用域锁时将移除的能力。 */</span></span><br><span class="line">	TArray&lt;FGameplayAbilitySpecHandle, TInlineAllocator&lt;<span class="number">2</span>&gt; &gt; AbilityPendingRemoves;</span><br><span class="line">	<span class="comment">/** 退出当前能力作用域锁时将添加的能力。 */</span></span><br><span class="line">	TArray&lt;FGameplayAbilitySpec, TInlineAllocator&lt;<span class="number">2</span>&gt; &gt; AbilityPendingAdds;</span><br><span class="line">	<span class="comment">/** 退出当前能力作用域锁时是否应移除所有能力。将优先于待添加项。 */</span></span><br><span class="line">	<span class="type">bool</span> bAbilityPendingClearAll;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 上次能力激活的本地世界时间。这用于AFK/空闲检测 */</span></span><br><span class="line">	<span class="type">float</span> AbilityLastActivatedTime;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnRep_ActivateAbilities</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ServerTryActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, <span class="type">bool</span> InputPressed, FPredictionKey PredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ServerTryActivateAbilityWithEventData</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, <span class="type">bool</span> InputPressed, FPredictionKey PredictionKey, FGameplayEventData TriggerEventData)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ClientTryActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 由ServerEndAbility和ClientEndAbility调用；避免代码重复。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">RemoteEndOrCancelAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToEnd, FGameplayAbilityActivationInfo ActivationInfo, <span class="type">bool</span> bWasCanceled)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ServerEndAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToEnd, FGameplayAbilityActivationInfo ActivationInfo, FPredictionKey PredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ClientEndAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToEnd, FGameplayAbilityActivationInfo ActivationInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Server, reliable, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span>    <span class="title">ServerCancelAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToCancel, FGameplayAbilityActivationInfo ActivationInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span>    <span class="title">ClientCancelAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToCancel, FGameplayAbilityActivationInfo ActivationInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, Reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ClientActivateAbilityFailed</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, int16 PredictionKey)</span></span>;</span><br><span class="line">	int32	ClientActivateAbilityFailedCountRecent;</span><br><span class="line">	<span class="type">float</span>	ClientActivateAbilityFailedStartTime;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">OnClientActivateAbilityCaughtUp</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, FPredictionKey::KeyType PredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, Reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ClientActivateAbilitySucceed</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, FPredictionKey PredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(Client, Reliable)</span><br><span class="line">	<span class="function"><span class="type">void</span>	<span class="title">ClientActivateAbilitySucceedWithEventData</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, FPredictionKey PredictionKey, FGameplayEventData TriggerEventData)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** ServerTryActivateAbility的实现 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">InternalServerTryActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityToActivate, <span class="type">bool</span> InputPressed, <span class="type">const</span> FPredictionKey&amp; PredictionKey, <span class="type">const</span> FGameplayEventData* TriggerEventData)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当播放蒙太奇的预测键被拒绝时调用 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnPredictiveMontageRejected</span><span class="params">(UAnimMontage* PredictiveMontage)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 将LocalAnimMontageInfo复制到RepAnimMontageInfo中 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AnimMontage_UpdateReplicatedData</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AnimMontage_UpdateReplicatedData</span><span class="params">(FGameplayAbilityRepAnimMontage&amp; OutRepAnimMontageInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 复制重复动画数据的播放标志 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">AnimMontage_UpdateForcedPlayFlags</span><span class="params">(FGameplayAbilityRepAnimMontage&amp; OutRepAnimMontageInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">4.26</span>, <span class="string">&quot;这将在未来的引擎版本中变为私有。请改用SetRepAnimMontageInfo、GetRepAnimMontageInfo或GetRepAnimMontageInfo_Mutable。&quot;</span>)</span><br><span class="line">	<span class="comment">/** 用于将蒙太奇信息复制到模拟客户端的数据结构 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(ReplicatedUsing=OnRep_ReplicatedAnimMontage)</span><br><span class="line">	FGameplayAbilityRepAnimMontage RepAnimMontageInfo;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetRepAnimMontageInfo</span><span class="params">(<span class="type">const</span> FGameplayAbilityRepAnimMontage&amp; NewRepAnimMontageInfo)</span></span>;</span><br><span class="line">	<span class="function">FGameplayAbilityRepAnimMontage&amp; <span class="title">GetRepAnimMontageInfo_Mutable</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> FGameplayAbilityRepAnimMontage&amp; <span class="title">GetRepAnimMontageInfo</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 是否是模拟actor的缓存值 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	<span class="type">bool</span> bCachedIsNetSimulated;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果当我们还没有与我们关联的animinstance时发生蒙太奇复制，则设置 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	<span class="type">bool</span> bPendingMontageRep;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 本地发起（如果是服务器，则为所有；如果是客户端，则为预测；如果是模拟代理，则为复制）的蒙太奇数据结构 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>()</span><br><span class="line">	FGameplayAbilityLocalAnimMontage LocalAnimMontageInfo;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnRep_ReplicatedAnimMontage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果我们准备好处理复制蒙太奇信息，则返回true */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">bool</span> <span class="title">IsReadyForReplicatedMontage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从CurrentMontageSetNextSectionName调用的RPC函数，复制到其他客户端 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(reliable, server, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerCurrentMontageSetNextSectionName</span><span class="params">(UAnimSequenceBase* ClientAnimation, <span class="type">float</span> ClientPosition, FName SectionName, FName NextSectionName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从CurrentMontageJumpToSection调用的RPC函数，复制到其他客户端 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(reliable, server, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerCurrentMontageJumpToSectionName</span><span class="params">(UAnimSequenceBase* ClientAnimation, FName SectionName)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从CurrentMontageSetPlayRate调用的RPC函数，复制到其他客户端 */</span></span><br><span class="line">	<span class="built_in">UFUNCTION</span>(reliable, server, WithValidation)</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ServerCurrentMontageSetPlayRate</span><span class="params">(UAnimSequenceBase* ClientAnimation, <span class="type">float</span> InPlayRate)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从游戏事件触发的能力 */</span></span><br><span class="line">	TMap&lt;FGameplayTag, TArray&lt;FGameplayAbilitySpecHandle &gt; &gt; GameplayEventTriggeredAbilities;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 从添加到所有者的标签触发的能力 */</span></span><br><span class="line">	TMap&lt;FGameplayTag, TArray&lt;FGameplayAbilitySpecHandle &gt; &gt; OwnedTagTriggeredAbilities;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 当绑定到能力的拥有标签更改时调用的回调 */</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">MonitoredTagChanged</span><span class="params">(<span class="type">const</span> FGameplayTag Tag, int32 NewCount)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 如果指定能力应在此网络模式下从事件激活，则返回true */</span></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">HasNetworkAuthorityToActivateTriggeredAbility</span><span class="params">(<span class="type">const</span> FGameplayAbilitySpec &amp;Spec)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">5.3</span>, <span class="string">&quot;请直接使用OnImmunityBlockGameplayEffectDelegate。它从UImmunityGameplayEffectComponent触发。如果需要不同功能，可以创建自己的GameplayEffectComponent。&quot;</span>)</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnImmunityBlockGameplayEffect</span><span class="params">(<span class="type">const</span> FGameplayEffectSpec&amp; Spec, <span class="type">const</span> FActiveGameplayEffect* ImmunityGE)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 内部游戏提示函数</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">AddGameplayCue_Internal</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FGameplayEffectContextHandle&amp; EffectContext, FActiveGameplayCueContainer&amp; GameplayCueContainer)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">AddGameplayCue_Internal</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, <span class="type">const</span> FGameplayCueParameters&amp; GameplayCueParameters, FActiveGameplayCueContainer&amp; GameplayCueContainer)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">RemoveGameplayCue_Internal</span><span class="params">(<span class="type">const</span> FGameplayTag GameplayCueTag, FActiveGameplayCueContainer&amp; GameplayCueContainer)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 实际将最终属性值推送到属性集的属性。不应由外部代码调用，因为这不会通过属性聚合器系统。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetNumericAttribute_Internal</span><span class="params">(<span class="type">const</span> FGameplayAttribute &amp;Attribute, <span class="type">float</span>&amp; NewFloatValue)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">bool</span> <span class="title">HasNetworkAuthorityToApplyGameplayEffect</span><span class="params">(FPredictionKey PredictionKey)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ExecutePeriodicEffect</span><span class="params">(FActiveGameplayEffectHandle	Handle)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ExecuteGameplayEffect</span><span class="params">(FGameplayEffectSpec &amp;Spec, FPredictionKey PredictionKey)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CheckDurationExpired</span><span class="params">(FActiveGameplayEffectHandle Handle)</span></span>;</span><br><span class="line">		</span><br><span class="line">	TArray&lt;TObjectPtr&lt;UGameplayTask&gt;&gt;&amp;	<span class="built_in">GetAbilityActiveTasks</span>(UGameplayAbility* Ability);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 包含当前在此组件上活跃的所有游戏效果 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Replicated)</span><br><span class="line">	FActiveGameplayEffectsContainer ActiveGameplayEffects;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 所有活跃游戏提示（在游戏效果之外执行）的列表 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Replicated)</span><br><span class="line">	FActiveGameplayCueContainer ActiveGameplayCues;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 在最小复制模式下复制的游戏提示。这些通常来自ActiveGameplayEffects的提示（但由于我们不在最小模式下复制AGE，它们必须通过这里复制） */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Replicated)</span><br><span class="line">	FActiveGameplayCueContainer MinimalReplicationGameplayCues;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 具有这些标签的能力无法被激活 */</span></span><br><span class="line">	FGameplayTagCountContainer BlockedAbilityTags;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">4.26</span>, <span class="string">&quot;这将在未来的引擎版本中变为私有。请改用SetBlockedAbilityBindings、GetBlockedAbilityBindings或GetBlockedAbilityBindings_Mutable。&quot;</span>)</span><br><span class="line">	<span class="comment">/** 基于输入绑定跟踪被阻塞的能力。如果BlockedAbilityBindings[InputID] &gt; 0，则能力被阻塞 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Transient, Replicated)</span><br><span class="line">	TArray&lt;uint8&gt; BlockedAbilityBindings;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetBlockedAbilityBindings</span><span class="params">(<span class="type">const</span> TArray&lt;uint8&gt;&amp; NewBlockedAbilityBindings)</span></span>;</span><br><span class="line">	<span class="function">TArray&lt;uint8&gt;&amp; <span class="title">GetBlockedAbilityBindings_Mutable</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> TArray&lt;uint8&gt;&amp; <span class="title">GetBlockedAbilityBindings</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">DebugCyclicAggregatorBroadcasts</span><span class="params">(<span class="keyword">struct</span> FAggregator* Aggregator)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/** 所有游戏标签（来自GE的OwnedGameplayTags和显式GameplayCueTags）的加速映射 */</span></span><br><span class="line">	FGameplayTagCountContainer GameplayTagCountContainer;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UE_DEPRECATED</span>(<span class="number">4.26</span>, <span class="string">&quot;这将在未来的引擎版本中变为私有。请改用SetMinimalReplicationTags、GetMinimalReplicationTags或GetMinimalReplicationTags_Mutable。&quot;</span>)</span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Replicated)</span><br><span class="line">	FMinimalReplicationTagCountMap MinimalReplicationTags;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetMinimalReplicationTags</span><span class="params">(<span class="type">const</span> FMinimalReplicationTagCountMap&amp; NewMinimalReplicationTags)</span></span>;</span><br><span class="line">	<span class="function">FMinimalReplicationTagCountMap&amp; <span class="title">GetMinimalReplicationTags_Mutable</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> FMinimalReplicationTagCountMap&amp; <span class="title">GetMinimalReplicationTags</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">FMinimalReplicationTagCountMap&amp; <span class="title">GetReplicatedLooseTags_Mutable</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> FMinimalReplicationTagCountMap&amp; <span class="title">GetReplicatedLooseTags</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">ResetTagMap</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">NotifyTagMap_StackCountChange</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; Container)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">OnTagUpdated</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; Tag, <span class="type">bool</span> TagExists)</span> </span>&#123;&#125;;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="type">const</span> UAttributeSet*	<span class="title">GetAttributeSubobject</span><span class="params">(<span class="type">const</span> TSubclassOf&lt;UAttributeSet&gt; AttributeClass)</span> <span class="type">const</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> UAttributeSet*	<span class="title">GetAttributeSubobjectChecked</span><span class="params">(<span class="type">const</span> TSubclassOf&lt;UAttributeSet&gt; AttributeClass)</span> <span class="type">const</span></span>;</span><br><span class="line">	<span class="function"><span class="type">const</span> UAttributeSet*	<span class="title">GetOrCreateAttributeSubobject</span><span class="params">(TSubclassOf&lt;UAttributeSet&gt; AttributeClass)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">UpdateTagMap_Internal</span><span class="params">(<span class="type">const</span> FGameplayTagContainer&amp; Container, int32 CountDelta)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FActiveGameplayEffect</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FActiveGameplayEffectAction</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FActiveGameplayEffectsContainer</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FActiveGameplayCue</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FActiveGameplayCueContainer</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FGameplayAbilitySpec</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FGameplayAbilitySpecContainer</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FAggregator</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FActiveGameplayEffectAction_Add</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">FGameplayEffectSpec</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">AAbilitySystemDebugHUD</span>;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">UAbilitySystemGlobals</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改SpawnedAttributes数组时必须调用，以使更改被复制</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetSpawnedAttributesListDirty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在AllReplicatedInstancedAbilities数组上的deprecation标签被移除，我们可以再次直接引用数组之前的私有访问器。</span></span><br><span class="line">	PRAGMA_DISABLE_DEPRECATION_WARNINGS</span><br><span class="line">	TArray&lt;TObjectPtr&lt;UGameplayAbility&gt;&gt;&amp; <span class="built_in">GetReplicatedInstancedAbilities_Mutable</span>() &#123; <span class="keyword">return</span> AllReplicatedInstancedAbilities; &#125;</span><br><span class="line">	PRAGMA_ENABLE_DEPRECATION_WARNINGS</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 属性集列表 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Replicated, ReplicatedUsing = OnRep_SpawnedAttributes, Transient)</span><br><span class="line">	TArray&lt;TObjectPtr&lt;UAttributeSet&gt;&gt;	SpawnedAttributes;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">UFUNCTION</span>()</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">OnRep_SpawnedAttributes</span><span class="params">(<span class="type">const</span> TArray&lt;UAttributeSet*&gt;&amp; PreviousSpawnedAttributes)</span></span>;</span><br><span class="line"></span><br><span class="line">	FDelegateHandle MonitoredTagChangedDelegateHandle;</span><br><span class="line">	FTimerHandle    OnRep_ActivateAbilitiesTimerHandle;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 用于复制松散游戏标签的容器 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Replicated)</span><br><span class="line">	FMinimalReplicationTagCountMap ReplicatedLooseTags;</span><br><span class="line"></span><br><span class="line">	uint8 bDestroyActiveStateInitiated : <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 缓存指示此组件是否具有网络权限的标志。 */</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">CacheIsNetSimulated</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** PredictionKeys，请参阅GameplayPrediction.h中的更多信息。这必须放在AbilitySystemComponent上所有复制属性的*最后*，以确保OnRep/回调顺序。 */</span></span><br><span class="line">	<span class="built_in">UPROPERTY</span>(Replicated, Transient)</span><br><span class="line">	FReplicatedPredictionKeyMap ReplicatedPredictionKeyMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"></span><br><span class="line">	<span class="keyword">struct</span> <span class="title class_">FAbilityListLockActiveChange</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">FAbilityListLockActiveChange</span>(UAbilitySystemComponent&amp; InAbilitySystemComp,</span><br><span class="line">									 TArray&lt;FGameplayAbilitySpec, TInlineAllocator&lt;<span class="number">2</span>&gt; &gt;&amp; PendingAdds,</span><br><span class="line">									 TArray&lt;FGameplayAbilitySpecHandle, TInlineAllocator&lt;<span class="number">2</span>&gt; &gt;&amp; PendingRemoves) :</span><br><span class="line">			<span class="built_in">AbilitySystemComp</span>(InAbilitySystemComp),</span><br><span class="line">			<span class="built_in">Adds</span>(<span class="built_in">MoveTemp</span>(PendingAdds)),</span><br><span class="line">			<span class="built_in">Removes</span>(<span class="built_in">MoveTemp</span>(PendingRemoves))</span><br><span class="line">		&#123;</span><br><span class="line">			AbilitySystemComp.AbilityListLockActiveChanges.<span class="built_in">Add</span>(<span class="keyword">this</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		~<span class="built_in">FAbilityListLockActiveChange</span>()</span><br><span class="line">		&#123;</span><br><span class="line">			AbilitySystemComp.AbilityListLockActiveChanges.<span class="built_in">Remove</span>(<span class="keyword">this</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		UAbilitySystemComponent&amp; AbilitySystemComp;</span><br><span class="line">		TArray&lt;FGameplayAbilitySpec, TInlineAllocator&lt;<span class="number">2</span>&gt; &gt; Adds;</span><br><span class="line">		TArray&lt;FGameplayAbilitySpecHandle, TInlineAllocator&lt;<span class="number">2</span>&gt; &gt; Removes;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	TArray&lt;FAbilityListLockActiveChange*&gt; AbilityListLockActiveChanges;</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>


		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> Unreal Engine——源码阅读:AbilitySystemComponent.h(UE5.4.4)</li>
        <li><strong>Author:</strong> ELecmark</li>
        <li><strong>Created at
                :</strong> 2025-12-15 23:48:06</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2025-12-16 00:25:26
            </li>
        
        <li>
            <strong>Link:</strong> https://elecmark.github.io/2025/12/15/UE5源码-AbilitySystemComponent-h/
        </li>
        <li>
            <strong>
                License:
            </strong>
            

            
                This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a>.
            
        </li>
    </ul>
</div>

		</div>
		

		
		<ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
			
			<li class="tag-item mx-0.5">
				<a href="/tags/C/">#C++</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/Unreal-Engine/">#Unreal Engine</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/GAS/">#GAS</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/">#学习报告</a>&nbsp;
			</li>
			
		</ul>
		

		

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/2025/12/09/%E3%80%8AAura%E3%80%8BUE5-Gameplay-Ability-System%E5%AD%A6%E4%B9%A0%E6%8A%A5%E5%91%8A/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item truncate max-w-48">Unreal Engine——《Aura》Gameplay Ability System学习报告</span>
						<span class="post-nav-item">Next posts</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
		<div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
			<div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        Comments
    </div>
    

        
            
    <div id="waline"></div>
    <script type="module" data-swup-reload-script>
      import { init } from '/js/libs/waline.mjs';

      function loadWaline() {
        init({
          el: '#waline',
          serverURL: 'https://example.example.com',
          dark: 'body[class~="dark-mode"]',
          reaction: false,
          requiredMeta: ['nick', 'mail'],
          emoji: [],
                    lang: 'zh-CN',
        });
      }

      if (typeof swup !== 'undefined') {
        loadWaline();
      } else {
        window.addEventListener('DOMContentLoaded', loadWaline);
      }
    </script>



        
    
</div>

		</div>
		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">On this page</div>
		<div class="page-title">Unreal Engine——源码阅读:AbilitySystemComponent.h(UE5.4.4)</div>
		

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2023</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">ELecmark</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        30 posts in total
                    </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">VISITOR COUNT</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">TOTAL PAGE VIEWS</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.5</a></span>
        </div>
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
		<li class="go-comment">
			<i class="fa-regular fa-comments"></i>
		</li>
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	
	<div class="search-pop-overlay">
	<div class="popup search-popup">
		<div class="search-header">
			<span class="search-input-field-pre">
				<i class="fa-solid fa-keyboard"></i>
			</span>
			<div class="search-input-container">
				<input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input">
			</div>
			<span class="popup-btn-close">
				<i class="fa-solid fa-times"></i>
			</span>
		</div>
		<div id="search-result">
			<div id="no-result">
				<i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
			</div>
		</div>
	</div>
</div>
	

</main>



<script src="/js/build/libs/Swup.min.js"></script>

<script src="/js/build/libs/SwupSlideTheme.min.js"></script>

<script src="/js/build/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/build/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/build/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/build/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	
<script src="/js/build/tools/imageViewer.js" type="module"></script>

<script src="/js/build/utils.js" type="module"></script>

<script src="/js/build/main.js" type="module"></script>

<script src="/js/build/layouts/navbarShrink.js" type="module"></script>

<script src="/js/build/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/build/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/build/layouts/categoryList.js" type="module"></script>



    
<script src="/js/build/tools/localSearch.js" type="module"></script>




    
<script src="/js/build/tools/codeBlock.js" type="module"></script>




    
<script src="/js/build/layouts/lazyload.js" type="module"></script>




    
<script src="/js/build/tools/runtime.js"></script>

    
<script src="/js/build/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/build/libs/Typed.min.js"></script>

  
<script src="/js/build/plugins/typed.js" type="module"></script>




    
        
<script src="/js/build/libs/mermaid.min.js"></script>

    
    
<script src="/js/build/plugins/mermaid.js"></script>






    
<script src="/js/build/libs/anime.min.js"></script>





    
<script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script>





	
	<div id="aplayer"></div>

<script src="/js/build/libs/APlayer.min.js"></script>


<script src="/js/build/plugins/aplayer.js"></script>


	
</body>

</html>